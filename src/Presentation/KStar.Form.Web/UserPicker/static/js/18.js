webpackJsonp([18],{685:function(e,t,i){"use strict";var a={name:"page",props:{pageIndex:{type:Number,default:1,required:!0},pageSize:{type:Number,default:1,required:!0},total:{type:Number,default:0,required:!0},pageSizesList:{type:Array,required:!0}},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},firstPage:function(){this.pageIndex=1},tailPage:function(){this.pageIndex=this.$refs.page.internalPageCount}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page"},[i("el-pagination",{ref:"page",attrs:{background:"","current-page":e.pageIndex,"page-sizes":e.pageSizesList,"page-size":e.pageSize,"prev-text":e.$t("UserPicker.HomePage"),"next-text":e.$t("UserPicker.TailPage"),layout:"total, prev, pager, next, sizes",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"prev-click":e.firstPage,"next-click":e.tailPage}})],1)},staticRenderFns:[]};var r=i(47)(a,s,!1,function(e){i(687)},"data-v-18a42a56",null).exports;t.a=r},687:function(e,t){},714:function(e,t,i){"use strict";var a=i(160),s=i.n(a),r={name:"selectedPersonnel",props:{childDataUrl:{type:Object,required:!0},closeShow:!1,oneCheck:{type:Boolean,default:!0}},mounted:function(){this.childDataUrl.chooseProject&&this.childDataUrl.chooseProject.item&&this.childDataUrl.chooseProject.last&&(this.treeNode=this.childDataUrl.chooseProject.item,this.last=this.childDataUrl.chooseProject.last,this.checkedCitie.push(this.treeNode))},data:function(){return{organName:"",mianbao:[],value:"",options:[],bread:"",fullSearch:"",treeSearch:"",checkAll:!1,checkedCitie:[],cities:[],isIndeterminate:!1,organizationData:[],oldtime:0,defaultProps:{children:"m_ChildOrg",label:"orgName",isLeaf:function(e,t){return!(e&&e.isParent>0)}},last:{},treeNode:{},isActive:!1,tooltipOrganName:"",defaultKeys:[],isSeach:!1,treeQuery:!1}},watch:{treeSearch:function(e){var t=this;t.treeQuery=!0,t.queryName=e,this.loading=!0,this.isSeach||""==t.queryName.trim()||(this.isSeach=!0,setTimeout(function(){t.isSeach=!1,t.searchTree(t.queryName)},2e3))}},methods:{searchTree:function(e){var t=this,i=null;this.childDataUrl.isFirst&&(i=this.childDataUrl.isFirst),this.$axios.post("/api/"+this.childDataUrl.getTree,{orgName:e,isFirst:i}).then(function(e){t.organizationData=t.toTree(e.data.result)}).catch(function(e){t.$message.error("查询部门组织数据失败!ERROR MESSAGE:"+e)})},pullBtnHeightChange:function(){this.isActive=!this.isActive},disposeOrganName:function(e){for(var t="",i=0;i<e.length;i++){t+=e[i].text+">"}return t=t.substr(0,t.length-1),this.tooltipOrganName=t,t.length>30?this.bread=t.substr(0,30)+"...":this.bread=t,t},handleNodeClick:function(e,t){var i=(new Date).getTime();if(this.oldtime&&i-this.oldtime<200)return this.treeNode.orgFullName=t.data.orgFullName,this.treeNode.orgID=t.data.orgID,this.treeNode.orgName=t.data.orgName,this.treeNode.parentOrgID=t.data.parentOrgID,this.clickDepartment(this.treeNode),void this.$emit("sureSubmit",{type:"project",item:this.treeNode,last:this.last});if(this.oldtime=i,t.isLeaf){this.cities=[];var a={};a.isParent=e.isParent,a.orgFullName=e.orgFullName,a.orgID=e.orgID,a.orgName=e.orgName,a.parentOrgID=e.parentOrgID,this.cities.push(a)}else{this.cities=[];for(var s=0;t.childDatas&&s<t.childDatas.length;s++)this.cities.push(t.childDatas[s])}for(s=0;s<this.cities.length;s++){for(var r=!1,o=0;o<this.checkedCitie.length;o++)if(this.cities[s].orgID===this.checkedCitie[o].orgID){r=!0;break}this.cities[s].checked=!!r}this.mianbao=[],this.getPrarentNode(t),this.disposeOrganName(this.mianbao)},handleNodeload:function(e,t){var i=this;if(e.data&&0!=e.data.length)if(this.mianbao=[],e.data.m_ChildOrg&&e.data.m_ChildOrg.length>0){var a=[];e.childDatas=[];for(var s=0;s<e.data.m_ChildOrg.length;s++)a.push(e.data.m_ChildOrg[s]),e.childDatas.push(e.data.m_ChildOrg[s]);delete e.data.m_ChildOrg,t(a)}else this.$axios.post("/api/"+this.childDataUrl.getTree,{orgDepId:e.data.orgID}).then(function(a){if(200===a.status){e.childDatas=[],i.cities=[];for(var s=0;s<a.data.result.length;s++)e.childDatas.push(a.data.result[s]),i.cities.push(a.data.result[s]);t(a.data.result)}else i.$message.error("请求失败！")}).catch(function(e){that.$message.error("查询数据失败!ERROR MESSAGE:"+e)});else this.getTree(t)},getTree:function(e){var t=this,i=null;this.childDataUrl.isFirst&&(i=this.childDataUrl.isFirst),this.$axios.post("/api/"+this.childDataUrl.getTree,{orgDepId:"A5A40ECE-0DBD-4F2B-89E8-6BA91B91EBF4",isFirst:i}).then(function(i){200===i.status?(t.organizationData=t.toTree(i.data.result),e&&(e(t.organizationData),t.defaultKeys[0]=t.organizationData[0].orgID)):t.$message.error("请求失败！")}).catch(function(e){t.$message.error("查询部门组织数据失败!ERROR MESSAGE:"+e)})},sureSubmit:function(){this.checkedCitie&&0!==this.checkedCitie.length?this.oneCheck?this.$emit("sureSubmit",{type:"project",item:this.treeNode,last:this.last}):this.$emit("sureSubmit",{type:"project",items:this.checkedCitie}):this.$message.warning("请选择数据!")},close:function(){this.$emit("hideComponent")},searchProject:function(){},toTree:function(e){if(null==e||0==e.length)return[];e.forEach(function(e){delete e.m_ChildOrg});var t={};e.forEach(function(e){t[e.orgID]=e});var i=[];return e.forEach(function(e){var a=t[e.parentOrgID];a?(a.m_ChildOrg||(a.m_ChildOrg=[])).push(e):i.push(e)}),i},checkChangeNode:function(e,t,i){},handleCheckAllChange:function(e){if(e){for(var t=0;t<this.cities.length;t++){for(var i=!1,a=0;a<this.checkedCitie.length;a++)this.checkedCitie[a].orgID===this.cities[t].orgID&&(i=!0);i||this.checkedCitie.push(this.cities[t])}this.isIndeterminate=!0}else{for(t=0;t<this.cities.length;t++){for(i=!1,a=0;a<this.checkedCitie.length;a++)if(this.checkedCitie[a].orgID===this.cities[t].orgID){i=!0;break}i&&this.checkedCitie.splice(a,1)}this.isIndeterminate=!1}},handleCheckedCitiesChange:function(e){this.checkedCitie=e;var t=e.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length},clickDepartment:function(e){var t=this;this.checkedCitie.splice(0,this.checkedCitie.length),this.checkedCitie.push(e);var i=this.$refs.tree2.getNode(e.orgID);this.mianbao=[],this.getPrarentNode(i),t.organName="";var a=!0,r=!1,o=void 0;try{for(var n,l=s()(t.mianbao);!(a=(n=l.next()).done);a=!0){var c=n.value;t.organName+=c.text+">"}}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}t.organName+=""+e.orgName,t.treeNode=e,t.last.lastNode="",t.last.lastId="",t.mianbao.forEach(function(e){t.last.lastNode+=e.text+"-",t.last.lastId=e.petId}),t.last.lastNode=t.last.lastNode.substr(0,t.last.lastNode.length-1)},dblclickCheckedCitie:function(e){this.clickDepartment(e),this.$emit("sureSubmit",{type:"project",item:e,last:this.last})},deleteProject:function(e,t){this.checkedCitie.splice(t,1)},clearProject:function(){this.checkedCitie.splice(0,this.checkedCitie.length),this.checkAll=!1,this.isIndeterminate=!1},getPrarentNode:function(e){void 0!=e.data.orgName&&this.mianbao.unshift({text:""+e.data.orgName,petId:""+e.data.orgID}),void 0!=e.parent&&this.getPrarentNode(e.parent)},getChild:function(e){void 0!==e.childNodes&&0!==e.childNodes.length||(this.last={lastNode:e.data.orgName,lastId:e.data.orgID})}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"originater_dialog project_dialog"},[i("div",{class:[e.closeShow?"pc-candidates":"pc-candidates pc-background"]},[i("div",{staticClass:"dialog_content"},[i("el-main",{staticStyle:{position:"relative"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.closeShow,expression:"!closeShow"}],staticClass:"top"},[e._v("组织选择"),i("span",{staticStyle:{"font-size":"30px",cursor:"pointer",float:"right","padding-right":"5px"},on:{click:e.close}},[e._v("×")])]),e._v(" "),i("el-tabs",{attrs:{type:"card"}},[i("el-tab-pane",{staticClass:"candidates-recently"},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-todos"}),e._v(" 组织")]),e._v(" "),i("div",{staticClass:"title  title-border"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[e._v("组织架构")]),e._v(" "),i("el-breadcrumb-item",{attrs:{title:e.tooltipOrganName}},[e._v(e._s(e.bread))])],1),e._v(" "),i("span",{staticClass:"rightInput"},[i("el-input",{attrs:{placeholder:"请输入部门关键字","prefix-icon":"el-icon-search",size:"mini"},model:{value:e.treeSearch,callback:function(t){e.treeSearch=t},expression:"treeSearch"}})],1)],1),e._v(" "),i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"content-left"},[i("el-tree",{ref:"tree2",attrs:{data:e.organizationData,"node-key":"orgID","highlight-current":!0,props:e.defaultProps,"default-expanded-keys":e.defaultKeys,"default-checked-keys":e.defaultKeys,load:e.handleNodeload,lazy:""},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),i("div",{staticClass:"content-right"},[e.oneCheck?e._e():i("el-checkbox",{staticStyle:{"padding-top":"6px"},attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n                ")]),e._v(" "),e.oneCheck?i("el-checkbox-group",{staticClass:"theRadio",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCitie,callback:function(t){e.checkedCitie=t},expression:"checkedCitie"}},e._l(e.cities,function(t){return i("el-checkbox-button",{key:t.orgID,attrs:{label:t}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body",on:{click:function(i){e.clickDepartment(t)},dblclick:function(i){e.dblclickCheckedCitie(t)}}},[i("h4",{staticClass:"media-heading iconfont icon-company"},[e._v(e._s(t.orgName))])])])])})):i("el-checkbox-group",{staticClass:"mut-check",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCitie,callback:function(t){e.checkedCitie=t},expression:"checkedCitie"}},e._l(e.cities,function(t,a){return i("el-checkbox",{key:a,attrs:{label:t,checked:t.checked}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body mut-media-body"},[i("h4",{staticClass:"media-heading iconfont icon-company"},[e._v(e._s(t.orgName))])])])])}))],1)]),e._v(" "),i("div",{staticClass:"addrecently",class:{pullup:e.isActive}},[i("div",{staticClass:"media"},[i("div",{staticClass:"pull",on:{click:e.pullBtnHeightChange}}),e._v(" "),i("ul",{staticClass:"clearfix"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.checkedCitie.length>0,expression:"checkedCitie.length>0"}],staticClass:"clearBtn",on:{click:e.clearProject}}),e._v(" "),e._l(e.checkedCitie,function(t,a){return i("li",{key:t.orgID},[i("div",{staticClass:"media-body"},[i("i",{staticClass:"el-icon-circle-close",on:{click:function(i){e.deleteProject(t,a)}}}),e._v(" "),i("span",{staticClass:"media-heading"},[e._v(e._s(t.orgName))])])])})],2)])]),e._v(" "),i("div",{staticClass:"addrecently-footer"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.sureSubmit}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:e.close}},[e._v("取消")])],1)])],1)],1)],1)])])},staticRenderFns:[]};var n=i(47)(r,o,!1,function(e){i(715)},"data-v-7a420611",null);t.a=n.exports},715:function(e,t){},717:function(e,t,i){"use strict";var a=i(160),s=i.n(a),r={name:"processDialog",props:{closeShow:!1},data:function(){return{dialog:!0,orgID:"",isFirstSelcet:"",isSecondSelcet:"",isThirdSelcet:"",isFouthSelcet:"",isFifthSelect:"",isFifthSelcet:"",isSixSelcet:"",selectFouthData:"",checked:!1,processValue:"",defaultProps:{children:"m_ChildOrg",label:"orgName"},firstData:[],secondData:[],thirdData:[],fouthData:[],selectedData:{},isK2ProcessDisabled:!0,loading:!1}},mounted:function(){this.getDataList()},methods:{getDataList:function(){var e=this;this.$axios.post("/api/companytree/page",{}).then(function(t){200===t.status?(e.firstData=t.data.companyTreeList,e.secondData=e.firstData[0].m_ChildOrg):e.$message.error("请求失败！")}).catch(function(t){e.$message.error("连接服务器失败！"+t)})},checkSecond:function(e,t){this.isK2ProcessDisabled=!1,this.isSecondSelcet=e.orgName,this.thirdData=[],this.fouthData=[],this.isThirdSelcet="",this.isFouthSelcet="",this.isFifthSelect="",this.orgID=e.orgID;var i={orgId:e.orgID,isUse:1,name:"",isHide:this.checked?0:1,isDailog:1};this.getUrlList(i)},getUrlList:function(e){var t=this;this.thirdData=[],this.fouthData=[],this.isFifthSelcet="",this.isSixSelcet="";this.$axios.post("/api/processCategoryTree",e).then(function(e){200===e.status?(t.thirdData=t.toTree(t.processingData(e.data.result)),null==t.thirdData&&t.$message.success("数据为空"),t.checkThird(t.thirdData[0],0)):t.$message.error("请求失败！")}).catch(function(e){})},toTree:function(e){if(null==e||0==e.length)return[];e.forEach(function(e){delete e.Child});var t={};e.forEach(function(e){t[e.id]=e});var i=[];return e.forEach(function(e){var a=t[e.pid];a?(a.Child||(a.Child=[])).push(e):i.push(e)}),i},checkThird:function(e){this.isThirdSelcet=e.id,this.fouthData&&(this.fouthData=[],this.isFouthSelcet="",this.isFifthSelect=""),e.Child?this.fouthData=e.Child:this.selectedData=e},processingData:function(e){var t=e;for(var i in t){var a=t[i];if(t[i].processDescriptions=[{txt:"无提示信息!"}],a.processDescription&&null!=a.processDescription){var r;r=a.processDescription.split(";");var o=[],n=!0,l=!1,c=void 0;try{for(var h,d=s()(r);!(n=(h=d.next()).done);n=!0){var u=h.value;u=u.replace("&gt",">"),o.push({txt:u})}}catch(e){l=!0,c=e}finally{try{!n&&d.return&&d.return()}finally{if(l)throw c}}t[i].processDescriptions=o}}return t},checkFouth:function(e){e.childsProcessCategories||(this.selectedData=e)},checkFifth:function(e){e.childsProcessCategories||(this.isSixSelcet="",this.isFifthSelcet=e.id,this.selectedData=e)},checkSixth:function(e){this.isFifthSelcet="",this.isSixSelcet=e.id,e.childsProcessCategories||(this.selectedData=e)},sureSubmitData:function(){var e=this.selectedData.name,t=this.selectedData.id+"";e&&this.$emit("sureSubmit",{type:"process",text:e,processID:t,item:this.selectedData})},checkIsK2Process:function(){var e={orgId:this.orgID,isUse:1,isHide:this.checked?0:1,name:this.processValue,isDailog:1};this.getUrlList(e)},searchFlow:function(){var e={orgId:this.orgID,isUse:1,isHide:this.checked?0:1,name:this.processValue,isDailog:1};this.getUrlList(e)},searchScreenData:function(e,t){var i=[],a=[];if(t.forEach(function(t,i,s){-1!==t.name.indexOf(e)&&a.push(t)}),a==[])return null;var r=!0,o=!1,n=void 0;try{for(var l,c=s()(a);!(r=(l=c.next()).done);r=!0){var h=l.value;this.selectPrantData(h,t,i)}}catch(e){o=!0,n=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw n}}return i},selectPrantData:function(e,t,i){var a=!0,r=!1,o=void 0;try{for(var n,l=s()(t);!(a=(n=l.next()).done);a=!0){var c=n.value;if(c.id==e.pid){void 0==c.Child&&(c.Child=[]),c.Child.push(e);var h=!0,d=!0,u=!1,g=void 0;try{for(var p,m=s()(i);!(d=(p=m.next()).done);d=!0){var f=p.value;h=c.id!=f.id}}catch(e){u=!0,g=e}finally{try{!d&&m.return&&m.return()}finally{if(u)throw g}}h&&i.push(c),this.selectPrantData(c,t,i)}}}catch(e){r=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw o}}},close:function(){this.$emit("hideComponent")}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"originater_dialog"},[i("div",{class:[e.closeShow?"pc-candidates":"pc-candidates pc-background"]},[i("div",{staticClass:"dialog_content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.closeShow,expression:"!closeShow"}],staticClass:"top"},[e._v("流程选择\n          "),i("span",{staticStyle:{"font-size":"30px",cursor:"pointer",float:"right","padding-right":"5px"},on:{click:e.close}},[e._v("×")])]),e._v(" "),i("div",{staticClass:"initProcess"},[i("el-container",[i("el-header",[i("div",{staticClass:"initProcess-header"},[i("el-checkbox",{staticClass:"initCheckbox",attrs:{disabled:e.isK2ProcessDisabled},on:{change:e.checkIsK2Process},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("显示允许直接从K2发起的流程")]),e._v(" "),i("div",{staticClass:"searchCom"},[i("el-input",{staticClass:"inputCom",attrs:{disabled:e.isK2ProcessDisabled,clearable:"",placeholder:"流程搜索",size:"mini"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchFlow(t):null}},model:{value:e.processValue,callback:function(t){e.processValue=t},expression:"processValue"}}),e._v(" "),i("el-button",{staticClass:"searchBtn",attrs:{disabled:e.isK2ProcessDisabled,type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.searchFlow}},[e._v("搜索")])],1)],1)]),e._v(" "),i("el-main",[i("div",{staticStyle:{"overflow-x":"hidden"}},[i("div",{staticClass:"originater-contain"},[i("ul",{staticClass:"secondList"},e._l(e.secondData,function(t){return i("li",{key:t.orgName,class:{isActive:e.isSecondSelcet===t.orgName},on:{click:function(i){e.checkSecond(t)}}},[i("i",{staticClass:"el-icon-tickets"}),e._v("\n                      "+e._s(t.orgName)+"\n                      ")])})),e._v(" "),i("ul",{staticClass:"thirdList"},e._l(e.thirdData,function(t){return i("li",{key:t.id,class:{isActive:e.isThirdSelcet===t.id},on:{click:function(i){i.stopPropagation(),e.checkThird(t)}}},[e._v(e._s(t.name))])})),e._v(" "),i("ul",{staticClass:"fouthList"},e._l(e.fouthData,function(t){return i("li",{key:t.id,staticClass:"fouthList-title",on:{click:function(i){i.stopPropagation(),e.checkFouth(t)}}},[null==t.processFullName?i("div",[i("span",{staticClass:"fouthList-title-first"},[e._v(e._s(t.name)+">")]),e._v(" "),i("div",{staticClass:"line"})]):i("div",[i("ul",{staticClass:"fifthList-contain"},[i("li",{staticClass:"fifthList",class:{isActive:e.isSixSelcet===t.id},on:{click:function(i){i.stopPropagation(),e.checkSixth(t)}}},[i("span",{attrs:{title:t.name}},[0==t.disabled?i("a",{attrs:{target:"_blank",href:e.linkhref}},[e._v(e._s(t.name))]):i("a",[e._v(e._s(t.name))])])])])]),e._v(" "),i("ul",e._l(t.Child,function(t){return i("li",{key:t.id,staticClass:"fouthListCon",class:[{fouthChild:t.Child},{isActive:e.isFifthSelcet===t.id}],on:{click:function(i){i.stopPropagation(),e.checkFifth(t)}}},[i("span",{attrs:{title:t.name}},[0==t.disabled?i("a",{attrs:{target:"_blank",href:e.linkhref}},[e._v(e._s(t.name))]):i("a",[e._v(e._s(t.name))])]),e._v(" "),i("ul",{staticClass:"fifthList-contain"},e._l(t.Child,function(t){return i("li",{key:t.id,staticClass:"fifthList",class:{isActive:e.isSixSelcet===t.id},on:{click:function(i){i.stopPropagation(),e.checkSixth(t)}}},[i("span",{attrs:{title:t.name}},[0==t.disabled?i("a",{attrs:{target:"_blank",href:e.linkhref}},[e._v(e._s(t.name))]):i("a",[e._v(e._s(t.name))])])])}))])}))])}))]),e._v(" "),i("div",{staticClass:"addrecently-footer"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.sureSubmitData}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:e.close}},[e._v("取消")])],1)])])],1)],1)])])])},staticRenderFns:[]};var n=i(47)(r,o,!1,function(e){i(718)},"data-v-8b2a6974",null);t.a=n.exports},718:function(e,t){},745:function(e,t){},785:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(160),s=i.n(a),r=i(685),o=i(67),n=i(361),l=i(714),c=i(717),h=i(359),d={name:"staticsJob",components:{page:r.a,originator_dailog:n.a,project_dialog:l.a,process_dialog:c.a},mounted:function(){},data:function(){return{fullHeight:document.documentElement.clientHeight,isShow:!0,queryName:"",multiplelimit:1,loading:!1,arrt:"收起",icon:"el-icon-arrow-up",isAvailable:!1,model:{selectForm:{userID:"",poisitionID:null,processIDs:"",processCategoryIDs:""},userName:[]},hintwring:"",hintwringShow:!1,tableData:[],orgStates:[],processList:[],pageSizesList:[10,20,50,100],pageIndex:1,pageSize:10,total:0,showdialog:!1,comp:{},exportData:[],oneCheck:!0,orderBy:"",checked:"1",childDataUrl:{url:"",selectedPerson:[],chooseProject:{}},imgLoading:!1}},methods:{emptyselect:function(){this.childDataUrl.selectedPerson=[],this.model.userName=[]},isChange:function(e){this.isAvailable=e,this.isAvailable?this.checked="":this.checked="1"},showToggle:function(){this.isShow=!this.isShow,this.isShow?(this.arrt="收起",this.icon="el-icon-arrow-up"):(this.arrt="展开",this.icon="el-icon-arrow-down")},sortChange:function(e){this.orderBy=("isAvailabletype"==e.prop?"isAvailable":e.prop)+" "+e.order.replace("ending",""),0!==this.model.userName.length&&this.getList()},search:function(){this.pageIndex=1,this.getList()},handleSizeChange:function(e){var t=""+e;this.pageIndex=1,this.pageSize=parseInt(t),localStorage.checkPageSize=e,this.getList()},handleCurrentChange:function(e){this.pageIndex=e,this.getList()},getList:function(){var e=this;this.imgLoading=!0,this.model.selectForm.orderBy=this.orderBy,this.model.selectForm.isAvailable=this.checked,this.model.selectForm.pageSize=this.pageSize,this.model.selectForm.pageIndex=this.pageIndex-1,localStorage.todoPageSize&&(this.pageSize=Number(localStorage.todoPageSize));var t="";this.model.selectForm.userID="";var i=!0,a=!1,r=void 0;try{for(var o,n=s()(this.childDataUrl.selectedPerson);!(i=(o=n.next()).done);i=!0){t+="VANKE\\"+o.value.userId+";"}}catch(e){a=!0,r=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw r}}t&&(this.model.selectForm.userID=t.substring(0,t.length-1)),this.$axios.post("/api/reportForm/peopleApprovedProcesses",this.model.selectForm).then(function(t){e.tableData=t.data.processList,e.total=t.data.listCounts;for(var i=0;i<t.data.processList.length;i++)switch(Number(t.data.processList[i].isAvailable)){case 0:t.data.processList[i].isAvailabletype="否";break;case 1:t.data.processList[i].isAvailabletype="是";break;default:t.data.processList[i].isAvailabletype="否"}e.imgLoading=!1}).catch(function(t){e.imgLoading=!1,e.$message.error("查询列表数据失败!ERROR MESSAGE:"+t)})},inquire:function(){this.pageIndex=1,0==this.model.userName.length?this.$message.warning("请选择账号!"):this.getList()},refresh:function(){var e=this;this.model.selectForm.searchWord="",this.model.selectForm.companys="",this.isAvailable="",this.checked="",this.$nextTick(function(){e.model.selectForm.userID="",e.model.userName=[],e.model.processFullName="",e.model.Date=[],e.childDataUrl.selectedPerson=[]})},toTree:function(e){if(null==e||0==e.length)return[];e.forEach(function(e){delete e.children});var t={};e.forEach(function(e){t[e.id]=e});var i=[];return e.forEach(function(e){var a=t[e.pid];a?(a.children||(a.children=[])).push(e):i.push(e)}),i},exportList:function(){var e=this;h.a.startLoading({lock:!0,text:"数据量过大，正在拼命加载中...",background:"rgba(255, 255, 255, 0.9)",target:document.querySelector(".loadingtext")});var t={params:{pageIndex:0,pageSize:this.total,orderBy:this.orderBy,isAvailable:this.checked,userID:this.model.selectForm.userID,processIDs:"",processCategoryIDs:"",poisitionID:null},tableName:"静态统计某个岗位参与的流程"};this.$axios.post("/api/exportExcelForTable",t,{responseType:"blob"}).then(function(e){h.a.endLoading();var t=e.data;o.a.exportSearchList("静态统计某个岗位参与的流程",t)}).catch(function(t){h.a.endLoading(),e.$message.error("导出失败!ERROR MESSAGE:"+t)})},getUsers:function(e){var t=this,i=this;i.orgStates=[],i.$axios.post("/api/getUser",{name:e,deptId:"",isWork:"1"}).then(function(e){for(var a=0;a<e.data.result.length;a++)i.orgStates.push({value:e.data.result[a].displayName,userId:e.data.result[a].adAccount,orgFullPath:e.data.result[a].companyName+"-"+e.data.result[a].orgNameFullPath,vankeId:e.data.result[a].vankeId});t.loading=!1}).catch(function(e){i.$message.error("查询列表数据失败!ERROR MESSAGE:"+e)})},querySearchUser:function(e){if(this.orgStates=[],this.queryName=e,0==this.model.userName.length){this.hintwring="",this.hintwringShow=!1;var t=this;if(this.loading=!0,this.isSeach)return;this.isSeach=!0,setTimeout(function(){t.isSeach=!1,t.validationInput(t.queryName)},2e3)}else""==e.trim()?(this.hintwringShow=!1,this.hintwring=""):(this.hintwringShow=!0,this.hintwring="注意：此处账号选择只能单选！")},personChange:function(e){this.$set(this.$refs.userId,"query",""),this.childDataUrl.selectedPerson[0]=e},removeUser:function(e){if(e.userId){for(var t=0;t<this.childDataUrl.selectedPerson.length&&e.userId!=this.childDataUrl.selectedPerson[t].userId;t++);this.childDataUrl.selectedPerson.splice(t,1)}else{for(t=0;t<this.childDataUrl.selectedPerson.length&&e!=this.childDataUrl.selectedPerson[t].value;t++);this.childDataUrl.selectedPerson.splice(t,1)}},validationInput:function(e){if(""==e||0==e.length)return this.loading=!1,null;e==this.$refs.userId.query?this.getUsers(e):this.orgStates=[]},visibleChange:function(e){this.orgStates=[],e||(this.hintwringShow=!1,this.hintwring="")},clearUser:function(){this.childDataUrl.selectedPerson=[]},openDialog:function(e,t){this.comp.component=e,this.showdialog=!0,o.a.showDailog_mask(),"originator_dailog"==e?(this.oneCheck=!0,this.childDataUrl.getTree="getTree",this.childDataUrl.companytree="companytree/page"):"project_dialog"==e&&(this.childDataUrl.getTree="getTree",this.childDataUrl.companytree="companytree/page")},showMsgfromchild:function(e){if(e.type&&"project"==e.type)if(this.oneCheck){var t=e.last.lastNode;this.model.companys_t=t,this.model.companys=t,this.model.companys.length>15&&(this.model.companys=this.model.companys.substr(0,20)+"..."),this.model.selectForm.departmentID=e.item.orgID,this.model.selectForm.companyCode=e.last.lastId.toString()}else e.items;else if(e.type&&"process"==e.type)this.processFormName=e.text,this.model.selectForm.processID=e.processID;else if(e.type&&"originator"==e.type){this.childDataUrl.selectedPerson=[],this.model.userName=[];var i=!0,a=!1,r=void 0;try{for(var o,n=s()(e.peoArr);!(i=(o=n.next()).done);i=!0){for(var l=o.value,c=l.userId,h=l.vankeId,d=!1,u=0;u<this.childDataUrl.selectedPerson.length;u++)this.childDataUrl.selectedPerson[u].userId===c&&(d=!0);d||(this.childDataUrl.selectedPerson.push({userId:c,value:l.name,vankeId:h}),this.model.userName.push(l.name))}}catch(e){a=!0,r=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw r}}}this.hideComponent()},hideComponent:function(){this.showdialog=!1,o.a.hiddenDailog_mask()}},watch:{fullHeight:function(){return document.documentElement.clientHeight}},computed:{}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"staticReports"},[i("el-container",[i("el-header",{staticClass:"minWidth"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],staticClass:"staticReports minWidth loadingtext",attrs:{"element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[i("el-row",{staticClass:"staticReports-header"},[i("el-col",{attrs:{span:17}},[i("span",{staticClass:"mz",on:{click:function(t){e.$router.back(-1)}}},[e._v("流程报表")]),e._v(" "),i("i",{staticClass:"el-icon-arrow-down"})]),e._v(" "),i("el-col",{staticClass:"statisticjobbtns",attrs:{span:7}},[i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:e.inquire}},[e._v("查询\n            ")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:e.refresh}},[e._v("重置\n            ")])],1)],1),e._v(" "),i("div",{staticClass:"taticReports-content"},[e.isShow?i("div",{staticClass:"statement "},[i("el-row",{staticStyle:{"margin-bottom":"10px"}},[i("el-col",{attrs:{span:24}},[i("span",[e._v("静态-统计某个人员参与的流程报表")])])],1),e._v(" "),i("el-row",{staticClass:"staticReports-middle"},[i("el-col",{staticStyle:{"min-width":"78px"},attrs:{sm:4,md:1}},[i("span",[e._v("账号选择")])]),e._v(" "),i("el-col",{staticClass:"accountchiose",attrs:{span:7}},[i("span",{on:{dblclick:function(t){e.openDialog("originator_dailog")}}},[i("i",{staticClass:"iconfont icon-member",on:{click:function(t){e.openDialog("originator_dailog")}}}),e._v(" "),i("el-select",{ref:"userId",attrs:{filterable:"",clearable:"",remote:"","reserve-keyword":"",placeholder:"","popper-class":"orgstates","remote-method":e.querySearchUser,"value-key":"userId",loading:e.loading},on:{clear:e.emptyselect,change:e.personChange,"remove-tag":e.removeUser,"visible-change":e.visibleChange},model:{value:e.model.userName[0],callback:function(t){e.$set(e.model.userName,0,t)},expression:"model.userName[0]"}},e._l(e.orgStates,function(t,a){return i("el-option",{key:a,attrs:{label:t.value,value:t}},[i("div",{staticClass:"userheight"},[e._v(e._s(t.value)+"("+e._s(t.userId)+")")]),e._v(" "),i("div",{staticClass:"fullpathsize"},[e._v(e._s(t.orgFullPath))])])}))],1)]),e._v(" "),i("el-col",{attrs:{span:5}},[i("i",{class:[e.hintwringShow?"el-icon-warning":""]}),i("span",[e._v(e._s(e.hintwring))])]),e._v(" "),i("el-col",{attrs:{span:3}},[i("el-checkbox",{on:{change:e.isChange},model:{value:e.isAvailable,callback:function(t){e.isAvailable=t},expression:"isAvailable"}},[e._v("包含无效流程")])],1)],1),e._v(" "),i("el-row",[i("el-col",{staticStyle:{"text-align":"right",float:"right"},attrs:{span:24}},[i("el-button",{staticClass:"upload",attrs:{type:"primary",round:"",icon:"iconfont icon-export",size:"mini"},on:{click:e.exportList}},[e._v("导出\n                ")])],1)],1)],1):e._e()]),e._v(" "),i("div",{staticClass:"taticReports-content"},[i("div",{staticClass:"statement"},[i("el-table",{ref:"singleTable",staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{data:e.tableData,border:"","highlight-current-row":"",height:e.isShow?e.fullHeight-305:e.fullHeight-317},on:{"sort-change":e.sortChange}},[i("el-table-column",{attrs:{prop:"orgName",sortable:"custom",label:"公司"}}),e._v(" "),i("el-table-column",{attrs:{prop:"processFullName",label:"目录",align:"left",sortable:"custom","min-width":"155"}}),e._v(" "),i("el-table-column",{attrs:{prop:"processID","min-width":"50",sortable:"custom",label:"ID"}}),e._v(" "),i("el-table-column",{attrs:{prop:"processName","min-with":"180px",sortable:"custom",label:"流程名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"templeName",sortable:"custom",label:"模板名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"stepInfos","min-width":"150",align:"left",sortable:"custom",label:"步骤信息"}}),e._v(" "),i("el-table-column",{attrs:{prop:"processCCUser","min-width":"100",sortable:"custom",label:"抄送人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"isAvailabletype",sortable:"custom",label:"是否有效"}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.imgLoading,expression:"!imgLoading"}],attrs:{slot:"empty"},slot:"empty"},[i("p",{style:{marginTop:"23px"}},[e._v("暂无数据")])]),e._v(" "),i("div",{attrs:{slot:"append"},slot:"append"},[i("page",{attrs:{pageIndex:e.pageIndex,total:e.total,pageSize:e.pageSize,pageSizesList:e.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)],1)],1)])],1),e._v(" "),e.showdialog?i(e.comp.component,{tag:"component",attrs:{oneCheck:e.oneCheck,childDataUrl:e.childDataUrl,queryName:e.queryName},on:{hideComponent:e.hideComponent,sureSubmit:e.showMsgfromchild}}):e._e()],1)],1)],1)},staticRenderFns:[]};var g=i(47)(d,u,!1,function(e){i(745)},"data-v-6bcdc3b1",null);t.default=g.exports}});