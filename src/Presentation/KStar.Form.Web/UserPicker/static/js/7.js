webpackJsonp([7,11],{10:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(358),s=a.n(i),n=a(356),o=a.n(n),r=a(160),l=a.n(r),c=a(162),d=a.n(c),h=a(357),u=a(161),g={name:"OrganizationTree",props:{nodKey:{type:String,default:"id",require:!1},highlightCurrent:{require:!1,type:Boolean,default:!0},checkOnClickNode:{type:Boolean,require:!1,default:!0},expandOnClickNode:{type:Boolean,require:!1,default:!0},renderexpand:{type:Boolean,require:!1,default:!0},autoExpandParent:{type:Boolean,require:!1,default:!0},depthIdPath:{type:Boolean,require:!1,default:!1},isMountedGetData:{type:Boolean,require:!1,default:!0},defaultRootNode:{type:Object,require:!1,default:null},defaultPropLabel:{type:String,require:!1,default:"displayName"},defaultSort:{type:String,require:!1,default:"orderIndex"},parmDialog:{type:Object,default:function(){return new Object}},usertype:{type:Boolean,require:!1,default:!1}},data:function(){return{organizationList:[],defaultProps:{label:"title",children:"children",isLeaf:"isLast"},loading:!1,currentNode:null,isFristLoadTree:!0,userPickUrl:u.baseUrl}},created:function(e){this.debouncedSearchTree=Object(h.debounce)(this.getTreeList,null)},mounted:function(){this.isMountedGetData&&this.debouncedSearchTree(null)},methods:{loadNodeData:function(e,t){return 0===e.level?void(this.isFristLoadTree=!1):void this.debouncedSearchTree(e,t)},getTreeList:function(e,t){var a=this;if(null===e)if(a.parmDialog.orgList)var i={orgList:a.parmDialog.orgList};else i=null;else if(!e.data.isLast)i={ParentID:e.data.id,context:e.data.title};var s={url:a.userPickUrl.Base_User_URL+"/GetChildOrgTree",method:"post",data:i};a.httpService(s,function(e){if(e.data&&200===e.status)if(e.data.data&&e.data.data.length>0){var i=e.data.data;t?t(i):a.organizationList=i}else t&&t([]);a.$emit("closeLoadding")})},nodeClick:function(e,t,a){this.currentNode=t,this.$emit("node-click",e,t,a)},currentChange:function(e,t){this.$emit("current-change",e,t)},checkChange:function(e,t,a){this.$emit("check-change",e,t,a)},check:function(e,t){this.$emit("check",e,t)},setChecked:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;i.$refs.organizationTree&&i.$nextTick(function(){i.$refs.organizationTree.setChecked(e,t,a)})},setCurrentKey:function(e){var t=this;t.$nextTick(function(){if(e&&t.$refs.organizationTree){t.$refs.organizationTree.setCurrentKey(e);var a=t.$refs.organizationTree.getNode(e);a&&t.$emit("node-click",a.data,a,t.$refs.organizationTree.$el)}})},setCheckedKeys:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$nextTick(function(){t.$refs.organizationTree.setCheckedKeys(e,a)})},getNode:function(e){return this.$refs.organizationTree.getNode(e)},getCheckedNodes:function(){return this.$refs.organizationTree.getCheckedNodes()},toTree:function(e){if(null==e||0==e.length)return[];var t=[],a={};return e.forEach(function(e){delete e.children}),e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentId];i?(i.children||(i.children=[])).push(e):t.push(e)}),t},httpService:function(e,t){var a=this;a.loading=!0,a.$emit("openLoadding"),a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,a.$emit("closeLoadding"),e})},getSecode:function(e){e={ParentID:e.data.id,parentId:-1,context:e.data.title,isLeaf:e.data.isLast,level:e.level,spread:!1};var t={url:this.userPickUrl.Base_User_URL+"/GetChildOrgTree",method:"post",data:e};e.isLast||this.$axios(t).then(function(e){})}},computed:{personTableHeight:function(){return this.organizationList.length>0?333:223}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tree",{ref:"organizationTree",attrs:{"node-key":e.nodKey,props:e.defaultProps,data:e.organizationList,"highlight-current":e.highlightCurrent,"check-on-click-node":e.checkOnClickNode,"expand-on-click-node":e.expandOnClickNode,"auto-expand-parent":e.autoExpandParent,load:e.loadNodeData,loading:e.loading,height:e.personTableHeight,parmDialog:e.parmDialog,usertype:e.usertype,lazy:""},on:{"node-click":e.nodeClick,"current-change":e.currentChange,"check-change":e.checkChange,check:e.check}})],1)},staticRenderFns:[]},p=a(47)(g,f,!1,null,null,null).exports,m=a(686),v=a.n(m),y=a(685),_={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20,50]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",tableData:[],currentRow:null,usertags:[],isActive:!1,searchTxt:"",orgPersons:[],newisEmptyApplicant:!1,LeaveDimission:!1,multipleSelection:[],isLeave:"",orgPersonTable:[],collectIcon:"",dialogTags:[],userPickUrl:u.baseUrl,tempOrgID:"",searchKey:""}},components:{page:y.a},props:{persons:{type:String,default:""},chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:[]},type:{type:String,default:""},mutilselectCheck:{type:String,default:""},currentOrgId:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}}},computed:{personTableHeight:function(){return this.tableData.length>0?195:240},userTableHeight:function(){return this.userdata.length>0?195:230}},watch:{tags:{handler:function(e,t){e&&(this.parmDialog.classifier?this.setIframeSelect(this.orgPersonTable,e):this.doSelection(this.orgPersonTable,e),this.dialogTags=[].concat(v()(e)))},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(e)},deep:!0}},mounted:function(){this.ownIsleave(this.orgPersonTable),this.dialogTags=[].concat(v()(this.tags))},methods:{selectCheckChange:function(e,t){t.type="User";if("true"===this.mutilselectCheck){var a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;r.type="User",r.UserAccount=r.UserAccount,r.Name=r.UserDisplayName}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}var c=this.getPersonAccount(this.orgPersonTable);this.dialogTags=this.dialogTags.filter(function(e){return-1==c.indexOf(e.UserAccount)});var h=!0,u=!1,g=void 0;try{for(var f,p=l()(e);!(h=(f=p.next()).done);h=!0){var m=f.value;this.dialogTags.push(d()({},m))}}catch(e){u=!0,g=e}finally{try{!h&&p.return&&p.return()}finally{if(u)throw g}}}else if(e.length>=1){var y=[].concat(v()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var _=!0,T=!1,C=void 0;try{for(var b,S=l()(y);!(_=(b=S.next()).done);_=!0){if("User"===b.value.type){var P=e.filter(function(e){return e.UserAccount!==t.UserAccount});this.$refs.employeeTable.toggleRowSelection(P[0],!1);var k=this.dialogTags.findIndex(function(e){return"User"===e.type});this.dialogTags.splice(k,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||this.dialogTags.push(t)}}catch(e){T=!0,C=e}finally{try{!_&&S.return&&S.return()}finally{if(T)throw C}}}else this.dialogTags.push(t)}else{this.$refs.employeeTable.toggleRowSelection(t,!1);var x=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(x,1)}this.$emit("choosePersonTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},handleSizeChange:function(e){var t=e;this.infoPage.pageIndex=1,this.infoPage.pageSize=parseInt(t),this.getPerson(this.searchKey,this.currentOrgId,this.LeaveDimission,1)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.getPerson(t.searchKey,t.currentOrgId,t.LeaveDimission,e),setTimeout(function(){t.doSelection(t.orgPersonTable,t.dialogTags),t.setIframeSelect(t.orgPersonTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$refs.employeeTable.toggleRowSelection(e,!0)})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.employeeTable.clearSelection()});var a=function(e){e.SysId?t.dialogTags=[]:t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.SysId})},i=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(i=(o=r.next()).done);i=!0){a(o.value)}}catch(e){s=!0,n=e}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}}else{var c=t.getPersonAccount(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="User",c.includes(p.UserAccount)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}var m=!0,v=!1,y=void 0;try{for(var _,T=l()(t.dialogTags);!(m=(_=T.next()).done);m=!0){var C=_.value;switch(C.type){case"User":C.UserAccount=C.UserAccount,C.Name=C.UserDisplayName}}}catch(e){v=!0,y=e}finally{try{!m&&T.return&&T.return()}finally{if(v)throw y}}t.$emit("choosePersonTag",t.dialogTags)},doSelection:function(e,t){var a=this;a.$nextTick(function(){t&&t.length>=1?("false"===a.mutilselectCheck&&a.$refs.employeeTable.clearSelection(),t.forEach(function(t){var i=e.findIndex(function(e){return e.UserAccount===t.UserAccount});i>-1?a.$nextTick(function(){a.$refs.employeeTable.toggleRowSelection(e[i],!0)}):a.$nextTick(function(){a.$refs.employeeTable.toggleRowSelection(e[i],!1)})})):0===t.length&&a.$nextTick(function(){a.$refs.employeeTable.clearSelection()})})},getPersonId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value.SysId;r&&t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},getPersonAccount:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value.UserAccount;r&&t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},onlyDelete:function(e){var t=this.getPersonAccount(this.orgPersonTable).findIndex(function(t){return t===e.UserAccount});this.$refs.employeeTable.toggleRowSelection(this.orgPersonTable[t],!1)},Collectchange:function(e){var t=this;if(e.IsCollect){a={IsCollect:!1,refUserId:e.SysId};t.$axios({url:t.userPickUrl.Base_User_URL+"/SetCollectPerson",method:"POST",data:a}).then(function(a){0===a.data.code?(t.$message.success("取消收藏"),e.IsCollect=!e.IsCollect):t.$message.success("取消收藏失败")}).catch(function(e){t.$message.error("数据获取失败!ERROR MESSAGE:"+e.message)})}else{if(!e.UserStatus)return void t.$message.error("此用户已离职，不能收藏！");var a={IsCollect:!0,refUserId:e.SysId};t.$axios({url:t.userPickUrl.Base_User_URL+"/SetCollectPerson",method:"POST",data:a}).then(function(a){0===a.data.code?(t.$message.success("收藏成功"),e.IsCollect=!e.IsCollect):t.$message.success("收藏失败")}).catch(function(e){t.$message.error("数据获取失败!ERROR MESSAGE:"+e.message)})}},handleSearch:function(){this.infoPage.pageIndex=1,this.searchKey=this.searchTxt,this.getPerson(this.searchKey,this.currentOrgId,this.LeaveDimission,this.infoPage.pageIndex)},ownIsleave:function(e){var t=!0,a=!1,i=void 0;try{for(var s,n=l()(e);!(t=(s=n.next()).done);t=!0){s.value.UserStatus?this.isLeave="cn"==this.getLangType()?"在职":"Incumbency":this.isLeave="cn"==this.getLangType()?"离职":"Quit"}}catch(e){a=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw i}}},getPerson:function(e,t,a,i){var s=this;""!==e&&e&&(t=""),null==e&&(s.searchKey="",s.infoPage.pageIndex=1),null==i&&(i=1);var n={page:i,limit:s.infoPage.pageSize,OrgId:t,orgList:s.parmDialog.orgList,key:e,isLeave:a};s.doRest(n,function(e){s.orgPersonTable=e.data,s.infoPage.total=e.count,s.ownIsleave(s.orgPersonTable),s.doSelection(s.orgPersonTable,s.dialogTags),s.setIframeSelect(s.orgPersonTable,s.dialogTags)},function(e){})},doRest:function(e,t){var a=this;a.loading=!0,a.$axios.post(a.userPickUrl.Base_User_URL+"/GetUserListByOrgId",e).then(function(e){200===e.status&&(t(e.data),a.loading=!1)}).catch(function(e){throw a.loading=!1,e})},httpService:function(e,t){var a=this;a.loading=!0,a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,e})},setIframeSelect:function(e,t){var a=this;a.$nextTick(function(){t&&t.length>=1?("false"===a.mutilselectCheck&&a.$refs.employeeTable.clearSelection(),t.forEach(function(t){var i=e.findIndex(function(e){return e.UserAccount===t.UserAccount});i>-1?a.$refs.employeeTable.toggleRowSelection(e[i],!0):a.$nextTick(function(){a.$refs.employeeTable.toggleRowSelection(e[i],!1)})})):0===t.length&&a.$nextTick(function(){a.$refs.employeeTable.clearSelection()})})},getLangType:function(){var e="cn";return null!=localStorage&&void 0!=localStorage.Lang&&(e=localStorage.Lang),e}}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("div",{staticClass:"choosePerson-data"},[a("div",{staticClass:"search-condition btn-linkage"},[a("el-row",[a("el-col",{staticClass:"serchCOL",attrs:{span:24}},[a("el-input",{staticClass:"searchText",attrs:{placeholder:e.$t("UserPicker.UserNumberAndName")},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.handleSearch},slot:"suffix"})])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"table-box"},[a("el-table",{ref:"employeeTable",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.orgPersonTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("UserPicker.User"),center:"",prop:"UserName","show-overflow-tooltip":"",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("UserPicker.Account"),prop:"LoginAccount","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("UserPicker.OrgName"),prop:"OrgName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("UserPicker.Status"),width:"70","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.isLeave))])]}}])}),e._v(" "),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:e.$t("UserPicker.Collection"),width:"50","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"icon iconfont",class:t.row.IsCollect?"icon-noCollect-icon":"icon-collect-icon-copy",staticStyle:{"font-size":"16px"},attrs:{title:t.row.IsCollect?e.$t("UserPicker.HaveCollection"):e.$t("UserPicker.NoCollection")},on:{click:function(a){a.stopPropagation(),e.Collectchange(t.row)}}})]}}])})],1)],1)])],1)])],1)])]),e._v(" "),a("div",{staticClass:"table-foot"},[a("div",{staticClass:"page-sizes-box"},[a("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,"pager-count":4,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var C={name:"ChoosepersonNew",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",currentOrgId:"",code:""}},components:{OrganizationTree:p,choosentable:a(47)(_,T,!1,function(e){a(694)},"data-v-1353c51c",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.employeeTable.getPerson()})},methods:{handleClick:function(e,t){this.currentOrgId=e.id,this.$refs.employeeTable.getPerson(null,e.id,null,1)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},choosePersonTag:function(e){this.$emit("empSelectTags",e)}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("el-col",{staticClass:"treeWidth",attrs:{span:8}},[a("div",{staticClass:"tree-container"},[a("organization-tree",{ref:"tree",attrs:{parmDialog:e.parmDialog,usertype:"true"},on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),a("el-col",{attrs:{span:16}},[a("choosentable",{ref:"employeeTable",staticClass:"choosePersonTable",attrs:{tags:e.tags,type:e.type,mutilselectCheck:e.mutilselectCheck,parmDialog:e.parmDialog,currentOrgId:e.currentOrgId,deleteTags:e.deleteTags},on:{choosePersonTag:e.choosePersonTag}})],1)],1)],1)])])},staticRenderFns:[]};var S=a(47)(C,b,!1,function(e){a(693)},"data-v-68712fc3",null).exports,P={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",currentRow:null,usertags:[],isActive:!1,searchTxt:"",searchKey:"",orgTable:[],newisEmptyApplicant:!1,multipleOrgTable:[],dialogTags:[],userPickUrl:u.baseUrl}},components:{page:y.a},props:{chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:function(){return[]}},type:{type:String,default:""},orgTreeID:{type:String,default:""},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}}},computed:{personTableHeight:function(){if(this.orgTable)return this.orgTable.length>0?185:230}},watch:{tags:{handler:function(e,t){e&&(this.mutilselectCheck?this.setIframeSelect(this.orgTable,e):this.doSelection(this.orgTable,e),this.dialogTags=this.tags)},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(this.orgTable,e)},deep:!0}},mounted:function(){this.dialogTags=this.tags},methods:{selectCheckChange:function(e,t){t.type="Org";if("true"===this.mutilselectCheck){if(e.length>=1){var a=!0,i=!1,n=void 0;try{for(var r,c=l()(e);!(a=(r=c.next()).done);a=!0){var h=r.value;h.type="Org",h.UserDisplayName=h.Name,h.UserAccount=h.SysId}}catch(e){i=!0,n=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw n}}}else this.$refs.multipleOrgTable.toggleRowSelection(t,!1);var u=this.getPersonId(this.orgTable);this.dialogTags=this.dialogTags.filter(function(e){return-1==u.indexOf(e.SysId)});var g=this.getPersonId(this.dialogTags),f=!0,p=!1,m=void 0;try{for(var y,_=l()(e);!(f=(y=_.next()).done);f=!0){var T=y.value;-1==g.indexOf(T.SysId)&&this.dialogTags.push(d()({},T))}}catch(e){p=!0,m=e}finally{try{!f&&_.return&&_.return()}finally{if(p)throw m}}}else if(e.length>=1){var C=[].concat(v()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var b=!0,S=!1,P=void 0;try{for(var k,x=l()(C);!(b=(k=x.next()).done);b=!0){if("Org"===k.value.type){var w=e.filter(function(e){return e.SysId!==t.SysId});this.$refs.multipleOrgTable.toggleRowSelection(w[0],!1);var I=this.dialogTags.findIndex(function(e){return"Org"===e.type});this.dialogTags.splice(I,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||(this.dialogTags.push(t),this.dialogTags=o()(new s.a(this.dialogTags)))}}catch(e){S=!0,P=e}finally{try{!b&&x.return&&x.return()}finally{if(S)throw P}}}else this.dialogTags.push(t)}else{this.$refs.multipleOrgTable.toggleRowSelection(t,!1);var D=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(D,1)}var O=!0,$=!1,U=void 0;try{for(var N,R=l()(e);!(O=(N=R.next()).done);O=!0){var E=N.value;"Org"===E.type&&(E.UserDisplayName=E.Name,E.UserAccount=E.SysId)}}catch(e){$=!0,U=e}finally{try{!O&&R.return&&R.return()}finally{if($)throw U}}this.$emit("chooseOrgTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},handleSizeChange:function(e){var t=this,a=e;t.infoPage.pageSize=parseInt(a),t.searchKey?t.getOrgSearch(t.searchKey,1):t.getOrg(_this.orgTreeID,1),setTimeout(function(){t.doSelection(t.orgTable,t.dialogTags)},500)},handleCurrentChange:function(e){var t=this;t.searchKey?t.getOrgSearch(t.searchKey,e):t.getOrg(t.orgTreeID,e),setTimeout(function(){t.doSelection(t.orgTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$nextTick(function(){t.$refs.multipleOrgTable.toggleRowSelection(e,!0)})})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.multipleOrgTable.clearSelection()});var a=t.getPersonId(t.orgTable),i=function(i){-1===a.indexOf(i.SysId)?t.dialogTags=[].concat(v()(e)):t.dialogTags=t.dialogTags.filter(function(e){return e.SysId!==i.SysId})},s=!0,n=!1,o=void 0;try{for(var r,c=l()(e);!(s=(r=c.next()).done);s=!0){i(r.value)}}catch(e){n=!0,o=e}finally{try{!s&&c.return&&c.return()}finally{if(n)throw o}}}else{var d=t.getPersonId(t.dialogTags),h=!0,u=!1,g=void 0;try{for(var f,p=l()(e);!(h=(f=p.next()).done);h=!0){var m=f.value;m.type="Org",m.UserAccount=m.SysId,d.includes(m.SysId)||t.dialogTags.push(m)}}catch(e){u=!0,g=e}finally{try{!h&&p.return&&p.return()}finally{if(u)throw g}}}var y=!0,_=!1,T=void 0;try{for(var C,b=l()(t.dialogTags);!(y=(C=b.next()).done);y=!0){var S=C.value;switch(S.type){case"Org":S.UserDisplayName=S.Name}}}catch(e){_=!0,T=e}finally{try{!y&&b.return&&b.return()}finally{if(_)throw T}}t.$emit("chooseOrgTag",t.dialogTags)},doSelection:function(e,t){var a=this,i=this;t&&t.length>=1?t.forEach(function(t){var a=e.findIndex(function(e){return e.SysId===t.SysId});a>-1?i.$nextTick(function(){i.$refs.multipleOrgTable.toggleRowSelection(e[a],!0)}):i.$nextTick(function(){i.$refs.multipleOrgTable.toggleRowSelection(e[a],!1)})}):0===t.length&&i.$nextTick(function(){a.$refs.multipleOrgTable.clearSelection()})},getPersonId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value.SysId;r&&t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},onlyDelete:function(e,t){var a=this.getPersonId(e).indexOf(t.SysId);this.$refs.multipleOrgTable.toggleRowSelection(e[a],!1)},handleSearch:function(){this.orgTreeID="",""!==this.searchTxt?(this.searchKey=this.searchTxt,this.getOrgSearch(this.searchKey,1)):this.$message.error("请输入岗位信息")},getOrg:function(e,t){var a=this;a.searchKey="",a.infoPage.pageIndex=t;var i={page:a.infoPage.pageIndex,limit:a.infoPage.pageSize,OrgID:e,orgList:a.parmDialog.orgList};a.doRest(i,function(e){a.orgTable=e.data,a.infoPage.total=e.count,a.doSelection(a.orgTable,a.dialogTags),a.setIframeSelect(a.orgTable,a.dialogTags)},function(e){})},doRest:function(e,t){var a=this;a.loading=!0,a.$axios.post(a.userPickUrl.Base_User_URL+"/GetOrgListByOrgId",e).then(function(e){200===e.status&&(t(e.data),a.loading=!1)}).catch(function(e){throw a.loading=!1,e})},httpService:function(e,t){var a=this;a.loading=!0,a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,e})},getOrgSearch:function(e,t){var a=this;a.infoPage.pageIndex=t;var i={page:a.infoPage.pageIndex,limit:a.infoPage.pageSize,OrgID:"",orgList:a.parmDialog.orgList,key:e};a.$axios.post(a.userPickUrl.Base_User_URL+"/GetOrgListByKey",i).then(function(e){a.orgTable=e.data.data,a.infoPage.total=e.data.count,a.doSelection(a.orgTable,a.dialogTags)}).catch(function(e){})},setIframeSelect:function(e,t){var a=this;a.$nextTick(function(){t&&t.length>=1?t.forEach(function(t){var i=e.findIndex(function(e){return e.SysId===t.SysId});i>-1?a.$refs.multipleOrgTable.toggleRowSelection(e[i],!0):a.$nextTick(function(){a.$refs.multipleOrgTable.toggleRowSelection(e[i],!1)})}):0===t.length&&a.$nextTick(function(){a.$refs.multipleOrgTable.clearSelection()})})}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("div",{staticClass:"choosePerson-data"},[a("div",{staticClass:"search-condition btn-linkage"},[a("el-row",[a("el-col",{staticClass:"serchCOL",attrs:{span:24}},[a("el-input",{staticClass:"searchText",attrs:{placeholder:e.$t("UserPicker.OrganizationName"),clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),a("div",{staticClass:"searchline"},[a("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v(e._s(e.$t("UserPicker.Search"))+"\n                    ")])],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"table-box"},[a("el-table",{ref:"multipleOrgTable",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.orgTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{staticClass:"clcsWidth",attrs:{label:e.$t("UserPicker.Organization"),center:"",prop:"Name","show-overflow-tooltip":""}})],1)],1)])],1)])],1)])]),e._v(" "),a("div",{staticClass:"table-foot"},[a("div",{staticClass:"page-sizes-box"},[a("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var x={name:"chooseOrg",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",currentSelectOrganizationId:"",isActive:!1,code:"",LeaveDimission:!1,orgTreeID:""}},components:{OrganizationTree:p,orgTable:a(47)(P,k,!1,function(e){a(696)},"data-v-1bdc9411",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){},methods:{handleClick:function(e,t){this.orgTreeID=e.id,this.$refs.orgTable.getOrg(e.id,1)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},chooseOrgTag:function(e){this.$emit("empSelectTags",e)}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("el-col",{staticClass:"treeWidth",attrs:{span:10}},[a("div",{staticClass:"tree-container"},[a("organization-tree",{ref:"tree",attrs:{parmDialog:e.parmDialog},on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),a("el-col",{attrs:{span:14}},[a("org-table",{ref:"orgTable",staticClass:"choosePersonTable",attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,parmDialog:e.parmDialog,orgTreeID:e.orgTreeID,deleteTags:e.deleteTags},on:{chooseOrgTag:e.chooseOrgTag}})],1)],1)],1)])])},staticRenderFns:[]};var I=a(47)(x,w,!1,function(e){a(695)},"data-v-39cc5c5a",null).exports,D={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",currentRow:null,usertags:[],isActive:!1,searchTxt:"",positionTable:[],newisEmptyApplicant:!1,multiplePositionTable:[],userPickUrl:u.baseUrl}},components:{page:y.a},props:{chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:function(){return[]}},type:{type:String,default:""},orgTreeID:{type:String,default:""},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}}},computed:{personTableHeight:function(){return this.positionTable.length>0?185:230}},watch:{tags:{handler:function(e,t){e&&(this.mutilselectCheck?this.setIframeSelect(this.positionTable,e):this.doSelection(this.positionTable,e),this.dialogTags=this.tags)},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(this.positionTable,e)},deep:!0}},mounted:function(){this.dialogTags=this.tags},methods:{selectCheckChange:function(e,t){t.type="Position";if("true"===this.mutilselectCheck){if(e.length>=1){var a=!0,i=!1,n=void 0;try{for(var r,c=l()(e);!(a=(r=c.next()).done);a=!0){var h=r.value;h.type="Position",h.UserDisplayName=h.Name,h.UserAccount=h.SysId}}catch(e){i=!0,n=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw n}}}else this.$refs.multiplePositionTable.toggleRowSelection(t,!1);var u=this.getPersonId(this.positionTable);if(console.log(this.dialogTags,this.tags),this.dialogTags){this.dialogTags=this.dialogTags.filter(function(e){return-1==u.indexOf(e.SysId+e.OrganizationPositionMapSysId)});var g=this.getPersonId(this.dialogTags),f=!0,p=!1,m=void 0;try{for(var y,_=l()(e);!(f=(y=_.next()).done);f=!0){var T=y.value;-1==g.indexOf(T.SysId+T.OrganizationPositionMapSysId)&&this.dialogTags.push(d()({},T))}}catch(e){p=!0,m=e}finally{try{!f&&_.return&&_.return()}finally{if(p)throw m}}}}else if(e.length>=1){var C=[].concat(v()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var b=!0,S=!1,P=void 0;try{for(var k,x=l()(C);!(b=(k=x.next()).done);b=!0){if("Position"===k.value.type){var w=e.filter(function(e){return e.SysId!==t.SysId&&e.OrganizationPositionMapSysId!==t.OrganizationPositionMapSysId});this.$refs.multiplePositionTable.toggleRowSelection(w[0],!1);var I=this.dialogTags.findIndex(function(e){return"Position"===e.type});this.dialogTags.splice(I,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||(this.dialogTags.push(t),this.dialogTags=o()(new s.a(this.dialogTags)))}}catch(e){S=!0,P=e}finally{try{!b&&x.return&&x.return()}finally{if(S)throw P}}}else this.dialogTags.push(t)}else{this.$refs.multiplePositionTable.toggleRowSelection(t,!1);var D=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(D,1)}var O=!0,$=!1,U=void 0;try{for(var N,R=l()(this.dialogTags);!(O=(N=R.next()).done);O=!0){var E=N.value;"Position"===E.type&&(E.UserDisplayName=E.Name,E.UserAccount=E.SysId)}}catch(e){$=!0,U=e}finally{try{!O&&R.return&&R.return()}finally{if($)throw U}}this.$emit("chooseOrgTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},handleSizeChange:function(e){var t=this,a=e;t.infoPage.pageIndex=1,t.infoPage.pageSize=parseInt(a),_this.searchTxt?_this.handleSearch():_this.getPosition(_this.orgTreeID),setTimeout(function(){t.doSelection(t.positionTable,t.dialogTags),_this.setIframeSelect(_this.positionTable,_this.dialogTags)},500)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getPosition(t.orgTreeID),setTimeout(function(){t.doSelection(t.positionTable,t.dialogTags),t.setIframeSelect(t.positionTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$nextTick(function(){t.$refs.multiplePositionTable.toggleRowSelection(e,!0)})})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.multiplePositionTable.clearSelection()});var a=function(e){t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.SysId})},i=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(i=(o=r.next()).done);i=!0){a(o.value)}}catch(e){s=!0,n=e}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}t.dialogTags.splice(0,t.dialogTags.length)}else{var c=t.getPersonId(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="Position",p.UserDisplayName=p.Name,p.UserAccount=p.SysId,c.includes(p.SysId+p.OrganizationPositionMapSysId)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}t.$emit("chooseOrgTag",t.dialogTags)},doSelection:function(e,t){var a=this,i=this;t&&t.length>=1?t.forEach(function(t){var a=e.findIndex(function(e){return e.SysId===t.SysId});a>-1?i.$nextTick(function(){i.$refs.multiplePositionTable.toggleRowSelection(e[a],!0)}):i.$nextTick(function(){i.$refs.multiplePositionTable.toggleRowSelection(e[a],!1)})}):t&&0===t.length&&i.$nextTick(function(){a.$refs.multiplePositionTable.clearSelection()})},getPersonId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value,c=r.SysId+r.OrganizationPositionMapSysId;c&&t.push(c)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},onlyDelete:function(e,t){var a=this.getPersonId(e).indexOf(t.SysId+t.OrganizationPositionMapSysId);this.$refs.multiplePositionTable.toggleRowSelection(e[a],!1)},handleSearch:function(){""!==this.searchTxt?this.getOrgSearch(this.orgTreeID,this.searchTxt):this.$message.error("请输入岗位信息")},getPosition:function(e){var t=this,a={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,OrgID:e,type:"C",orgList:t.parmDialog.orgList};t.doRest(a,function(e){t.positionTable=e.data,t.infoPage.total=e.count,t.doSelection(t.positionTable,t.dialogTags),t.setIframeSelect(t.positionTable,t.dialogTags)},function(e){})},doRest:function(e,t){var a=this;a.loading=!0,a.$axios.post(a.userPickUrl.Base_User_URL+"/GetPositionList",e).then(function(e){200===e.status&&(t(e.data),a.loading=!1)}).catch(function(e){throw a.loading=!1,e})},httpService:function(e,t){var a=this;a.loading=!0,a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,e})},getOrgSearch:function(e,t){var a=this,i={page:a.infoPage.pageIndex,limit:a.infoPage.pageSize,OrgID:"",type:"C",orgList:a.parmDialog.orgList,key:t};a.$axios.post(a.userPickUrl.Base_User_URL+"/GetPositionList",i).then(function(e){a.positionTable=e.data.data,a.infoPage.total=e.data.count,a.doSelection(a.positionTable,a.dialogTags)}).catch(function(e){})},setIframeSelect:function(e,t){var a=this;a.$nextTick(function(){t&&t.length>=1?t.forEach(function(t){var i=e.findIndex(function(e){return e.SysId===t.SysId&&e.OrganizationPositionMapSysId===t.OrganizationPositionMapSysId});i>-1?a.$refs.multiplePositionTable.toggleRowSelection(e[i],!0):a.$nextTick(function(){a.$refs.multiplePositionTable.toggleRowSelection(e[i],!1)})}):0===t.length&&a.$nextTick(function(){a.$refs.multiplePositionTable.clearSelection()})})}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("div",{staticClass:"choosePerson-data"},[a("div",{staticClass:"search-condition btn-linkage"},[a("el-row",[a("el-col",{staticClass:"serchCOL",attrs:{span:24}},[a("el-input",{staticClass:"searchText",attrs:{placeholder:"岗位名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),a("div",{staticClass:"searchline"},[a("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n                    ")])],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"table-box"},[a("el-table",{ref:"multiplePositionTable",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.positionTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"岗位名称",center:"",prop:"Name","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"职级",center:"",prop:"RankName",width:"100px","show-overflow-tooltip":""}})],1)],1)])],1)])],1)])]),e._v(" "),a("div",{staticClass:"table-foot"},[a("div",{staticClass:"page-sizes-box"},[a("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var $={name:"chooseOrg",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",currentSelectOrganizationId:"",isActive:!1,code:"",LeaveDimission:!1,orgTreeID:""}},components:{OrganizationTree:p,positionTable:a(47)(D,O,!1,function(e){a(698)},"data-v-3eca9215",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){},methods:{handleClick:function(e,t){this.orgTreeID=e.id,this.$refs.positionTable.getPosition(e.id)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},chooseOrgTag:function(e){this.$emit("empSelectTags",e)}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("el-col",{staticClass:"treeWidth",attrs:{span:10}},[a("div",{staticClass:"tree-container"},[a("organization-tree",{ref:"tree",attrs:{parmDialog:e.parmDialog},on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),a("el-col",{attrs:{span:14}},[a("positionTable",{ref:"positionTable",staticClass:"choosePersonTable",attrs:{mutilselectCheck:e.mutilselectCheck,tags:e.tags,orgTreeID:e.orgTreeID,parmDialog:e.parmDialog,deleteTags:e.deleteTags},on:{chooseOrgTag:e.chooseOrgTag}})],1)],1)],1)])])},staticRenderFns:[]};var N=a(47)($,U,!1,function(e){a(697)},"data-v-147e4d0c",null).exports,R={name:"positionVsTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",currentRow:null,usertags:[],isActive:!1,searchTxt:"",vpositionTable:[],newisEmptyApplicant:!1,multipleVsPositionTable:[],userPickUrl:u.baseUrl}},components:{page:y.a},props:{chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:function(){return[]}},type:{type:String,default:""},orgTreeID:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.vpositionTable.length>0?185:230}},watch:{tags:{handler:function(e,t){e&&this.doSelection(this.vpositionTable,e),this.dialogTags=this.tags},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(this.vpositionTable,e)},deep:!0}},mounted:function(){this.dialogTags=this.tags},methods:{selectCheckChange:function(e,t){t.type="InventedPosition";if("true"===this.mutilselectCheck){if(e.length>=1){var a=!0,i=!1,n=void 0;try{for(var r,c=l()(e);!(a=(r=c.next()).done);a=!0){var h=r.value;h.type="InventedPosition",h.UserDisplayName=h.Name,h.UserAccount=h.SysId}}catch(e){i=!0,n=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw n}}}else this.$refs.multipleVsPositionTable.toggleRowSelection(t,!1);var u=this.getPersonId(this.vpositionTable);if(this.dialogTags){this.dialogTags=this.dialogTags.filter(function(e){return-1==u.indexOf(e.SysId)});var g=this.getPersonId(this.dialogTags),f=!0,p=!1,m=void 0;try{for(var y,_=l()(e);!(f=(y=_.next()).done);f=!0){var T=y.value;-1==g.indexOf(T.SysId)&&this.dialogTags.push(d()({},T))}}catch(e){p=!0,m=e}finally{try{!f&&_.return&&_.return()}finally{if(p)throw m}}}}else if(e.length>=1){var C=[].concat(v()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var b=!0,S=!1,P=void 0;try{for(var k,x=l()(C);!(b=(k=x.next()).done);b=!0){if("InventedPosition"===k.value.type){var w=e.filter(function(e){return e.SysId!==t.SysId});this.$refs.multipleVsPositionTable.toggleRowSelection(w[0],!1);var I=this.dialogTags.findIndex(function(e){return"InventedPosition"===e.type});this.dialogTags.splice(I,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||(this.dialogTags.push(t),this.dialogTags=o()(new s.a(this.dialogTags)))}}catch(e){S=!0,P=e}finally{try{!b&&x.return&&x.return()}finally{if(S)throw P}}}else this.dialogTags.push(t)}else{this.$refs.multipleVsPositionTable.toggleRowSelection(t,!1);var D=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(D,1)}var O=!0,$=!1,U=void 0;try{for(var N,R=l()(this.dialogTags);!(O=(N=R.next()).done);O=!0){var E=N.value;"InventedPosition"===E.type&&(E.UserDisplayName=E.Name,E.UserAccount=E.SysId)}}catch(e){$=!0,U=e}finally{try{!O&&R.return&&R.return()}finally{if($)throw U}}this.$emit("chooseOrgTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},handleSizeChange:function(e){var t=this,a=e;t.infoPage.pageIndex=1,t.infoPage.pageSize=parseInt(a),t.searchTxt?t.handleSearch():t.getVsPosition(t.orgTreeID),setTimeout(function(){t.doSelection(t.vpositionTable,t.tags)},500)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getVsPosition(t.orgTreeID),setTimeout(function(){t.doSelection(t.vpositionTable,t.tags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$nextTick(function(){t.$refs.multipleVsPositionTable.toggleRowSelection(e,!0)})})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.multipleVsPositionTable.clearSelection()});var a=function(e){t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.SysId})},i=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(i=(o=r.next()).done);i=!0){a(o.value)}}catch(e){s=!0,n=e}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}}else{var c=t.getPersonId(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="InventedPosition",p.UserDisplayName=p.Name,p.UserAccount=p.SysId,c.includes(p.SysId)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}t.$emit("chooseOrgTag",t.dialogTags)},doSelection:function(e,t){var a=this,i=this;t&&t.length>=1?t.forEach(function(t){var a=e.findIndex(function(e){return e.SysId===t.SysId});a>-1?i.$nextTick(function(){i.$refs.multipleVsPositionTable.toggleRowSelection(e[a],!0)}):i.$nextTick(function(){i.$refs.multipleVsPositionTable.toggleRowSelection(e[a],!1)})}):0===t.length&&i.$nextTick(function(){a.$refs.multipleVsPositionTable.clearSelection()})},getPersonId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value.SysId;r&&t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},onlyDelete:function(e,t){var a=this.getPersonId(e).indexOf(t.SysId);this.$refs.multipleVsPositionTable.toggleRowSelection(e[a],!1)},handleSearch:function(){""!==this.searchTxt?this.getOrgSearch(this.orgTreeID,this.searchTxt):this.$message.error("请输入岗位信息")},getVsPosition:function(e){var t=this,a={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,OrgID:e,type:"V"};t.doRest(a,function(e){t.vpositionTable=e.data,t.infoPage.total=e.count,t.doSelection(t.vpositionTable,t.tags)},function(e){})},doRest:function(e,t){var a=this;a.loading=!0,a.$axios.post(a.userPickUrl.Base_User_URL+"/GetPositionList",e).then(function(e){200===e.status&&(t(e.data),a.loading=!1)}).catch(function(e){throw a.loading=!1,e})},httpService:function(e,t){var a=this;a.loading=!0,a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,e})},getOrgSearch:function(e,t){var a=this,i={page:a.infoPage.pageIndex,limit:a.infoPage.pageSize,OrgID:"",type:"V",key:t};a.$axios.post(a.userPickUrl.Base_User_URL+"/GetPositionList",i).then(function(e){a.vpositionTable=e.data.data,a.infoPage.total=e.data.count,a.doSelection(a.vpositionTable,a.tags)}).catch(function(e){})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("div",{staticClass:"choosePerson-data"},[a("div",{staticClass:"search-condition btn-linkage"},[a("el-row",[a("el-col",{staticClass:"serchCOL",attrs:{span:24}},[a("el-input",{staticClass:"searchText",attrs:{placeholder:"虚拟岗位名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),a("div",{staticClass:"searchline"},[a("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n                    ")])],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"table-box"},[a("el-table",{ref:"multipleVsPositionTable",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.vpositionTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"虚拟岗位",center:"",prop:"Name","show-overflow-tooltip":""}})],1)],1)])],1)])],1)])]),e._v(" "),a("div",{staticClass:"table-foot"},[a("div",{staticClass:"page-sizes-box"},[a("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var L={name:"chooseOrg",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",currentSelectOrganizationId:"",isActive:!1,code:"",LeaveDimission:!1,orgTreeID:""}},components:{OrganizationTree:p,positionVsTable:a(47)(R,E,!1,function(e){a(700)},"data-v-75e6243e",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){},methods:{handleClick:function(e,t){this.orgTreeID=e.id,this.$refs.VspositionTable.getVsPosition(e.id)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},chooseOrgTag:function(e){this.$emit("empSelectTags",e)}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("el-col",{staticClass:"treeWidth",attrs:{span:10}},[a("div",{staticClass:"tree-container"},[a("organization-tree",{ref:"tree",on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),a("el-col",{attrs:{span:14}},[a("positionVsTable",{ref:"VspositionTable",staticClass:"choosePersonTable",attrs:{tags:e.tags,orgTreeID:e.orgTreeID,deleteTags:e.deleteTags,mutilselectCheck:e.mutilselectCheck},on:{chooseOrgTag:e.chooseOrgTag}})],1)],1)],1)])])},staticRenderFns:[]};var z=a(47)(L,A,!1,function(e){a(699)},"data-v-7e460a16",null).exports,M={name:"systemRoleTree",props:{nodKey:{type:String,default:"id",require:!1},highlightCurrent:{require:!1,type:Boolean,default:!0},checkOnClickNode:{type:Boolean,require:!1,default:!0},expandOnClickNode:{type:Boolean,require:!1,default:!0},renderexpand:{type:Boolean,require:!1,default:!0},autoExpandParent:{type:Boolean,require:!1,default:!0},depthIdPath:{type:Boolean,require:!1,default:!1},isMountedGetData:{type:Boolean,require:!1,default:!0},defaultRootNode:{type:Object,require:!1,default:null},defaultPropLabel:{type:String,require:!1,default:"displayName"},defaultSort:{type:String,require:!1,default:"orderIndex"}},data:function(){return{organizationList:[],defaultProps:{label:"title",children:"children",isLeaf:"isLast"},loading:!1,currentNode:null,isFristLoadTree:!0,userPickUrl:u.baseUrl}},created:function(e){this.debouncedSearchTree=Object(h.debounce)(this.getTreeList,null)},mounted:function(){this.isMountedGetData&&this.debouncedSearchTree(null)},methods:{loadNodeData:function(e,t){return 0===e.level?void(this.isFristLoadTree=!1):void this.debouncedSearchTree(e,t)},getTreeList:function(e,t){var a=this;if(null===e)var i=null;else if(!e.data.isLast)i={ParentID:e.data.id,context:e.data.title};var s={url:"/System/UserPick/GetSystemRoleCategoryByParent",method:"post",data:i};a.httpService(s,function(e){if(e.data&&200===e.status)if(e.data.data&&e.data.data.length>0){var i=e.data.data;t?t(i):a.organizationList=i}else t&&t([]);a.$emit("closeLoadding")})},nodeClick:function(e,t,a){this.currentNode=t,this.$emit("node-click",e,t,a)},currentChange:function(e,t){this.$emit("current-change",e,t)},checkChange:function(e,t,a){this.$emit("check-change",e,t,a)},check:function(e,t){this.$emit("check",e,t)},setChecked:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;i.$refs.systemRoleTree&&i.$nextTick(function(){i.$refs.systemRoleTree.setChecked(e,t,a)})},setCurrentKey:function(e){var t=this;t.$nextTick(function(){if(e&&t.$refs.systemRoleTree){t.$refs.systemRoleTree.setCurrentKey(e);var a=t.$refs.systemRoleTree.getNode(e);a&&t.$emit("node-click",a.data,a,t.$refs.systemRoleTree.$el)}})},setCheckedKeys:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$nextTick(function(){t.$refs.systemRoleTree.setCheckedKeys(e,a)})},getNode:function(e){return this.$refs.systemRoleTree.getNode(e)},getCheckedNodes:function(){return this.$refs.systemRoleTree.getCheckedNodes()},toTree:function(e){if(null==e||0==e.length)return[];var t=[],a={};return e.forEach(function(e){delete e.children}),e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentId];i?(i.children||(i.children=[])).push(e):t.push(e)}),t},httpService:function(e,t){var a=this;a.loading=!0,a.$emit("openLoadding"),a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,a.$emit("closeLoadding"),e})},getSecode:function(e){e={ParentID:e.data.id,parentId:-1,context:e.data.title,isLeaf:e.data.isLast,level:e.level,spread:!1};var t={url:this.userPickUrl.Base_User_URL+"/GetChildOrgTree",method:"post",data:e};e.isLast||this.$axios(t).then(function(e){})}},computed:{personTableHeight:function(){return this.organizationList.length>0?185:223}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tree",{ref:"systemRoleTree",attrs:{"node-key":e.nodKey,props:e.defaultProps,data:e.organizationList,"highlight-current":e.highlightCurrent,"check-on-click-node":e.checkOnClickNode,"expand-on-click-node":e.expandOnClickNode,"auto-expand-parent":e.autoExpandParent,load:e.loadNodeData,loading:e.loading,height:e.personTableHeight,lazy:""},on:{"node-click":e.nodeClick,"current-change":e.currentChange,"check-change":e.checkChange,check:e.check}})],1)},staticRenderFns:[]},K=a(47)(M,B,!1,null,null,null).exports,j={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",currentRow:null,usertags:[],isActive:!1,searchTxt:"",systemRoleTable:[],newisEmptyApplicant:!1,multipleSys:[],dialogTags:[],userPickUrl:u.baseUrl}},components:{page:y.a},props:{chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:function(){return[]}},type:{type:String,default:""},orgTreeID:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.systemRoleTable.length>0?185:230}},watch:{tags:{handler:function(e,t){e&&this.doSelection(this.systemRoleTable,e),this.dialogTags=this.tags},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(this.systemRoleTable,e)},deep:!0}},mounted:function(){this.dialogTags=this.tags},methods:{selectCheckChange:function(e,t){t.type="SystemRole";if("true"===this.mutilselectCheck){if(e.length>=1){var a=!0,i=!1,n=void 0;try{for(var r,c=l()(e);!(a=(r=c.next()).done);a=!0){var h=r.value;h.type="SystemRole",h.UserDisplayName=h.DisplayName,h.UserAccount=h.Id}}catch(e){i=!0,n=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw n}}}else this.$refs.multipleSys.toggleRowSelection(t,!1);var u=this.getPersonId(this.systemRoleTable);if(this.dialogTags){this.dialogTags=this.dialogTags.filter(function(e){return-1==u.indexOf(e.Id)});var g=this.getPersonId(this.dialogTags),f=!0,p=!1,m=void 0;try{for(var y,_=l()(e);!(f=(y=_.next()).done);f=!0){var T=y.value;-1==g.indexOf(T.Id)&&this.dialogTags.push(d()({},T))}}catch(e){p=!0,m=e}finally{try{!f&&_.return&&_.return()}finally{if(p)throw m}}}}else if(e.length>=1){var C=[].concat(v()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var b=!0,S=!1,P=void 0;try{for(var k,x=l()(C);!(b=(k=x.next()).done);b=!0){if("SystemRole"===k.value.type){var w=e.filter(function(e){return e.Id!==t.Id});this.$refs.multipleSys.toggleRowSelection(w[0],!1);var I=this.dialogTags.findIndex(function(e){return"SystemRole"===e.type});this.dialogTags.splice(I,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||(this.dialogTags.push(t),this.dialogTags=o()(new s.a(this.dialogTags)))}}catch(e){S=!0,P=e}finally{try{!b&&x.return&&x.return()}finally{if(S)throw P}}}else this.dialogTags.push(t)}else{this.$refs.multipleSys.toggleRowSelection(t,!1);var D=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(D,1)}var O=!0,$=!1,U=void 0;try{for(var N,R=l()(this.dialogTags);!(O=(N=R.next()).done);O=!0){var E=N.value;"SystemRole"===E.type&&(E.UserDisplayName=E.DisplayName,E.UserAccount=E.Id)}}catch(e){$=!0,U=e}finally{try{!O&&R.return&&R.return()}finally{if($)throw U}}this.$emit("chooseOrgTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},handleSizeChange:function(e){var t=this,a=e;t.infoPage.pageIndex=1,t.infoPage.pageSize=parseInt(a),_this.searchTxt?t.handleSearch():t.getOrg(t.orgTreeID),setTimeout(function(){t.doSelection(t.systemRoleTable,t.dialogTags)},500)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getOrg(t.orgTreeID),setTimeout(function(){t.doSelection(t.systemRoleTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$nextTick(function(){t.$refs.multipleSys.toggleRowSelection(e,!0)})})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.multipleSys.clearSelection()});var a=function(e){t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.id})},i=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(i=(o=r.next()).done);i=!0){a(o.value)}}catch(e){s=!0,n=e}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}}else{var c=t.getPersonId(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="SystemRole",p.UserDisplayName=p.DisplayName,p.UserAccount=p.Id,c.includes(p.Id)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}t.$emit("chooseOrgTag",t.dialogTags)},doSelection:function(e,t){var a=this,i=this;t&&t.length>=1?t.forEach(function(t){var a=e.findIndex(function(e){return e.Id===t.SysId});a>-1?i.$nextTick(function(){i.$refs.multipleSys.toggleRowSelection(e[a],!0)}):i.$nextTick(function(){i.$refs.multipleSys.toggleRowSelection(e[a],!1)})}):0===t.length&&i.$nextTick(function(){a.$refs.multipleSys.clearSelection()})},getPersonId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value.Id;r&&t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},onlyDelete:function(e,t){var a=this.getPersonId(e).indexOf(t.SysId);this.$refs.multipleSys.toggleRowSelection(e[a],!1)},handleSearch:function(){""!==this.searchTxt?this.getOrgSearch(this.searchTxt):this.$message.error("请输入系统角色信息")},getSystemRole:function(e){var t=this,a={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,CategoryId:e};t.doRest(a,function(e){t.systemRoleTable=e.data,t.infoPage.total=e.count,t.doSelection(t.systemRoleTable,t.dialogTags)},function(e){})},doRest:function(e,t){var a=this;a.loading=!0,a.$axios.post(a.userPickUrl.Base_User_URL+"/GetSystemRoleByType",e).then(function(e){200===e.status&&(t(e.data),a.loading=!1)}).catch(function(e){throw a.loading=!1,e})},httpService:function(e,t){var a=this;a.loading=!0,a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,e})},getOrgSearch:function(e){var t=this,a={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,key:e};t.$axios.post(t.userPickUrl.Base_User_URL+"/GetSystemRoleListByKey",a).then(function(e){t.systemRoleTable=e.data.data,t.infoPage.total=e.count,t.doSelection(t.systemRoleTable,t.dialogTags)}).catch(function(e){})}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("div",{staticClass:"choosePerson-data"},[a("div",{staticClass:"search-condition btn-linkage"},[a("el-row",[a("el-col",{staticClass:"serchCOL",attrs:{span:24}},[a("el-input",{staticClass:"searchText",attrs:{placeholder:"系统角色名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),a("div",{staticClass:"searchline"},[a("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n                    ")])],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"table-box"},[a("el-table",{ref:"multipleSys",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.systemRoleTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{staticClass:"clcsWidth",attrs:{label:"角色名称",center:"",prop:"DisplayName","show-overflow-tooltip":""}})],1)],1)])],1)])],1)])]),e._v(" "),a("div",{staticClass:"table-foot"},[a("div",{staticClass:"page-sizes-box"},[a("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var F={name:"chooseOrg",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",currentSelectOrganizationId:"",isActive:!1,code:"",LeaveDimission:!1,orgTreeID:""}},components:{systemRoleTree:K,systemRoleTable:a(47)(j,q,!1,function(e){a(702)},"data-v-3d78eeb8",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){},methods:{handleClick:function(e,t){this.orgTreeID=e.id,this.$refs.systemRoleTable.getSystemRole(e.id)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},chooseOrgTag:function(e){this.$emit("empSelectTags",e)}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("el-col",{staticClass:"treeWidth",attrs:{span:10}},[a("div",{staticClass:"tree-container"},[a("systemRoleTree",{ref:"tree",on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),a("el-col",{attrs:{span:14}},[a("systemRoleTable",{ref:"systemRoleTable",staticClass:"choosePersonTable",attrs:{tags:e.tags,orgTreeID:e.orgTreeID,deleteTags:e.deleteTags,mutilselectCheck:e.mutilselectCheck},on:{chooseOrgTag:e.chooseOrgTag}})],1)],1)],1)])])},staticRenderFns:[]};var H=a(47)(F,W,!1,function(e){a(701)},"data-v-43ce4b7f",null).exports,G={name:"customRoleTree",props:{nodKey:{type:String,default:"id",require:!1},highlightCurrent:{require:!1,type:Boolean,default:!0},checkOnClickNode:{type:Boolean,require:!1,default:!0},expandOnClickNode:{type:Boolean,require:!1,default:!0},renderexpand:{type:Boolean,require:!1,default:!0},autoExpandParent:{type:Boolean,require:!1,default:!0},depthIdPath:{type:Boolean,require:!1,default:!1},isMountedGetData:{type:Boolean,require:!1,default:!0},defaultRootNode:{type:Object,require:!1,default:null},defaultPropLabel:{type:String,require:!1,default:"displayName"},defaultSort:{type:String,require:!1,default:"orderIndex"}},data:function(){return{organizationList:[],defaultProps:{label:"title",children:"children",isLeaf:"isLast"},loading:!1,currentNode:null,isFristLoadTree:!0,userPickUrl:u.baseUrl}},created:function(e){this.debouncedSearchTree=Object(h.debounce)(this.getTreeList,null)},mounted:function(){this.isMountedGetData&&this.debouncedSearchTree(null)},methods:{loadNodeData:function(e,t){return 0===e.level?void(this.isFristLoadTree=!1):void this.debouncedSearchTree(e,t)},getTreeList:function(e,t){var a=this;if(null===e)var i=null;else if(!e.data.isLast)i={ParentID:e.data.id,context:e.data.title};var s={url:"/System/UserPick/GetCustomRoleCategoryByParent",method:"post",data:i};a.httpService(s,function(e){if(e.data&&200===e.status)if(e.data.data&&e.data.data.length>0){var i=e.data.data;t?t(i):a.organizationList=i}else t&&t([]);a.$emit("closeLoadding")})},nodeClick:function(e,t,a){this.currentNode=t,this.$emit("node-click",e,t,a)},currentChange:function(e,t){this.$emit("current-change",e,t)},checkChange:function(e,t,a){this.$emit("check-change",e,t,a)},check:function(e,t){this.$emit("check",e,t)},setChecked:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;i.$refs.systemRoleTree&&i.$nextTick(function(){i.$refs.systemRoleTree.setChecked(e,t,a)})},setCurrentKey:function(e){var t=this;t.$nextTick(function(){if(e&&t.$refs.customRoleTree){t.$refs.customRoleTree.setCurrentKey(e);var a=t.$refs.customRoleTree.getNode(e);a&&t.$emit("node-click",a.data,a,t.$refs.customRoleTree.$el)}})},setCheckedKeys:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$nextTick(function(){t.$refs.customRoleTree.setCheckedKeys(e,a)})},getNode:function(e){return this.$refs.systemRoleTree.getNode(e)},getCheckedNodes:function(){return this.$refs.customRoleTree.getCheckedNodes()},toTree:function(e){if(null==e||0==e.length)return[];var t=[],a={};return e.forEach(function(e){delete e.children}),e.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var i=a[e.parentId];i?(i.children||(i.children=[])).push(e):t.push(e)}),t},httpService:function(e,t){var a=this;a.loading=!0,a.$emit("openLoadding"),a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,a.$emit("closeLoadding"),e})}},computed:{personTableHeight:function(){return this.organizationList.length>0?185:223}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tree",{ref:"customRoleTree",attrs:{"node-key":e.nodKey,props:e.defaultProps,data:e.organizationList,"highlight-current":e.highlightCurrent,"check-on-click-node":e.checkOnClickNode,"expand-on-click-node":e.expandOnClickNode,"auto-expand-parent":e.autoExpandParent,load:e.loadNodeData,loading:e.loading,height:e.personTableHeight,lazy:""},on:{"node-click":e.nodeClick,"current-change":e.currentChange,"check-change":e.checkChange,check:e.check}})],1)},staticRenderFns:[]},Y=a(47)(G,V,!1,null,null,null).exports,J={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",currentRow:null,usertags:[],isActive:!1,searchTxt:"",customRoleTable:[],newisEmptyApplicant:!1,multipleSys:[],dialogTags:[],userPickUrl:u.baseUrl}},components:{page:y.a},props:{chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:function(){return[]}},type:{type:String,default:""},orgTreeID:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.customRoleTable.length>0?185:230}},watch:{tags:{handler:function(e,t){e&&this.doSelection(this.customRoleTable,e),this.dialogTags=this.tags},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(this.customRoleTable,e)},deep:!0}},mounted:function(){this.dialogTags=this.tags},methods:{selectCheckChange:function(e,t){t.type="CustomRole";if("true"===this.mutilselectCheck){if(e.length>=1){var a=!0,i=!1,n=void 0;try{for(var r,c=l()(e);!(a=(r=c.next()).done);a=!0){var h=r.value;h.type="CustomRole",h.UserDisplayName=h.DisplayName,h.UserAccount=h.Id}}catch(e){i=!0,n=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw n}}}else this.$refs.multipleSys.toggleRowSelection(t,!1);var u=this.getPersonId(this.customRoleTable);if(this.dialogTags){this.dialogTags=this.dialogTags.filter(function(e){return-1==u.indexOf(e.Id)});var g=this.getPersonId(this.dialogTags),f=!0,p=!1,m=void 0;try{for(var y,_=l()(e);!(f=(y=_.next()).done);f=!0){var T=y.value;-1==g.indexOf(T.Id)&&this.dialogTags.push(d()({},T))}}catch(e){p=!0,m=e}finally{try{!f&&_.return&&_.return()}finally{if(p)throw m}}}}else if(e.length>=1){var C=[].concat(v()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var b=!0,S=!1,P=void 0;try{for(var k,x=l()(C);!(b=(k=x.next()).done);b=!0){if("CustomRole"===k.value.type){var w=e.filter(function(e){return e.Id!==t.Id});this.$refs.multipleSys.toggleRowSelection(w[0],!1);var I=this.dialogTags.findIndex(function(e){return"CustomRole"===e.type});this.dialogTags.splice(I,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||(this.dialogTags.push(t),this.dialogTags=o()(new s.a(this.dialogTags)))}}catch(e){S=!0,P=e}finally{try{!b&&x.return&&x.return()}finally{if(S)throw P}}}else this.dialogTags.push(t)}else{this.$refs.multipleSys.toggleRowSelection(t,!1);var D=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(D,1)}var O=!0,$=!1,U=void 0;try{for(var N,R=l()(this.dialogTags);!(O=(N=R.next()).done);O=!0){var E=N.value;"CustomRole"===E.type&&(E.UserDisplayName=E.DisplayName,E.UserAccount=E.Id)}}catch(e){$=!0,U=e}finally{try{!O&&R.return&&R.return()}finally{if($)throw U}}this.$emit("chooseOrgTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},handleSizeChange:function(e){var t=this,a=e;t.infoPage.pageIndex=1,t.infoPage.pageSize=parseInt(a),t.searchTxt?t.handleSearch():t.getOrg(t.orgTreeID),setTimeout(function(){t.doSelection(t.customRoleTable,t.dialogTags)},500)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getOrg(t.orgTreeID),setTimeout(function(){t.doSelection(t.customRoleTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$nextTick(function(){t.$refs.multipleSys.toggleRowSelection(e,!0)})})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.multipleSys.clearSelection()});var a=function(e){t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.id})},i=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(i=(o=r.next()).done);i=!0){a(o.value)}}catch(e){s=!0,n=e}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}}else{var c=t.getPersonId(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="CustomRole",p.UserDisplayName=p.DisplayName,p.UserAccount=p.Id,c.includes(p.Id)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}t.$emit("chooseOrgTag",t.dialogTags)},doSelection:function(e,t){var a=this,i=this;t&&t.length>=1?t.forEach(function(t){var a=e.findIndex(function(e){return e.Id===t.SysId});a>-1?i.$nextTick(function(){i.$refs.multipleSys.toggleRowSelection(e[a],!0)}):i.$nextTick(function(){i.$refs.multipleSys.toggleRowSelection(e[a],!1)})}):0===t.length&&i.$nextTick(function(){a.$refs.multipleSys.clearSelection()})},getPersonId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value.Id;r&&t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},onlyDelete:function(e,t){var a=this.getPersonId(e).indexOf(t.SysId);this.$refs.multipleSys.toggleRowSelection(e[a],!1)},handleSearch:function(){""!==this.searchTxt?this.getOrgSearch(this.searchTxt):this.$message.error("请输入角色自定义信息")},getCustomRole:function(e){var t=this,a={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,CategoryId:e};t.doRest(a,function(e){t.customRoleTable=e.data,t.infoPage.total=e.count,t.doSelection(t.customRoleTable,t.dialogTags)},function(e){})},doRest:function(e,t){var a=this;a.loading=!0,a.$axios.post(a.userPickUrl.Base_User_URL+"/GetCustomRoleByCategory",e).then(function(e){200===e.status&&(t(e.data),a.loading=!1)}).catch(function(e){throw a.loading=!1,e})},httpService:function(e,t){var a=this;a.loading=!0,a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,e})},getOrgSearch:function(e){var t=this,a={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,key:e};t.$axios.post(t.userPickUrl.Base_User_URL+"/GetCustomRoleListByKey",a).then(function(e){t.customRoleTable=e.data.data,t.infoPage.total=e.count,t.doSelection(t.customRoleTable,t.dialogTags)}).catch(function(e){})}}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("div",{staticClass:"choosePerson-data"},[a("div",{staticClass:"search-condition btn-linkage"},[a("el-row",[a("el-col",{staticClass:"serchCOL",attrs:{span:24}},[a("el-input",{staticClass:"searchText",attrs:{placeholder:"自定义角色名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),a("div",{staticClass:"searchline"},[a("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n                    ")])],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"table-box"},[a("el-table",{ref:"multipleSys",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.customRoleTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"角色名称",center:"",prop:"DisplayName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"角色类型",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1===t.row.Type?"系统级":"流程级"))])]}}])})],1)],1)])],1)])],1)])]),e._v(" "),a("div",{staticClass:"table-foot"},[a("div",{staticClass:"page-sizes-box"},[a("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var X={name:"chooseOrg",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",currentSelectOrganizationId:"",isActive:!1,code:"",LeaveDimission:!1,orgTreeID:""}},components:{customRoleTree:Y,customRoleTable:a(47)(J,Q,!1,function(e){a(704)},"data-v-2db465f8",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){},methods:{handleClick:function(e,t){this.orgTreeID=e.id,this.$refs.customRoleTable.getCustomRole(e.id)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},chooseOrgTag:function(e){this.$emit("empSelectTags",e)}}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("el-col",{staticClass:"treeWidth",attrs:{span:10}},[a("div",{staticClass:"tree-container"},[a("customRoleTree",{ref:"tree",on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),a("el-col",{attrs:{span:14}},[a("customRoleTable",{ref:"customRoleTable",staticClass:"choosePersonTable",attrs:{tags:e.tags,orgTreeID:e.orgTreeID,deleteTags:e.deleteTags,mutilselectCheck:e.mutilselectCheck},on:{chooseOrgTag:e.chooseOrgTag}})],1)],1)],1)])])},staticRenderFns:[]};var ee=a(47)(X,Z,!1,function(e){a(703)},"data-v-38a8693e",null).exports,te={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20,50]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",tableData:[],currentRow:null,usertags:[],isActive:!1,searchTxt:"",orgPersons:[],newisEmptyApplicant:!1,multipleSelection:[],orgPersonTable:[],collectIcon:"",dialogTags:[],userPickUrl:u.baseUrl,tempOrgID:""}},components:{page:y.a},props:{persons:{type:String,default:""},chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:[]},type:{type:String,default:""},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}}},computed:{personTableHeight:function(){return this.tableData.length>0?195:240},userTableHeight:function(){return this.userdata.length>0?195:230}},watch:{tags:{handler:function(e,t){e&&(this.parmDialog.classifier?this.setIframeSelect(this.orgPersonTable,e):this.doSelection(this.orgPersonTable,e),this.dialogTags=[].concat(v()(e)))},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(e)},deep:!0}},mounted:function(){this.dialogTags=[].concat(v()(this.tags))},methods:{selectCheckChange:function(e,t){t.type="User";if("true"===this.mutilselectCheck){var a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;r.type="User",r.UserAccount=r.UserAccount,r.Name=r.UserDisplayName}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}var c=this.getPersonAccount(this.orgPersonTable);this.dialogTags=this.dialogTags.filter(function(e){return-1==c.indexOf(e.UserAccount)});var h=!0,u=!1,g=void 0;try{for(var f,p=l()(e);!(h=(f=p.next()).done);h=!0){var m=f.value;this.dialogTags.push(d()({},m))}}catch(e){u=!0,g=e}finally{try{!h&&p.return&&p.return()}finally{if(u)throw g}}}else if(e.length>=1){var y=[].concat(v()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var _=!0,T=!1,C=void 0;try{for(var b,S=l()(y);!(_=(b=S.next()).done);_=!0){if("User"===b.value.type){var P=e.filter(function(e){return e.UserAccount!==t.UserAccount});this.$refs.employeeTable.toggleRowSelection(P[0],!1);var k=this.dialogTags.findIndex(function(e){return"User"===e.type});this.dialogTags.splice(k,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||this.dialogTags.push(t)}}catch(e){T=!0,C=e}finally{try{!_&&S.return&&S.return()}finally{if(T)throw C}}}else this.dialogTags.push(t)}else{this.$refs.employeeTable.toggleRowSelection(t,!1);var x=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(x,1)}this.$emit("choosePersonTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},handleSizeChange:function(e){var t=e;this.infoPage.pageIndex=1,this.infoPage.pageSize=parseInt(t),this.searchTxt?this.handleSearch():this.getPerson(this.searchTxt)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getPerson(t.searchTxt),setTimeout(function(){t.doSelection(t.orgPersonTable,t.dialogTags),t.setIframeSelect(t.orgPersonTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$refs.employeeTable.toggleRowSelection(e,!0)})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.employeeTable.clearSelection()});var a=function(e){e.SysId?t.dialogTags=[]:t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.SysId})},i=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(i=(o=r.next()).done);i=!0){a(o.value)}}catch(e){s=!0,n=e}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}}else{var c=t.getPersonAccount(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="User",c.includes(p.UserAccount)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}var m=!0,v=!1,y=void 0;try{for(var _,T=l()(t.dialogTags);!(m=(_=T.next()).done);m=!0){var C=_.value;switch(C.type){case"User":C.UserAccount=C.UserAccount,C.Name=C.UserDisplayName}}}catch(e){v=!0,y=e}finally{try{!m&&T.return&&T.return()}finally{if(v)throw y}}t.$emit("choosePersonTag",t.dialogTags)},doSelection:function(e,t){var a=this;a.$nextTick(function(){t&&t.length>=1?("false"===a.mutilselectCheck&&a.$refs.employeeTable.clearSelection(),t.forEach(function(t){var i=e.findIndex(function(e){return e.UserAccount===t.UserAccount});i>-1?a.$nextTick(function(){a.$refs.employeeTable.toggleRowSelection(e[i],!0)}):a.$nextTick(function(){a.$refs.employeeTable.toggleRowSelection(e[i],!1)})})):0===t.length&&a.$nextTick(function(){a.$refs.employeeTable.clearSelection()})})},getPersonId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value.SysId;r&&t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},getPersonAccount:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value.UserAccount;r&&t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},onlyDelete:function(e){var t=this.getPersonAccount(this.orgPersonTable).findIndex(function(t){return t===e.UserAccount});this.$refs.employeeTable.toggleRowSelection(this.orgPersonTable[t],!1)},handleSearch:function(){this.getPerson(this.searchTxt)},getPerson:function(e){var t=this,a={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,activityID:t.parmDialog.activityID,applicantOrgId:t.parmDialog.applicantOrgId,key:e},i=sessionStorage.getItem("formModel");void 0!=i&&(a.model=i),t.doRest(a,function(e){t.orgPersonTable=e.data,t.infoPage.total=e.count,t.doSelection(t.orgPersonTable,t.dialogTags),t.setIframeSelect(t.orgPersonTable,t.dialogTags),e.errorMsg&&e.errorMsg.length>0&&(console.log(e.errorMsg),t.$alert(e.errorMsg,"错误消息"))},function(e){})},doRest:function(e,t){var a=this;a.loading=!0,a.$axios.post(a.userPickUrl.Base_User_URL+"/ProcPredictionApprover",e).then(function(e){200===e.status&&(t(e.data),a.loading=!1)}).catch(function(e){throw a.loading=!1,e})},httpService:function(e,t){var a=this;a.loading=!0,a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,e})},setIframeSelect:function(e,t){var a=this;a.$nextTick(function(){t&&t.length>=1?("false"===a.mutilselectCheck&&a.$refs.employeeTable.clearSelection(),t.forEach(function(t){var i=e.findIndex(function(e){return e.UserAccount===t.UserAccount});i>-1?a.$refs.employeeTable.toggleRowSelection(e[i],!0):a.$nextTick(function(){a.$refs.employeeTable.toggleRowSelection(e[i],!1)})})):0===t.length&&a.$nextTick(function(){a.$refs.employeeTable.clearSelection()})})}}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("div",{staticClass:"choosePerson-data"},[a("div",{staticClass:"search-condition btn-linkage"},[a("el-row",[a("el-col",{staticClass:"serchCOL",attrs:{span:24}},[a("el-input",{attrs:{placeholder:e.$t("UserPicker.UserNumberAndName")},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:e.handleSearch},slot:"suffix"})]),e._v(" "),a("div",{staticClass:"searchline"})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"table-box"},[a("el-table",{ref:"employeeTable",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.orgPersonTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("UserPicker.User"),center:"",prop:"UserFormDisplayName","show-overflow-tooltip":"",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("UserPicker.Account"),prop:"LoginAccount","show-overflow-tooltip":""}})],1)],1)])],1)])],1)])]),e._v(" "),a("div",{staticClass:"table-foot"},[a("div",{staticClass:"page-sizes-box"},[a("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,"pager-count":4,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var ie={name:"ChoosepersonNew",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",code:""}},components:{choosentable:a(47)(te,ae,!1,function(e){a(706)},"data-v-2a788ab9",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.employeeTable.getPerson()})},methods:{getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},choosePersonTag:function(e){this.$emit("empSelectTags",e)}}},se={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"choosePerson"},[t("div",{staticClass:"choose-person-container"},[t("div",{staticClass:"content-body"},[t("el-row",[t("el-col",{attrs:{span:24}},[t("choosentable",{ref:"employeeTable",staticClass:"choosePersonTable",attrs:{tags:this.tags,type:this.type,mutilselectCheck:this.mutilselectCheck,parmDialog:this.parmDialog,deleteTags:this.deleteTags},on:{choosePersonTag:this.choosePersonTag}})],1)],1)],1)])])},staticRenderFns:[]};var ne=a(47)(ie,se,!1,function(e){a(705)},"data-v-3c161176",null).exports,oe={name:"processTree",props:{nodKey:{type:String,default:"id",require:!1},highlightCurrent:{require:!1,type:Boolean,default:!0},expandOnClickNode:{type:Boolean,require:!1,default:!0},renderexpand:{type:Boolean,require:!1,default:!0},autoExpandParent:{type:Boolean,require:!1,default:!0},depthIdPath:{type:Boolean,require:!1,default:!1},isMountedGetData:{type:Boolean,require:!1,default:!0},defaultRootNode:{type:Object,require:!1,default:null},defaultPropLabel:{type:String,require:!1,default:"displayName"},defaultSort:{type:String,require:!1,default:"orderIndex"},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}},isProxyProcess:{type:Boolean,default:!1},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:null},ProcessType:{type:String,default:""}},data:function(){var e=this;return{searchTxt:"",processlist:[],defaultProps:{label:"name",children:"children",disabled:function(t,a){var i=e;if("All"===i.parmDialog.typeIframe)return!1;if("All"!==t.typeName){if(i.parmDialog.typeIframe){return!i.parmDialog.typeIframe.split(",").includes(t.typeName)}return t.typeName!==i.ProcessType}},isLeaf:function(e,t){return!!e.isLast}},loading:!1,isFristLoadTree:!0,checkStrictly:!0,defaultCheckedKeys:[],currentNode:null,current:{},userPickUrl:u.baseUrl}},created:function(e){this.debouncedSearchTree=Object(h.debounce)(this.getTreeList,null)},mounted:function(){this.isProxyProcess=this.parmDialog.isProxyProcess,this.isMountedGetData&&this.debouncedSearchTree(null)},watch:{tags:{handler:function(e,t){e&&(this.currentNode=e,this.getDefaultCheckedKeys())},deep:!0},ProcessType:{handler:function(e,t){e&&this.isMountedGetData&&this.debouncedSearchTree(null)},deep:!0}},methods:{clearText:function(){this.searchTxt=""},getDefaultCheckedKeys:function(){var e=this;this.$nextTick(function(){if("true"===e.mutilselectCheck){var t=[];e.currentNode&&e.currentNode.length>0&&e.currentNode.forEach(function(e){t.push(e.id)}),e.$refs.systemRoleTree.setCheckedKeys(t)}else e.currentNode.length>0?e.$refs.systemRoleTree.setCurrentKey(e.currentNode[0].id):e.$refs.systemRoleTree.setCheckedKeys([])})},loadNodeData:function(e,t){var a=this;if(0!==e.level){if(e.data.children&&e.data.children.length>0)t(e.data.children),this.$emit("load-node-data");else{if("Process"===e.data.typeName||"Version"===e.data.typeName||"Category"===e.data.typeName)return this.searchTxt="",void this.debouncedSearchTree(e,t);t([])}this.$nextTick(function(){a.setCheckedKeys(a.defaultCheckedKeys)})}},getTreeList:function(e,t,a){var i=this,s=this,n={},o="";o=s.parmDialog.typeIframe?s.parmDialog.typeIframe:s.ProcessType;e&&(e.data.id,e.data.typeName),this.searchTxt?n={searchParam:this.searchTxt,dType:o}:void 0==e?n={dType:o}:e.data.isLast||(n={dType:o,searchParam:"",NodeId:e.data.id,recordData:{typeName:e.data.typeName}}),n.isProxyProcess=s.isProxyProcess;var r={url:s.userPickUrl.Base_Process_URL+"/GetAllProcessTree",method:"get",params:n};s.httpService(r,function(e){if(e.data&&200===e.status){if(e.data.data&&e.data.data.length>0){var a=i.toTree(e.data.data);t?t(a):s.processlist=a}else t?t([]):s.processlist=[];i.$nextTick(function(){i.setCheckedKeys(i.defaultCheckedKeys)})}s.$emit("closeLoadding")})},nodeClick:function(e,t,a){this.current=t,this.$emit("node-click",e,t,a)},currentChange:function(e,t){},checkChange:function(e,t,a){this.$emit("check-change",e,t,a)},check:function(e,t){if(this.defaultCheckedKeys=t.checkedKeys,"false"===this.mutilselectCheck){var a=e.id;if(this.defaultCheckedKeys=this.defaultCheckedKeys.filter(function(e){return e===a}),t.checkedKeys&&t.checkedKeys.length>0){this.currentNode=[e];this.$refs.systemRoleTree.getNode(e.parent_Id);var i=!0,s=!1,n=void 0;try{for(var o,r=l()(this.currentNode);!(i=(o=r.next()).done);i=!0){var c=o.value;c.ProcessType="ProcessPick",c.type=c.typeName}}catch(e){s=!0,n=e}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}}else this.currentNode=[];this.$refs.systemRoleTree.setCheckedKeys([]),this.$refs.systemRoleTree.setCheckedKeys(this.defaultCheckedKeys)}else{this.defaultCheckedKeys=t.checkedKeys,this.currentNode=t.checkedNodes;var d=!0,h=!1,u=void 0;try{for(var g,f=l()(this.currentNode);!(d=(g=f.next()).done);d=!0){var p=g.value;p.ProcessType="ProcessPick",p.type=p.typeName,p.ProcessType="ProcessPick",p.CategoryId=e.categoryId,p.CategoryName=e.categoryName,p.ProcessCode=e.processCode,p.ProcessName=e.processName,p.VersionId=e.versionId,p.VersionName=e.versionName,p.ActivityId=e.activityId,p.ActivityName=e.activityName}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}this.$emit("ProcessCheck",this.currentNode)},setChecked:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;i.$refs.systemRoleTree&&i.$nextTick(function(){i.$refs.systemRoleTree.setChecked(e,t,a)})},setCurrentKey:function(e){var t=this;t.$nextTick(function(){if(e&&t.$refs.systemRoleTree){t.$refs.systemRoleTree.setCurrentKey(e);var a=t.$refs.systemRoleTree.getNode(e);a&&t.$emit("node-click",a.data,a,t.$refs.systemRoleTree.$el)}})},setCheckedKeys:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$nextTick(function(){t.$refs.systemRoleTree.setCheckedKeys(e,a)})},getNode:function(e){return this.$refs.systemRoleTree.getNode(e)},getCheckedNodes:function(){return this.$refs.systemRoleTree.getCheckedNodes()},toTree:function(e){if(null==e||0==e.length)return[];var t=[],a=[],i={},s=!0,n=!1,o=void 0;try{for(var r,c=l()(e);!(s=(r=c.next()).done);s=!0){var h=r.value,u=d()({},h);u.pId=u.parent_Id,t.push(u)}}catch(e){n=!0,o=e}finally{try{!s&&c.return&&c.return()}finally{if(n)throw o}}return t.forEach(function(e){delete e.children}),t.forEach(function(e){i[e.id]=e}),t.forEach(function(e){var t=i[e.pId];t?(t.children||(t.children=[])).push(e):a.push(e)}),a},httpService:function(e,t){var a=this;a.loading=!0,a.$emit("openLoadding"),a.$axios(e).then(function(e){a.loading=!1,t(e)}).catch(function(e){throw a.loading=!1,a.$emit("closeLoadding"),e})},getSecode:function(e){e={ParentID:e.data.id,parentId:-1,context:e.data.title,isLeaf:e.data.isLast,level:e.level,spread:!1};var t={url:this.userPickUrl.Base_M3_URL+"/UserPick/GetChildOrgTree",method:"post",data:e};e.isLast||this.$axios(t).then(function(e){})},handleSearch:function(){this.getTreeList()},onlyDelete:function(e,t){if("false"===this.mutilselectCheck)this.$refs.systemRoleTree.setCheckedKeys([]);else{var a=[];a.push(t.id),this.$refs.systemRoleTree.setCheckedKeys(a)}}},computed:{personTableHeight:function(){return this.processlist.length>0?185:223}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-condition btn-linkage",staticStyle:{"margin-bottom":"15px"}},[a("el-row",[a("el-col",{staticClass:"serchCOL",attrs:{span:20}},[a("el-input",{staticClass:"searchText",attrs:{placeholder:e.$t("UserPicker.ProcessName"),clearable:""},on:{clear:e.clearText},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"searchline",staticStyle:{"text-align":"right"}},[a("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v(e._s(e.$t("UserPicker.Search"))+"\n          ")])],1)])],1)],1),e._v(" "),a("div",{staticClass:"dialogScroll"},[a("el-tree",{ref:"systemRoleTree",attrs:{"node-key":e.nodKey,props:e.defaultProps,"show-checkbox":"","default-checked-keys":e.defaultCheckedKeys,data:e.processlist,"expand-on-click-node":!1,"check-strictly":e.checkStrictly,"highlight-current":e.highlightCurrent,"check-on-click-node":!1,"auto-expand-parent":e.autoExpandParent,load:e.loadNodeData,loading:e.loading,height:e.personTableHeight,lazy:""},on:{"node-click":e.nodeClick,"current-change":e.currentChange,"check-change":e.checkChange,check:e.check}})],1)])},staticRenderFns:[]};var le={name:"ChoosepersonNew",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",currentSelectOrganizationId:"",code:""}},components:{processTree:a(47)(oe,re,!1,function(e){a(708)},null,null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}},ProcessType:{type:String,default:""},Visible:{type:Boolean,default:!1}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){this.$nextTick(function(){})},methods:{handleClick:function(e,t){},getPersonEmpId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},ProcessCheck:function(e){this.$emit("empSelectTags",e)}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"choosePerson"},[a("div",{staticClass:"choose-person-container"},[a("div",{staticClass:"content-body"},[a("el-row",[a("process-tree",{ref:"chooseTree",staticClass:"choosePersonTable",attrs:{parmDialog:e.parmDialog,deleteTags:e.deleteTags,ProcessType:e.ProcessType,tags:e.tags,Visible:e.Visible,mutilselectCheck:e.mutilselectCheck},on:{"node-click":e.handleClick,ProcessCheck:e.ProcessCheck}})],1)],1)])])},staticRenderFns:[]};var de={name:"compositeChoosen",components:{ChoosePersonNew:S,ChooseOrg:I,ChoosePostion:N,choosVsPosition:z,choosSystemRole:H,choosCustomRole:ee,chooseGroupPerson:ne,chooseProcess:a(47)(le,ce,!1,function(e){a(707)},"data-v-5df53436",null).exports},props:{parmDialog:{type:Object,default:function(){return new Object}},selecttype:{type:Boolean,default:!1},Visible:{type:Boolean,default:!1},portalmMtilselectCheck:{type:String,default:""},echoData:{type:Array,default:function(){return[]}},activityID:{type:String,default:""},applicantOrgId:{type:String,default:""},ProcessType:{type:String,default:""}},data:function(){return{CollectPerson:[],deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",tags:[],isActive:!0,choosenTab:"",deleteTags:{},tabType:"",type:"",dialogTitle:"",tabName:[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1},{name:"组织",value:"Org",show:!1},{name:"岗位",value:"Position",show:!1},{name:"虚拟岗位",value:"InventedPosition",show:!1},{name:"系统角色",value:"SystemRole",show:!1},{name:"自定义角色",value:"CustomRole",show:!1},{name:"范围选人",value:"GroupPerson",show:!1}],tabIndex:0,mutilselectCheck:"",isProxyProcess:!1,top:"80px",userPickUrl:u.baseUrl}},mounted:function(){var e=this;e.isProxyProcess=e.parmDialog.isProxyProcess,e.$nextTick(function(){e.parmDialog.typeIframe?"form"===e.parmDialog.formType?(e.top="0px",e.mutilselectCheck=e.portalmMtilselectCheck):(e.top="120px",e.mutilselectCheck=e.parmDialog.mutilselect):(e.top="80px",e.mutilselectCheck=e.portalmMtilselectCheck)})},computed:{typeIframe:function(){return this.parmDialog.classifier}},watch:{tabType:{handler:function(e,t){var a=this;"User"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="User",this.dialogTitle=$t("UserPicker.SelectUser"),this.tabName=[{name:$t("UserPicker.Collection"),value:"Collect",show:!1},{name:$t("UserPicker.Personnel"),value:"User",show:!1}]),"Org"===e&&(this.tags=this.tags.filter(function(e){return"Org"===e.type}),this.isActive=!0,this.dialogTitle="选择组织",this.choosenTab="Org",this.tabName=[{name:"组织",value:"Org",show:!1}]),"Position"===e&&(this.tags=this.tags.filter(function(e){return"Position"===e.type}),this.dialogTitle="选择岗位",this.choosenTab="Position",this.tabName=[{name:"岗位",value:"Position",show:!1}]),"InventedPosition"===e&&(this.tags=this.tags.filter(function(e){return"InventedPosition"===e.type}),this.dialogTitle="选择虚拟岗位",this.choosenTab="InventedPosition",this.tabName=[{name:"虚拟岗位",value:"vposition",show:!1}]),"SystemRole"===e&&(this.tags=this.tags.filter(function(e){return"InventedPosition"===e.type}),this.dialogTitle="SystemRole",this.choosenTab="SystemRole",this.tabName=[{name:"系统角色",value:"systemrole",show:!1}]),"CustomRole"===e&&(this.tags=this.tags.filter(function(e){return"CustomRole"===e.type}),this.dialogTitle="CustomRole",this.choosenTab="CustomRole",this.tabName=[{name:"自定义角色",value:"customrole",show:!1}]),"GroupPerson"===e&&(this.tags=this.tags.filter(function(e){return"GroupPerson"===e.type}),this.dialogTitle="GroupPerson",this.choosenTab="GroupPerson",this.tabName=[{name:"范围选人",value:"groupperson",show:!1}]),"Process"===e&&(this.tags=this.tags.filter(function(e){return"Process"===e.type}),this.isActive=!0,this.dialogTitle="流程",this.choosenTab="Process",this.tabName=[{name:"流程",value:"Process",show:!1}]),"all"===e&&(this.dialogTitle="选人控件",this.tabName=[{name:"收藏",value:"User",show:!1},{name:"人员",value:"User",show:!1},{name:"组织",value:"org",show:!1},{name:"岗位",value:"position",show:!1},{name:"虚拟岗位",value:"vposition",show:!1},{name:"系统角色",value:"systemrole",show:!1},{name:"自定义角色",value:"customrole",show:!1}]),this.tabName.forEach(function(e){var t=a.GetLangType();switch(e.value){case"Collect":e.name="cn"==t?"收藏":"Collection";break;case"User":e.name="cn"==t?"人员":"Personnel";break;case"Org":e.name="cn"==t?"组织":"Organization";break;case"Position":e.name="cn"==t?"岗位":"Post";break;case"GroupPerson":e.name="cn"==t?"范围选人":"GroupPerson"}})},deep:!0,immediate:!0},typeIframe:{handler:function(e,t){if(void 0!==e&&""!==e)if("UserPick"===e)if("All"===this.parmDialog.typeIframe)this.choosenTab="Collect",this.dialogTitle="我的收藏",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1},{name:"组织",value:"Org",show:!1},{name:"岗位",value:"Position",show:!1},{name:"虚拟岗位",value:"InventedPosition",show:!1},{name:"系统角色",value:"SystemRole",show:!1},{name:"自定义角色",value:"CustomRole",show:!1},{name:"范围选人",value:"GroupPerson",show:!1}];else{var a=[],i=d()([],this.tabName);a=this.parmDialog.typeIframe.split(","),this.parmDialog.typeIframe.indexOf("User")>-1&&(this.getCollect(),a.unshift("Collect")),this.tabName=i.filter(function(e){return a.includes(e.value)}),this.isActive=!0,this.$set(this,"choosenTab",this.tabName[0].value),this.$set(this,"dialogTitle","选择"+this.tabName[0].name)}else{this.isActive=!0;var s="cn"==this.GetLangType()?"流程":"Process";this.choosenTab="Process",this.dialogTitle=s,this.tabName=[{name:s,value:"Process",show:!1}]}},immediate:!0},Visible:{handler:function(e,t){if(e){this.parmDialog.typeIframe||this.portalType(this.tabType)}else this.mutilselectCheck="false"},immediate:!0},echoData:{handler:function(e,t){var a=this;if(this.tags=[],console.log(e,"回显数据"),this.parmDialog.typeIframe){var i=function(e){var t={};t.UserDisplayName=e.Name,t.UserAccount=e.Value,t.type=e.Type,t.UserDisplayName.indexOf("|")>0&&"User"==t.type?(t.UserFormDisplayName=t.UserDisplayName.substring(0,t.UserDisplayName.indexOf("|")),t.LoginAccount=t.UserDisplayName.substring(t.UserDisplayName.indexOf("|")+1)):(t.UserFormDisplayName=t.UserDisplayName,t.LoginAccount=t.UserAccount),"User"!==e.Type&&(t.SysId=e.Value),a.$nextTick(function(){a.tags.push(t)})},s=!0,n=!1,o=void 0;try{for(var r,c=l()(e);!(s=(r=c.next()).done);s=!0){i(p=r.value)}}catch(e){n=!0,o=e}finally{try{!s&&c.return&&c.return()}finally{if(n)throw o}}var d=!0,h=!1,u=void 0;try{for(var g,f=l()(this.CollectPerson);!(d=(g=f.next()).done);d=!0){var p=g.value,m=!0,v=!1,y=void 0;try{for(var _,T=l()(e);!(m=(_=T.next()).done);m=!0){var C=_.value;if(p.UserAccount==C.Value){p.checked=!0;break}}}catch(e){v=!0,y=e}finally{try{!m&&T.return&&T.return()}finally{if(v)throw y}}}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}else{var b=function(e){var t={};e.portalType,"Process"===e.type?(t.typeName=e.type,t.processName=e.ProcessName,t.processCode=e.ProcessCode,t.type=e.type,t.id=e.id):"Category"===e.type?(t.name=e.categoryName,t.categoryName=e.categoryName,t.typeName=e.type,t.type=e.type,t.id=e.id):(t.SysId=e.SysId,t.UserDisplayName=e.UserDisplayName,t.UserAccount=e.UserAccount,t.type=e.type),a.$nextTick(function(){a.tags.push(t)})},S=!0,P=!1,k=void 0;try{for(var x,w=l()(e);!(S=(x=w.next()).done);S=!0){b(x.value)}}catch(e){P=!0,k=e}finally{try{!S&&w.return&&w.return()}finally{if(P)throw k}}}},immediate:!0}},methods:{handleClick:function(e,t){switch(this.isActive=!0,e.name){case"User":this.type="User",this.dialogTitle="选择人员",this.getCollect();break;case"Collect":this.type="Collect",this.dialogTitle="选择人员",this.getCollect();break;case"Org":this.dialogTitle="选择组织",this.type="Org";break;case"Position":this.dialogTitle="选择岗位",this.type="Position";break;case"InventedPosition":this.dialogTitle="选择虚拟岗位",this.type="InventedPosition";break;case"SystemRole":this.dialogTitle="选择系统角色",this.type="SystemRole";break;case"CustomRole":this.dialogTitle="选择自定义角色",this.type="CustomRole";break;case"GroupPerson":this.dialogTitle="范围选人",this.type="GroupPerson";break;case"Process":this.dialogTitle="选择流程",this.type="Process"}},getCollect:function(){var e=this;e.$axios({url:e.userPickUrl.Base_User_URL+"/GetUserListByCollect",method:"POST"}).then(function(t){if(200===t.status){e.CollectPerson=t.data.data;var a=!0,i=!1,s=void 0;try{for(var n,o=l()(e.CollectPerson);!(a=(n=o.next()).done);a=!0){var r=n.value,c=!0,d=!1,h=void 0;try{for(var u,g=l()(e.tags);!(c=(u=g.next()).done);c=!0){var f=u.value;if(r.UserAccount==f.UserAccount){r.checked=!0;break}}}catch(e){d=!0,h=e}finally{try{!c&&g.return&&g.return()}finally{if(d)throw h}}}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}}).catch(function(t){e.$message.error("数据获取失败!ERROR MESSAGE:"+t.message)})},cancelCollect:function(e){var t=this,a={IsCollect:!1,refUserId:e.SysId};t.$axios({url:t.userPickUrl.Base_User_URL+"/SetCollectPerson",method:"POST",data:a}).then(function(a){0===a.data.code?(t.CollectPerson.splice(t.CollectPerson.indexOf(e),1),e.IsCollect=!e.IsCollect):t.$message.error("数据获取失败")}).catch(function(e){t.$message.error("数据获取失败!ERROR MESSAGE:"+e.message)})},submitAdd:function(e){if("true"===this.mutilselectCheck){if(e.checked=!0,this.tags&&this.tags.length>0)this.getPersonAccount(this.tags).includes(e.UserAccount)||this.tags.push(e);else this.tags.push(e)}else{var t=!0,a=!1,i=void 0;try{for(var s,n=l()(this.CollectPerson);!(t=(s=n.next()).done);t=!0){s.value.checked=!1}}catch(e){a=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw i}}e.checked=!0,this.tags&&this.tags.length>=1?(this.tags=this.tags.splice(this.tags.length,0),this.tags.push(e)):this.tags.push(e)}var o=!0,r=!1,c=void 0;try{for(var d,h=l()(this.tags);!(o=(d=h.next()).done);o=!0){d.value.type="User"}}catch(e){r=!0,c=e}finally{try{!o&&h.return&&h.return()}finally{if(r)throw c}}},openChoosen:function(e,t){this.tabType=t||e,this.$emit("OpenDialog",!0)},cancel:function(){this.$emit("CloseDialog",!1)},closeDialoging:function(){this.parmDialog.typeIframe?this.$emit("handleCloseDialog",!1):this.$emit("CloseDialog",!1)},pullupClick:function(){this.isActive=!this.isActive},clearAll:function(){this.tags=[];var e=!0,t=!1,a=void 0;try{for(var i,s=l()(this.CollectPerson);!(e=(i=s.next()).done);e=!0){i.value.checked=!1}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}},handleClose:function(e){this.deleteTags=e;var t=this.tags.indexOf(e);this.tags.splice(t,1);var a=!0,i=!1,s=void 0;try{for(var n,o=l()(this.CollectPerson);!(a=(n=o.next()).done);a=!0){var r=n.value;if(r.UserAccount==e.UserAccount){r.checked=!1;break}}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}},getPersonId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value.SysId;r&&t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},submit:function(){this.$emit("OpenDialog",!1),this.$emit("sureSubmit",this.tags),this.sendTagSelect(this.tags,this.tabType)},empSelectTags:function(e){this.tags=e,this.tags=o()(new s.a(this.tags));var t=!0,a=!1,i=void 0;try{for(var n,r=l()(this.CollectPerson);!(t=(n=r.next()).done);t=!0){var c=n.value,d=!0,h=!1,u=void 0;try{for(var g,f=l()(this.tags);!(d=(g=f.next()).done);d=!0){var p=g.value;if(c.UserAccount==p.UserAccount){c.checked=!0;break}}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}}catch(e){a=!0,i=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw i}}},sendTagSelect:function(e,t){if(this.ProcessType){var a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){n.value.portalType=this.ProcessType}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}this.$emit("sendTag",e,t)},portalehco:function(e){this.tags=e},getPersonAccount:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=l()(e);!(a=(n=o.next()).done);a=!0){var r=n.value.UserAccount;r&&t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},portalType:function(e){"User"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="User",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"CurrentUser"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="Collect",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"ToWrite"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="Collect",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"Submitter"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="Collect",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"Org"===e&&(this.isActive=!0,this.dialogTitle="选择组织",this.choosenTab="Org",this.tabName=[{name:"组织",value:"Org",show:!1}]),"Position"===e&&(this.dialogTitle="选择岗位",this.choosenTab="Position",this.tabName=[{name:"岗位",value:"Position",show:!1}]),"InventedPosition"===e&&(this.dialogTitle="选择虚拟岗位",this.choosenTab="InventedPosition",this.tabName=[{name:"虚拟岗位",value:"vposition",show:!1}]),"SystemRole"===e&&(this.dialogTitle="SystemRole",this.choosenTab="SystemRole",this.tabName=[{name:"系统角色",value:"systemrole",show:!1}]),"CustomRole"===e&&(this.dialogTitle="CustomRole",this.choosenTab="CustomRole",this.tabName=[{name:"自定义角色",value:"customrole",show:!1}]),"GroupPerson"===e&&(this.dialogTitle="GroupPerson",this.choosenTab="GroupPerson",this.tabName=[{name:"范围选人",value:"groupperson",show:!1}]),"Process"===e&&(this.isActive=!0,this.dialogTitle="流程",this.choosenTab="Process",this.tabName=[{name:"流程",value:"Process",show:!1}],this.mutilselectCheck="true"),"Category"===e&&(this.isActive=!0,this.dialogTitle="流程",this.choosenTab="Process",this.tabName=[{name:"流程",value:"Process",show:!1}],this.mutilselectCheck="true"),"userSelectFell"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="Collect",this.mutilselectCheck="true",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"all"===e&&(this.dialogTitle="选人控件",this.tabName=[{name:"收藏",value:"User",show:!1},{name:"人员",value:"User",show:!1},{name:"组织",value:"org",show:!1},{name:"岗位",value:"position",show:!1},{name:"虚拟岗位",value:"vposition",show:!1},{name:"系统角色",value:"systemrole",show:!1},{name:"自定义角色",value:"customrole",show:!1},{name:"范围选人",value:"groupperson",show:!1}]),""===e&&(this.tabName=[])},GetLangType:function(){var e="cn";return null!=localStorage&&void 0!=localStorage.Lang&&(e=localStorage.Lang),e}}},he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"pccandiate",attrs:{visible:e.Visible,id:"composite","close-on-click-modal":!1,title:e.dialogTitle,top:e.top,show:e.Visible,width:"100%",center:""},on:{"update:visible":function(t){e.Visible=t},opened:e.openChoosen,close:e.closeDialoging}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.choosenTab,callback:function(t){e.choosenTab=t},expression:"choosenTab"}},e._l(e.tabName,function(t,i){return a("el-tab-pane",{key:i,attrs:{label:t.name,name:t.value}},["Collect"===t.value?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"common"},[a("el-row",[a("div",{staticClass:"recently-content radio-content"},[a("el-row",e._l(e.CollectPerson,function(t){return a("el-col",{key:t.id,staticClass:"recently-box",class:{checked:1==t.checked},attrs:{"is-checked":!0,span:6}},[a("div",{staticClass:"picture",on:{click:function(a){e.submitAdd(t)}}},[a("div",{staticClass:"picture-text"},[a("p",{staticClass:"department",attrs:{title:t.UserFormDisplayName}},[e._v(e._s(t.UserFormDisplayName))]),e._v(" "),a("p",{staticClass:"staff",attrs:{title:t.LoginAccount}},[e._v(e._s(t.LoginAccount))])]),e._v(" "),[a("i",{staticClass:"icon iconfont",class:t.IsCollect?"icon-collect-icon-copy":"icon-noCollect-icon",staticStyle:{"font-size":"20px",color:"#FFB800"},on:{click:function(a){a.stopPropagation(),e.cancelCollect(t)}}})]],2)])}))],1)])],1)]):e._e(),e._v(" "),"User"===t.value?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[a("Choose-person-New",{ref:"choosen",refInFor:!0,attrs:{tags:e.tags,deleteTags:e.deleteTags,mutilselectCheck:e.mutilselectCheck,parmDialog:e.parmDialog,type:e.type},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"Org"===t.value?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[a("choose-org",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,parmDialog:e.parmDialog,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"Position"===t.value?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[a("choose-postion",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,parmDialog:e.parmDialog,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"InventedPosition"===t.value?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[a("choos-vs-position",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"SystemRole"===t.value?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[a("choos-system-role",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"CustomRole"===t.value?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[a("choos-custom-role",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"GroupPerson"===t.value?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[a("choose-group-person",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,parmDialog:e.parmDialog,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"Process"===t.value?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[a("choose-process",{attrs:{tags:e.tags,Visible:e.Visible,ProcessType:e.ProcessType,parmDialog:e.parmDialog,mutilselectCheck:e.mutilselectCheck,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e()])})),e._v(" "),a("div",{staticClass:"choosepersoned-top"},[a("div",{staticClass:"choosepersoned",class:{pullup:e.isActive}},[a("div",{staticClass:"pull",on:{click:e.pullupClick}}),e._v(" "),a("div",{staticClass:"personnal"},[a("div",{staticClass:"deletechoose-box"},[a("span",{staticClass:"deletechoose",on:{click:e.clearAll}},[a("i",{staticClass:"el-icon-delete"})])]),e._v(" "),a("div",{class:e.isActive?e.deletechooseheight:e.deletechoosecontent},e._l(e.tags,function(t){return a("el-tag",{key:t.SysId,attrs:{type:"info",closable:""},on:{close:function(a){e.handleClose(t)}},scopedSlots:e._u([{key:"default",fn:function(i){return[a("div",{staticClass:"deleteperson"},[a("div",{staticClass:"picture-text"},[a("p",{directives:[{name:"show",rawName:"v-show",value:"User"!=t.type,expression:"tag.type!='User'"}],staticClass:"department",attrs:{title:t.UserDisplayName}},[e._v(e._s(t.UserDisplayName))]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"User"===t.type,expression:"tag.type==='User'"}],staticClass:"department",attrs:{title:t.UserDisplayName}},[e._v(e._s(t.UserFormDisplayName))]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"User"===t.type,expression:"tag.type==='User'"}],staticClass:"staff",attrs:{title:t.LoginAccount}},[e._v(e._s(t.LoginAccount))]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"User"!=t.type&&("User"===t.Type||"User"===t.sourcesType),expression:"tag.type!='User' &&(tag.Type==='User' || tag.sourcesType==='User') "}],staticClass:"staff",attrs:{title:t.UserAccount}},[e._v(e._s(t.UserAccount))]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"Process"===t.typeName||"Activity"===t.typeName||"Version"===t.typeName,expression:"tag.typeName==='Process'|| tag.typeName==='Activity' || tag.typeName==='Version' "}],staticClass:"staff",attrs:{title:t.displayName}},[e._v(e._s(t.processName)+"("+e._s(t.processCode)+")")]),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"Process"!==t.typeName,expression:"tag.typeName!=='Process'"}],staticClass:"staff",attrs:{title:t.name}},[e._v(e._s(t.name))])])])]}}])})}))])])]),e._v(" "),a("div",{staticClass:"my-dialog-footer"},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancle",on:{click:e.cancel}},[e._v(e._s(e.$t("UserPicker.DialogCancel")))]),e._v(" "),a("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("UserPicker.DialogConfirm")))])],1)])],1)],1)},staticRenderFns:[]};var ue=a(47)(de,he,!1,function(e){a(692)},null,null);t.default=ue.exports},685:function(e,t,a){"use strict";var i={name:"page",props:{pageIndex:{type:Number,default:1,required:!0},pageSize:{type:Number,default:1,required:!0},total:{type:Number,default:0,required:!0},pageSizesList:{type:Array,required:!0}},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},firstPage:function(){this.pageIndex=1},tailPage:function(){this.pageIndex=this.$refs.page.internalPageCount}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("el-pagination",{ref:"page",attrs:{background:"","current-page":e.pageIndex,"page-sizes":e.pageSizesList,"page-size":e.pageSize,"prev-text":e.$t("UserPicker.HomePage"),"next-text":e.$t("UserPicker.TailPage"),layout:"total, prev, pager, next, sizes",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"prev-click":e.firstPage,"next-click":e.tailPage}})],1)},staticRenderFns:[]};var n=a(47)(i,s,!1,function(e){a(687)},"data-v-18a42a56",null).exports;t.a=n},686:function(e,t,a){"use strict";t.__esModule=!0;var i,s=a(356),n=(i=s)&&i.__esModule?i:{default:i};t.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return(0,n.default)(e)}},687:function(e,t){},688:function(e,t,a){"use strict";var i,s=a(360),n=a.n(s),o=a(163),r=a.n(o),l=a(160),c=a.n(l),d=a(357),h=a(67),u={name:"",props:{componentParam:{componentType:{type:String,required:!0},childDataUrl:{type:Object,required:!0},backfillData:{type:Array,default:new Array,required:!0},assemblyParam:{type:Object,required:!0},checkProcess:{type:Boolean,default:!1,required:!0},oneCheck:{type:Boolean,default:!1,required:!0},closeShow:{type:Boolean,default:!0,required:!0},type:Object,required:!0}},mounted:function(){if(this.componentParam.backfillData.length>0){var e=!0,t=!1,a=void 0;try{for(var i,s=c()(this.componentParam.backfillData);!(e=(i=s.next()).done);e=!0){var n=i.value;this.selectedCities.push(n)}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}}},data:function(){return{checkedCities:[],selectedCities:[],processName:"",organizeProcessName:"",organName:"",selectOrgs:[],isActive:!1,checkAll:!1,cities:[],treeSearch:"",treeList:[],rootNode:{},defaultProps:{id:"id",children:"Child",label:"name"},tooltiprocessName:"",defaultKeys:[],currentId:"",isIndeterminate:!1,props:{label:"orgName",value:"orgID",children:"m_ChildOrg"},organizeList:[],activeOrganizeName:[],organizeName:"",organize:{orgID:""},imgLoading:!1}},watch:{treeSearch:function(e){this.debouncedSearchTree()}},created:function(e){var t=this;t.debouncedSearchTree=Object(d.debounce)(t.searchTree,2e3),t.debouncedGetProcess=Object(d.debounce)(t.getProcess,200,e),t.imgLoading=!0,r.a.all([t.getOrganizeList(),t.getUserOrganize()]).then(function(e){if(e[0]){t.organize.orgID=e[1]||t.organizeList[0].orgID;var a=t.$refs.orgtree.getNode(t.organize.orgID);a&&(t.$refs.orgtree.setCurrentKey(t.organize.orgID),t.setOrganize(a)),t.getCategoryOfOrganize(t.organize.orgID).then(function(){t.imgLoading=!1})}}).catch(function(e){t.imgLoading=!1,t.$message.error(e)})},methods:(i={selectTreeClick:function(e,t){var a=this;this.processName="",this.tooltiprocessName="",a.$refs.selectTree.visible=!1,a.organize=e,a.setOrganize(t),a.imgLoading=!0,a.getCategoryOfOrganize(e.orgID).then(function(){a.imgLoading=!1}),a.cities=[],a.checkAll=!1,a.isIndeterminate=!1},setOrganize:function(e){this.activeOrganizeName=[],this.getOrgPrarentNode(e),this.organizeName=this.activeOrganizeName.reverse().join("/"),this.organizeProcessName=this.activeOrganizeName.join(">")+">"},getUserOrganize:function(){var e=this;return new r.a(function(t,a){e.$axios.post("/api/getorg",{}).then(function(e){if(e.data.getOrgList.length>0){var a=e.data.getOrgList[0].orgid;t(a)}else t(null)}).catch(function(e){a("获取用户所在部门失败!ERROR MESSAGE:"+e)})})},getOrganizeList:function(){var e=this;return new r.a(function(t,a){e.$axios.post("/api/companytree/page",{}).then(function(a){a.data.companyTreeList.length>0?(e.organizeList=a.data.companyTreeList,t(!0)):t(!1)}).catch(function(e){a("获取组织数据失败!ERROR MESSAGE:"+e)})})},getCategoryOfOrganize:function(e){var t=this,a={orgId:e,isUse:1,name:t.treeSearch.trim(),isHide:1,isDailog:"1"};return new r.a(function(e,i){t.$axios.post("/api/processCategory",a).then(function(a){if(0==a.data.result.length)t.treeList=[];else{for(var i=h.a.toTree(a.data.result,"id","pid","Child"),s=0;s<i.length;s++)0!=i[s].pid&&(i.splice(s,1),s--);t.treeList=i}e(!0)}).catch(function(e){i("查询列表数据失败!ERROR MESSAGE:"+e)})})},getOrgPrarentNode:function(e){void 0!=e.data.orgName&&this.activeOrganizeName.push(e.data.orgName),void 0!=e.parent&&this.getOrgPrarentNode(e.parent)},enterSearch:function(){this.defaultKeys=[],this.debouncedSearchTree()},searchTree:function(){var e=this;if(e.defaultKeys=[],""==e.treeSearch.trim())return e.imgLoading=!0,void e.getCategoryOfOrganize(e.organize.orgID).then(function(){e.imgLoading=!1});""!=e.organize.orgID?e.searchProcessCategory():e.$message.warning("请先选择组织进行搜索！")},searchProcessCategory:function(){var e=this;e.treeList.splice(0,e.treeList.length),e.cities.splice(0,e.cities.length),e.checkAll=!1,e.isIndeterminate=!1;var t={isCategory:"",isDailog:1,isHide:1,isUse:1,name:e.treeSearch.trim(),id:"",orgId:e.organize.orgID};e.imgLoading=!0,e.$axios.post("/api/processCategoryTree",t).then(function(t){if(0==t.data.result.length)e.treeList=[];else{var a=h.a.toTree(t.data.result,"id","pid","Child");e.treeList=a,e.getdefaultKeys(a)}e.imgLoading=!1}).catch(function(t){e.imgLoading=!1,e.$message.error("搜索组织流程失败！"+t)})},getProcess:function(e){if(e){var t=this,a=t.getSelectProcessId(t.selectedCities),i={isCategory:"0",isDailog:1,isHide:1,isUse:1,name:"",id:e.data.id,orgId:t.organize.orgID};t.imgLoading=!0,t.$axios.post("/api/processCategoryTree",i).then(function(e){t.displayProcess(e.data.result,a),t.imgLoading=!1}).catch(function(e){t.imgLoading=!1,t.$message.error("连接服务器失败！"+e)})}},handleNodeClick:function(e,t){if(0==this.treeSearch.trim().length)this.debouncedGetProcess(t);else if(this.treeSearch.trim().length>0){var a=this.getSelectProcessId(this.selectedCities),i=[];e.Child?i=e.Child:i.push(e),this.displayProcess(i,a)}this.selectOrgs=[],this.getPrarentNode(t),this.disposeOrganName(e.name)},getdefaultKeys:function(e){var t=!0,a=!1,i=void 0;try{for(var s,n=c()(e);!(t=(s=n.next()).done);t=!0){var o=s.value;o.hasOwnProperty("Child")&&o.Child.length>0&&(this.defaultKeys.push(o.id),this.getdefaultKeys(o.Child))}}catch(e){a=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw i}}},displayProcess:function(e,t){this.cities.splice(0,this.cities.length),this.checkedCities=[],this.checkAll=!1,this.isIndeterminate=!1;var a=!0,i=!1,s=void 0;try{for(var n,o=c()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;r.processId&&"0"!==r.processId&&null!==r.processId&&(t.indexOf(r.processId)>-1&&this.checkedCities.push(r),this.cities.push(r))}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}var l=this.getId(this.cities),d=0,h=!0,u=!1,g=void 0;try{for(var f,p=c()(this.checkedCities);!(h=(f=p.next()).done);h=!0){var m=f.value;-1!==l.indexOf(m.id)&&d++}}catch(e){u=!0,g=e}finally{try{!h&&p.return&&p.return()}finally{if(u)throw g}}this.checkAll=d>0&&d===this.cities.length,this.isIndeterminate=this.checkedCities.length>0&&this.checkedCities.length<this.cities.length},dblclickCheckedCitie:function(e){this.clickDepartment(e),this.$emit("sureSubmit",{type:this.componentParam.componentType,list:this.selectedCities})},clickDepartment:function(e){this.selectedCities.splice(0,this.selectedCities.length),this.selectedCities.push(e),this.checkedCities.splice(0,this.checkedCities.length),this.checkedCities.push(e);var t=this.$refs.processTree.getNode(e.pid);this.selectOrgs=[],this.getPrarentNode(t),e.tooltiprocessName=this.disposeOrganName(e.name)},handleCheckAllChange:function(e){this.checkedCities=[];var t=this.getSelectProcessId(this.selectedCities);if(e){var a=!0,i=!1,s=void 0;try{for(var n,o=c()(this.cities);!(a=(n=o.next()).done);a=!0){var r=n.value;-1===t.indexOf(r.processId)&&this.selectedCities.push(r),this.checkedCities.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}this.checkAll=!0,this.isIndeterminate=!1}else{var l=!0,d=!1,h=void 0;try{for(var u,g=c()(this.cities);!(l=(u=g.next()).done);l=!0){var f=u.value;if(t.indexOf(f.processId)>-1){var p=-1;for(var m in this.selectedCities)this.selectedCities[m].processId==f.processId&&(p=m);-1!=p&&this.selectedCities.splice(p,1)}}}catch(e){d=!0,h=e}finally{try{!l&&g.return&&g.return()}finally{if(d)throw h}}this.checkAll=!1,this.isIndeterminate=!1}},handleCheckedCitiesChange:function(e){this.isIndeterminate=!1;var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=c()(this.selectedCities);!(a=(n=o.next()).done);a=!0){var r=n.value;t.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}this.selectedCities.splice(0,this.selectedCities.length);var l=this.getId(this.cities),d=[];for(var h in t)-1==l.indexOf(t[h].id)&&d.push(t[h]);this.selectedCities=d;var u=[],g=!0,f=!1,p=void 0;try{for(var m,v=c()(e);!(g=(m=v.next()).done);g=!0){var y=m.value;u.tooltiprocessName=this.disposeOrganName(y.name)}}catch(e){f=!0,p=e}finally{try{!g&&v.return&&v.return()}finally{if(f)throw p}}var _=this.getSelectProcessId(this.selectedCities),T=!0,C=!1,b=void 0;try{for(var S,P=c()(e);!(T=(S=P.next()).done);T=!0){var k=S.value;-1===_.indexOf(k.processId)&&this.selectedCities.push(k)}}catch(e){C=!0,b=e}finally{try{!T&&P.return&&P.return()}finally{if(C)throw b}}var x=0,w=!0,I=!1,D=void 0;try{for(var O,$=c()(e);!(w=(O=$.next()).done);w=!0){var U=O.value;-1!==l.indexOf(U.id)&&x++}}catch(e){I=!0,D=e}finally{try{!w&&$.return&&$.return()}finally{if(I)throw D}}this.checkedCities=e,this.checkAll=x===this.cities.length,this.isIndeterminate=x>0&&x<this.cities.length},pullBtnHeightChange:function(){this.isActive=!this.isActive},sureSubmit:function(){this.$emit("sureSubmit",{type:this.componentParam.componentType,list:this.selectedCities})},getSelectProcessId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=c()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;t.push(r.processId)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t},getId:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=c()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;t.push(r.id)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t}},n()(i,"pullBtnHeightChange",function(){this.isActive=!this.isActive}),n()(i,"close",function(){this.$emit("hideComponent")}),n()(i,"deleteDept",function(e){for(var t in this.checkAll=!1,this.isIndeterminate=!1,this.checkedCities)this.checkedCities[t].id==this.selectedCities[e].id&&this.checkedCities.splice(t,1);this.selectedCities.splice(e,1),this.checkAll=this.checkedCities.length===this.cities.length&&this.cities.length>0,this.isIndeterminate=this.checkedCities.length>0&&this.checkedCities.length<this.cities.length}),n()(i,"clearDept",function(){this.checkedCities.splice(0,this.checkedCities.length),this.selectedCities.splice(0,this.selectedCities.length),this.checkAll=!1,this.isIndeterminate=!1}),n()(i,"disposeOrganName",function(e){var t="",a=!0,i=!1,s=void 0;try{for(var n,o=c()(this.selectOrgs);!(a=(n=o.next()).done);a=!0){t+=n.value.text+" > "}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return t=(t=t.trim()).substr(0,t.length-1),this.tooltiprocessName=t,t.length>30?this.processName=t.substr(0,30)+"...":this.processName=t,t}),n()(i,"getPrarentNode",function(e){e&&(e.data&&void 0!=e.data.name&&this.selectOrgs.unshift({text:""+e.data.name,petId:""+e.data.id,PID:""+e.data.pid}),void 0!=e.parent&&this.getPrarentNode(e.parent))}),i)},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"originater_dialog newProcess_dialog"},[a("div",{class:[e.componentParam.closeShow?"pc-candidates":"pc-candidates pc-background"]},[a("div",{staticClass:"dialog_content"},[a("el-main",{staticStyle:{position:"relative"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.componentParam.closeShow,expression:"!componentParam.closeShow"}],staticClass:"top"},[e._v("流程选择\n          "),a("span",{staticStyle:{"font-size":"30px",cursor:"pointer"},on:{click:e.close}},[e._v("×")])]),e._v(" "),a("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],attrs:{type:"card","element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[a("el-tab-pane",{staticClass:"candidates-recently"},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont icon-todos"}),e._v(" 流程")]),e._v(" "),a("div",{staticClass:"title  title-border"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right",title:e.organizeProcessName+e.tooltiprocessName}},[a("el-breadcrumb-item",[e._v("流程选择")]),e._v(" "),a("el-breadcrumb-item",{staticStyle:{overflow:"hidden","-ms-text-overflow":"ellipsis","text-overflow":"ellipsis","white-space":"nowrap",width:"300px",display:"inline-block"}},[e._v(e._s(e.organizeProcessName)+e._s(e.processName))])],1),e._v(" "),a("span",{staticClass:"rightInput"},[a("el-input",{attrs:{placeholder:"请输入流程关键字","prefix-icon":"el-icon-search",size:"mini"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.enterSearch(t):null}},model:{value:e.treeSearch,callback:function(t){e.treeSearch=t},expression:"treeSearch"}})],1)],1),e._v(" "),a("div",{staticClass:"content clearfix"},[a("div",{staticClass:"content-left",staticStyle:{position:"relative"}},[a("div",{staticClass:"title"},[a("el-form",{staticClass:"demo-form-inline init-organize-box",staticStyle:{width:"100%"},attrs:{inline:!0}},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:""}},[a("el-select",{ref:"selectTree",staticStyle:{width:"100%"},attrs:{placeholder:"组织","popper-class":"tree-list-box"},model:{value:e.organizeName,callback:function(t){e.organizeName=t},expression:"organizeName"}},[a("el-option",{staticStyle:{height:"auto",padding:"0px 0px"},attrs:{value:"",disabled:!0}},[a("div",[a("el-tree",{ref:"orgtree",attrs:{data:e.organizeList,"highlight-current":!0,"node-key":"orgID","default-expand-all":"","expand-on-click-node":!1,"empty-text":"暂无数据",props:e.props},on:{"node-click":e.selectTreeClick}})],1)])],1)],1)],1)],1),e._v(" "),e.treeList.length>0?a("el-tree",{ref:"processTree",attrs:{data:e.treeList,"node-key":"id","highlight-current":!0,props:e.defaultProps,"empty-text":"","expand-on-click-node":!1,"default-expanded-keys":e.defaultKeys},on:{"node-click":e.handleNodeClick}}):e._e(),e._v(" "),0===e.treeList.length?a("div",{staticStyle:{position:"absolute",top:"50%",left:"50%","-webkit-transform":"translate(-50%, -50%)","-moz-transform":"translate(-50%, -50%)","-ms-transform":"translate(-50%, -50%)","-o-transform":"translate(-50%, -50%)",transform:"translate(-50%, -50%)"}},[e._v("\n                  暂无数据\n                ")]):e._e()],1),e._v(" "),a("div",{staticClass:"content-right",staticStyle:{position:"relative"}},[e.componentParam.oneCheck?e._e():a("el-checkbox",{staticStyle:{"padding-top":"6px","padding-left":"20px"},attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n                ")]),e._v(" "),e.componentParam.oneCheck?a("el-checkbox-group",{staticClass:"theRadio",model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return a("el-checkbox-button",{key:t.id,attrs:{label:t,checked:t.checked}},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-body",on:{click:function(a){e.clickDepartment(t)},dblclick:function(a){e.dblclickCheckedCitie(t)}}},[a("h4",{staticClass:"media-heading iconfont icon-process1",attrs:{title:t.name}},[e._v(e._s(t.name.length>30?t.name.substr(0,30)+"...":t.name))])])])])})):a("el-checkbox-group",{staticClass:"mut-check",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t,checked:t.checked}},[a("div",{staticClass:"media"},[a("div",{staticClass:"media-body"},[a("h4",{staticClass:"media-heading",attrs:{title:t.name}},[e._v(e._s(t.name.length>30?t.name.substr(0,30)+"...":t.name))])])])])})),e._v(" "),0===e.cities.length?a("div",{staticStyle:{position:"absolute",top:"50%",left:"50%","-webkit-transform":"translate(-50%, -50%)","-moz-transform":"translate(-50%, -50%)","-ms-transform":"translate(-50%, -50%)","-o-transform":"translate(-50%, -50%)",transform:"translate(-50%, -50%)"}},[e._v("\n                  暂无数据\n                ")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"addrecently-box",class:{pullup:e.isActive}},[a("div",{staticClass:"addrecently"},[a("div",{staticClass:"media"},[a("div",{staticClass:"pull",on:{click:e.pullBtnHeightChange}}),e._v(" "),a("ul",{staticClass:"clearfix"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedCities.length>0,expression:"selectedCities.length>0"}],staticClass:"clearBtn",on:{click:e.clearDept}}),e._v(" "),e._l(e.selectedCities,function(t,i){return a("li",{key:i},[a("div",{staticClass:"media-body"},[a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.deleteDept(i)}}}),e._v(" "),a("span",{staticClass:"media-heading"},[e._v(e._s(t.name))])])])})],2)])])]),e._v(" "),a("div",{staticClass:"addrecently-footer"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.sureSubmit}},[e._v("确定\n              ")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:e.close}},[e._v("取消")])],1)])],1)],1)],1)])])},staticRenderFns:[]};var f=a(47)(u,g,!1,function(e){a(689)},"data-v-2617991c",null);t.a=f.exports},689:function(e,t){},692:function(e,t){},693:function(e,t){},694:function(e,t){},695:function(e,t){},696:function(e,t){},697:function(e,t){},698:function(e,t){},699:function(e,t){},700:function(e,t){},701:function(e,t){},702:function(e,t){},703:function(e,t){},704:function(e,t){},705:function(e,t){},706:function(e,t){},707:function(e,t){},708:function(e,t){},720:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__=__webpack_require__(68),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__=__webpack_require__(686),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_typeof__=__webpack_require__(69),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator__=__webpack_require__(160),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator__),__WEBPACK_IMPORTED_MODULE_4_vuex__=__webpack_require__(82),__WEBPACK_IMPORTED_MODULE_5__dailog_originator_dailog_vue__=__webpack_require__(361),__WEBPACK_IMPORTED_MODULE_6__dailog_processSelection_vue__=__webpack_require__(688),__WEBPACK_IMPORTED_MODULE_7__js_util__=__webpack_require__(67),__WEBPACK_IMPORTED_MODULE_8_moment__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_8_moment___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_moment__),__WEBPACK_IMPORTED_MODULE_9__plugins_loading_loading__=__webpack_require__(359),__WEBPACK_IMPORTED_MODULE_10__plugins_page_index__=__webpack_require__(685),__WEBPACK_IMPORTED_MODULE_11__biz_compositeChoosen_vue__=__webpack_require__(10);__webpack_exports__.a={name:"burseProcess",components:{page:__WEBPACK_IMPORTED_MODULE_10__plugins_page_index__.a,Choosen:__WEBPACK_IMPORTED_MODULE_11__biz_compositeChoosen_vue__.default},mounted:function(){this.getList();var e=this;window.onmessage=function(t){"refreshNewSystem"===t.data.key&&e.getList()}},data:function(){var e=this;return{pickerOptionsBefore:{disabledDate:function(t){var a=e.model.date[1];if(a)return __WEBPACK_IMPORTED_MODULE_8_moment___default()(t).format("YYYY-MM-DD")>a}},pickerOptionsAfter:{disabledDate:function(t){var a=e.model.date[0];if(a)return __WEBPACK_IMPORTED_MODULE_8_moment___default()(t).format("YYYY-MM-DD")<a}},rules:{checkComment:[{validator:function(e,t,a){""==t.trim()?a(new Error("请输审批意见！意见不能为空！")):a()},trigger:"blur"}]},model:{selectForm:{searchWord:"",startDate:"",finishDate:"",amountOfMoneyB:"",amountOfMoneyE:"",processFullName:"",companyCode:"",departmentID:"",projectId:"",originator:"",orderBy:"riskLevel desc,startDate desc"},date:[],userName:[]},isSeach:!1,oneCheck:!1,queryName:"",processFormName:"",childDataUrl:{url:"",selectedPerson:[],chooseProject:{}},loading:!1,showdialog:!1,componentParam:{componentType:"",childDataUrl:{type:Object,required:!0},backfillData:{type:Array,required:!0},oneCheck:{type:Boolean,required:!0},closeShow:{type:Boolean,required:!0}},comp:{},orgStates:[],showList:!1,rowData:{},pageIndex:1,total:0,pageSize:20,pageSizesList:[20,50,100],multipleSelection:[],endsDialog:!1,approvaldialog:!1,carefulform:{agree:"Approved",checkComment:"",iiSServerUrl:"",snList:"",userName:localStorage.getItem("username"),handtime:__WEBPACK_IMPORTED_MODULE_8_moment___default()(new Date).format("YYYY-MM-DD")},tableData:[],imgLoading:!1,dataTitle:"",originatorPageIndex:0,originatorPageSize:10,originatorTotal:0,originatorLoading:!1,typeTab:"User",Visible:!1,serachSlectData:{tagsOwnsUser:[],tagsOwnProcess:[],tagsOwnCategory:[],tagsOrgSelect:[]},portalmMtilselectCheck:"true",CriteriaModel:{ProcessNum:"",ProcessCode:[],ProcessCategory:[],DepartmentId:"",FormSubject:"",Originator:"",SubmitStartDate:"",SubmitEndDate:"",approvers:"",SortField:"",SortDirection:"",pageSizesList:[10,20],pageIndex:1,pageSize:10},ProcessType:""}},methods:{burialPointEvent:function(e){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint(e)},loadMore:function(e){this.originatorPageIndex++,this.getUsers(e)},closeApproval:function(){this.$refs.carefulform.clearValidate()},ascertain:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.submitApproval()})},submitApproval:function(){var e=this;this.approvaldialog=!1;var t=[],a=!0,i=!1,s=void 0;try{for(var n,o=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.multipleSelection);!(a=(n=o.next()).done);a=!0){var r=n.value;t.push({SharedUser:r.SharedUser,WorkItemId:r.Id,Comment:this.carefulform.checkComment})}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}this.$axios.post("/Portal/WorkFlow/MutliApprove",t).then(function(t){t.data&&200===t.data.code&&(e.$store.dispatch("GETTODO"),e.$message.success("审批成功!")),e.getList()}).catch(function(t){e.$message.error("审批失败!ERROR MESSAGE:"+t.response.data.message)})},endProcess:function endProcess(){var _this5=this;this.endsDialog=!1;var snList=this.getSN(),sn=snList.join(","),procInstId=this.multipleSelection[0].procInstID;this.$axios.post("/api/stopProcessInstances",{procInstId:procInstId,sn:sn}).then(function(res){var data=eval("("+res.data.result+")");"4"===data.Status?(_this5.$message.success(""+data.Message),_this5.getList()):(_this5.$message.warning(""+data.Message),_this5.$refs.table.clearSelection())}).catch(function(e){_this5.$message.error("结束流程失败！"+e)})},getSN:function(){var e=[],t=!0,a=!1,i=void 0;try{for(var s,n=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.multipleSelection);!(t=(s=n.next()).done);t=!0){var o=s.value,r=o.viewUrl.substr(o.viewUrl.indexOf("SN=")+3,o.viewUrl.length);r=r.substr(0,r.indexOf("&")),e.push(r)}}catch(e){a=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw i}}return e},formatter:function(e){switch(e.dodoType){case"1":e.statusName="审批";break;case"2":e.statusName="授权";break;case"3":e.statusName="意见反馈";break;case"4":e.statusName="被退回";break;default:e.statusName=""}return e},sortChange:function(e){this.CriteriaModel.SortDirection=""+e.order.replace("ending",""),this.CriteriaModel.SortField=e.prop,this.pageIndex=1,this.getList()},renderIcon:function(e,t){t.column;return e("i",{class:"iconfont icon-process"})},getUsers:function(e){var t=this;this.originatorLoading=!0;var a=this;a.$axios.post("/api/getUser?pageIndex="+this.originatorPageIndex+"&pageSize="+this.originatorPageSize,{name:e,deptId:"",isWork:"1"}).then(function(e){t.originatorTotal=e.data.pageControllerInfo.totalRecordCount;for(var i=0;i<e.data.result.length;i++)a.orgStates.push({value:e.data.result[i].displayName,userId:e.data.result[i].adAccount,companyName:e.data.result[i].companyName,orgFullPath:e.data.result[i].orgNameFullPath,vankeId:e.data.result[i].vankeId});t.loading=!1,t.originatorLoading=!1}).catch(function(e){t.originatorLoading=!1,a.$message.error("查询列表数据失败!ERROR MESSAGE:"+e)})},querySearchUser:function(e){this.orgStates=[];var t=this;t.queryName=e,this.loading=!0,this.isSeach||(this.isSeach=!0,setTimeout(function(){t.isSeach=!1,t.validationInput(t.queryName)},2e3))},personChange:function(e){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-发起人输入框"),this.$set(this.$refs.userId,"query","");for(var t=0;t<e.length;t++){for(var a=!1,i=0;i<this.childDataUrl.selectedPerson.length;i++)e[t].userId&&this.childDataUrl.selectedPerson[i].userId!==e[t].userId||(a=!0);a||this.childDataUrl.selectedPerson.push(e[t])}},visibleChange:function(){this.orgStates=[]},removeUser:function(e){if(e.userId){for(var t=0;t<this.childDataUrl.selectedPerson.length&&e.userId!=this.childDataUrl.selectedPerson[t].userId;t++);this.childDataUrl.selectedPerson.splice(t,1)}else{for(t=0;t<this.childDataUrl.selectedPerson.length&&e!=this.childDataUrl.selectedPerson[t].value;t++);this.childDataUrl.selectedPerson.splice(t,1)}},validationInput:function(e){if(this.orgStates=[],""==e||0==e.length)return this.loading=!1,null;e==this.$refs.userId.query?this.getUsers(e):this.orgStates=[]},openDailog:function(e){this.componentParam.closeShow=!1,"originator_dailog"==e?(__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-发起人输入框"),this.oneCheck=!1,this.childDataUrl.getTree="getTree",this.childDataUrl.companytree="companytree/page"):"processSelection"==e&&(__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-流程类别"),this.componentParam.componentType=e,this.componentParam.oneCheck=!0),this.comp.component=e,this.showdialog=!0,__WEBPACK_IMPORTED_MODULE_7__js_util__.a.showDailog_mask()},hideComponent:function(){this.showdialog=!1,__WEBPACK_IMPORTED_MODULE_7__js_util__.a.hiddenDailog_mask()},showMsgfromchild:function(e){if(e.type&&"originator"==e.type){this.childDataUrl.selectedPerson=[],this.model.userName=[];var t=!0,a=!1,i=void 0;try{for(var s,n=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(e.peoArr);!(t=(s=n.next()).done);t=!0){for(var o=s.value,r=o.userId,l=o.vankeId,c=!1,d=0;d<this.childDataUrl.selectedPerson.length;d++)this.childDataUrl.selectedPerson[d].userId===r&&(c=!0);c||(this.childDataUrl.selectedPerson.push({userId:r,value:o.name,vankeId:l}),this.model.userName.push(o.name))}}catch(e){a=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw i}}}else if(e.type&&"processSelection"==e.type){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-流程类别"),this.componentParam.backfillData=e.list;var h=[],u=[],g=!0,f=!1,p=void 0;try{for(var m,v=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(e.list);!(g=(m=v.next()).done);g=!0){var y=m.value;u.push(y.name),h.push(y.processId+"")}}catch(e){f=!0,p=e}finally{try{!g&&v.return&&v.return()}finally{if(f)throw p}}this.model.selectForm.processFullName=h.join(","),this.processFormName=u.join("；")}this.hideComponent()},refresh:function(){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-重置按钮"),this.CriteriaModel.ProcessNum="",this.serachSlectData.tagsOwnProcess=[],this.serachSlectData.tagsOwnCategory=[],this.CriteriaModel.ProcessCategory=[],this.CriteriaModel.Originator="",this.CriteriaModel.DepartmentId="",this.CriteriaModel.FormSubject="",this.serachSlectData.tagsOrgSelect=[],this.serachSlectData.tagsOwnsUser=[],this.model.date=[]},inputValidate:function(e,t){var a=this,i=/^([0-9]*)([.]?|(\.\d{1,2})?)$/;"front"==e?i.test(t)||setTimeout(function(){a.model.selectForm.amountOfMoneyB=""},100):"back"==e&&(i.test(t)||setTimeout(function(){a.model.selectForm.amountOfMoneyE=""},100))},checkValidate:function(e,t){t=parseFloat(t);"front"==e?""!=this.model.selectForm.amountOfMoneyE&&t>parseFloat(this.model.selectForm.amountOfMoneyE)&&(this.model.selectForm.amountOfMoneyB=""):"back"==e&&""!=this.model.selectForm.amountOfMoneyB&&t<parseFloat(this.model.selectForm.amountOfMoneyB)&&(this.model.selectForm.amountOfMoneyE="")},search:function(){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-搜索按钮"),this.pageIndex=1,this.getList()},getList:function(){var e=this,t=this;if(null==t.model.date&&(t.model.date=[]),t.CriteriaModel.SubmitStartDate=t.model.date[0]?t.model.date[0]+" 00:00:00":"",t.CriteriaModel.SubmitEndDate=t.model.date[1]?t.model.date[1]+" 23:59:59":"",t.CriteriaModel.ProcessNum=t.CriteriaModel.ProcessNum.replace(/\s+/g,""),t.CriteriaModel.FormSubject=t.CriteriaModel.FormSubject.replace(/\s+/g,""),t.serachSlectData.tagsOwnsUser[0]?t.CriteriaModel.Originator=t.serachSlectData.tagsOwnsUser[0].UserAccount:t.CriteriaModel.Originator="",t.serachSlectData.tagsOrgSelect[0]?t.CriteriaModel.DepartmentId=t.serachSlectData.tagsOrgSelect[0].UserAccount:this.CriteriaModel.DepartmentId="",t.serachSlectData.tagsOwnProcess){t.CriteriaModel.ProcessCode=[];var a=!0,i=!1,s=void 0;try{for(var n,o=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.serachSlectData.tagsOwnProcess);!(a=(n=o.next()).done);a=!0){var r=n.value;t.CriteriaModel.ProcessCode.push(r.processCode)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}if(t.serachSlectData.tagsOwnCategory){t.CriteriaModel.ProcessCategory=[];var l=!0,c=!1,d=void 0;try{for(var h,u=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(t.serachSlectData.tagsOwnCategory);!(l=(h=u.next()).done);l=!0){var g=h.value;t.CriteriaModel.ProcessCategory.push(g.id)}}catch(e){c=!0,d=e}finally{try{!l&&u.return&&u.return()}finally{if(c)throw d}}}t.model.selectForm.SubmitStartDate<"1753-01-01"&&""!==t.model.selectForm.SubmitStartDate||t.model.selectForm.SubmitEndDate<"1753-01-01"&&""!==t.model.selectForm.SubmitEndDate?this.$message.warning("请选择1753-01-01 ~ 9999-12-31之间的日期"):(t.imgLoading=!0,t.$axios({url:"/Portal/WorkFlow/GetWorklistExpenseReimbursement",data:t.CriteriaModel,method:"post"}).then(function(a){200===a.data.code?(t.tableData=a.data.data.item,t.CriteriaModel.total=a.data.data.total):e.$message.error("请求失败！"),e.imgLoading=!1}).catch(function(t){e.imgLoading=!1,e.$message.error("审批失败!ERROR MESSAGE:"+t.response.data.message)}))},handleSizeChange:function(e){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-列表-每页显示条数按钮");var t=e;this.CriteriaModel.pageIndex=1,this.CriteriaModel.pageSize=parseInt(t),localStorage.todoPageSize=e,this.getList()},handleCurrentChange:function(e){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-列表-页码按钮"),this.CriteriaModel.pageIndex=e,this.getList()},tableHeaderClassName:function(e){e.row,e.rowIndex;return"table-head-th"},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 2==t.riskLevel?"orange-row":3==t.riskLevel?"red-row":""},handleSelectionChange:function(e){this.multipleSelection=e},choosenDialogType:function(e,t){this.typeTab=e,this.ProcessType=t,this.$refs.dialogChoosen.openChoosen(this.typeTab,t)},OpenDialog:function(e){this.Visible=e},CloseDialog:function(e){this.Visible=e},sendTag:function(e,t){if(e.length>0){var a=!0,i=!1,s=void 0;try{for(var n,o=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(e);!(a=(n=o.next()).done);a=!0){var r=n.value;if("User"===r.type)if(this.serachSlectData.tagsOwnsUser=[],this.serachSlectData.tagsOwnsUser.length>0){var l=!0,c=!1,d=void 0;try{for(var h,u=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.serachSlectData.tagsOwnsUser);!(l=(h=u.next()).done);l=!0){if(h.value.SysId===r.SysId)return;this.serachSlectData.tagsOwnsUser.push(r)}}catch(e){c=!0,d=e}finally{try{!l&&u.return&&u.return()}finally{if(c)throw d}}}else this.serachSlectData.tagsOwnsUser.push(r);else if("Process"===r.type)if(this.serachSlectData.tagsOwnProcess.length>0){var g=!0,f=!1,p=void 0;try{for(var m,v=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.serachSlectData.tagsOwnProcess);!(g=(m=v.next()).done);g=!0){m.value.id!==r.id&&this.serachSlectData.tagsOwnProcess.push(r)}}catch(e){f=!0,p=e}finally{try{!g&&v.return&&v.return()}finally{if(f)throw p}}}else this.serachSlectData.tagsOwnProcess.push(r);else if("Category"===r.type)if(this.serachSlectData.tagsOwnCategory.length>0){var y=!0,_=!1,T=void 0;try{for(var C,b=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.serachSlectData.tagsOwnCategory);!(y=(C=b.next()).done);y=!0){C.value.id!==r.id&&this.serachSlectData.tagsOwnCategory.push(r)}}catch(e){_=!0,T=e}finally{try{!y&&b.return&&b.return()}finally{if(_)throw T}}}else this.serachSlectData.tagsOwnCategory.push(r);else if(this.serachSlectData.tagsOrgSelect=[],this.serachSlectData.tagsOrgSelect.length>0){var S=!0,P=!1,k=void 0;try{for(var x,w=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.serachSlectData.tagsOrgSelect);!(S=(x=w.next()).done);S=!0){x.value.SysId!==r.SysId&&this.serachSlectData.tagsOrgSelect.push(r)}}catch(e){P=!0,k=e}finally{try{!S&&w.return&&w.return()}finally{if(P)throw k}}}else this.serachSlectData.tagsOrgSelect.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}else switch(t){case"Process":this.serachSlectData.tagsOwnProcess=[];break;case"Category":this.serachSlectData.tagsOwnCategory=[];break;case"User":this.serachSlectData.tagsOwnsUser=[];break;case"Org":this.serachSlectData.tagsOrgSelect=[]}},closeProcessTag:function(e){switch(e.type){case"Process":var t=this.serachSlectData.tagsOwnProcess.indexOf(e);this.serachSlectData.tagsOwnProcess.splice(t,1),this.$refs.dialogChoosen.portalehco(this.serachSlectData.tagsOwnProcess);break;case"Category":var a=this.serachSlectData.tagsOwnCategory.indexOf(e);this.serachSlectData.tagsOwnCategory.splice(a,1),this.$refs.dialogChoosen.portalehco(this.serachSlectData.tagsOwnCategory);break;case"User":var i=this.serachSlectData.tagsOwnsUser.indexOf(e);this.serachSlectData.tagsOwnsUser.splice(i,1),this.CriteriaModel.Originator="",this.$refs.dialogChoosen.portalehco(this.serachSlectData.tagsOwnsUser,null);break;case"Org":var s=this.serachSlectData.tagsOrgSelect.indexOf(e);this.serachSlectData.tagsOrgSelect.splice(s,1),this.CriteriaModel.DepartmentId="",this.$refs.dialogChoosen.portalehco(this.serachSlectData.tagsOrgSelect,null)}},jumpToView:function(e){window.open(e.FlowViewUrl,"_blank"),document.getElementById("dailog_mask").style.display="none"},folioBlank:function(e){window.open(e.Url,"_blank")},checkBoxForm:function(e,t){return e.IsBatchApproval?1:0}},watch:{"model.userName":{handler:function(e,t){var a=this.$refs.userId;__WEBPACK_IMPORTED_MODULE_7__js_util__.a.inputHeight(e,a),this.dataTitle="";for(var i=0;i<e.length;i++)"object"==__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_typeof___default()(e[i])?this.dataTitle+=e[i].value+",":"string"==typeof e[i]&&(this.dataTitle+=e[i]+",");this.dataTitle=this.dataTitle.substr(0,this.dataTitle.length-1)},deep:!0},Visible:{handler:function(e,t){if(e){switch(this.typeTab){case"User":this.echoData=[].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(this.serachSlectData.tagsOwnsUser));break;case"Org":this.echoData=[].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(this.serachSlectData.tagsOrgSelect))}switch(this.ProcessType){case"Process":this.echoData=[].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(this.serachSlectData.tagsOwnProcess));break;case"Category":this.echoData=[].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(this.serachSlectData.tagsOwnCategory))}}}}},computed:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({bodyHeight:function(){return document.documentElement.clientHeight}},Object(__WEBPACK_IMPORTED_MODULE_4_vuex__.b)(["isIE","todoCount","isSafari","bodyHeight"]))}},730:function(e,t){},771:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(720),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],staticClass:"todoProcess loadingtext",attrs:{"element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[a("el-container",[a("el-header",{staticStyle:{height:"100px"}},[a("div",{staticClass:"top-header"},[a("p",{staticClass:"top-breadCrumb"},[e._v("我的费用报销")]),e._v(" "),a("el-row",{staticClass:"searchCom",attrs:{type:"flex"}},[a("el-col",{attrs:{span:24}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"75px"}},[a("el-col",[a("el-form-item",{attrs:{label:"编号"}},[a("el-input",{staticClass:"inputCom",attrs:{round:"","prefix-icon":"el-icon-search",placeholder:"编号",size:"mini",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null},click:function(t){e.burialPointEvent("我的待办-输入条件-搜索输入框")}},model:{value:e.CriteriaModel.ProcessNum,callback:function(t){e.$set(e.CriteriaModel,"ProcessNum",t)},expression:"CriteriaModel.ProcessNum"}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"75px"}},[a("el-col",[a("el-form-item",{attrs:{label:"主题"}},[a("el-input",{staticClass:"inputCom",attrs:{round:"","prefix-icon":"el-icon-search",placeholder:"主题",size:"mini",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null},click:function(t){e.burialPointEvent("我的待办-输入条件-搜索输入框")}},model:{value:e.CriteriaModel.FormSubject,callback:function(t){e.$set(e.CriteriaModel,"FormSubject",t)},expression:"CriteriaModel.FormSubject"}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-col",[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"申请人"}},[a("el-input",{staticClass:"microcheiria ",staticStyle:{width:"98%"},attrs:{readonly:"readonly",size:"mini"},on:{focus:function(t){e.choosenDialogType("User")}}},[e._l(e.serachSlectData.tagsOwnsUser,function(t,i){return a("el-tag",{key:i,attrs:{slot:"prefix",size:"mini",closable:""},on:{close:function(a){e.closeProcessTag(t)}},slot:"prefix"},[e._v("\n                          "+e._s(t.UserDisplayName)+"\n                        ")])}),e._v(" "),a("i",{staticClass:"iconfont icon-member",attrs:{slot:"suffix"},on:{click:function(t){e.choosenDialogType("User")}},slot:"suffix"})],2)],1)],1)],1)],1),e._v(" "),a("el-col",{staticClass:"sererchBtn",attrs:{span:6}},[a("el-button",{staticClass:"searchBtn",attrs:{round:"",type:"primary",size:"mini"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"searchReset",attrs:{round:"",type:"primary",size:"mini"},on:{click:e.refresh}},[e._v("重置\n                ")]),e._v(" "),a("el-button",{staticClass:"searchMore",attrs:{round:"",type:"primary",size:"mini"},on:{click:function(t){e.showList=!e.showList,e.burialPointEvent("我的待办-输入条件-更多筛选按钮")}}},[e._v("\n                  更多筛选\n                ")])],1)],1)],1)],1)],1)]),e._v(" "),a("el-main",[a("div",{staticClass:"mainContaint"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showList,expression:"showList"}],staticClass:"todoProcess-screenList screenList-box",class:{screenList_box_ie:e.isIE}},[a("el-form",{ref:"selectForm",staticClass:"todoForm",attrs:{model:e.model.selectForm,inline:!0,"label-width":"110px",size:"mini"}},[a("el-row",{attrs:{type:""}},[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发起时段"}},[a("div",{staticClass:"money-box"},[a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptionsBefore,placeholder:"选择日期"},model:{value:e.model.date[0],callback:function(t){e.$set(e.model.date,0,t)},expression:"model.date[0]"}})],1),e._v(" "),a("el-form-item",[e._v("~")]),e._v(" "),a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",staticStyle:{float:"right"},attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptionsAfter,placeholder:"选择日期"},model:{value:e.model.date[1],callback:function(t){e.$set(e.model.date,1,t)},expression:"model.date[1]"}})],1)],1)])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags parsePerson",attrs:{label:"流程名称"}},[a("el-input",{staticClass:"microcheiria ",staticStyle:{width:"103%"},attrs:{readonly:"readonly",size:"mini"},on:{focus:function(t){e.choosenDialogType("Process","Process")}}},[e._l(e.serachSlectData.tagsOwnProcess,function(t,i){return a("el-tag",{key:i,attrs:{slot:"prefix",size:"mini",closable:""},on:{close:function(a){e.closeProcessTag(t)}},slot:"prefix"},[e._v("\n                      "+e._s(t.processName)+"\n                    ")])}),e._v(" "),a("i",{staticClass:"iconfont icon-member",attrs:{slot:"suffix"},on:{click:function(t){e.choosenDialogType("Process","Process")}},slot:"suffix"})],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags parsePerson",attrs:{label:"流程类别"}},[a("el-input",{staticClass:"microcheiria ",attrs:{readonly:"readonly",size:"mini"},on:{focus:function(t){e.choosenDialogType("Process","Category")}}},[e._l(e.serachSlectData.tagsOwnCategory,function(t,i){return a("el-tag",{key:i,attrs:{slot:"prefix",size:"mini",closable:""},on:{close:function(a){e.closeProcessTag(t)}},slot:"prefix"},[e._v("\n                      "+e._s(t.categoryName)+"\n                    ")])}),e._v(" "),a("i",{staticClass:"iconfont icon-member",attrs:{slot:"suffix"},on:{click:function(t){e.choosenDialogType("Process","Category")}},slot:"suffix"})],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}})],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags parsePerson",attrs:{label:"申请人部门"}},[a("el-input",{staticClass:"microcheiria",staticStyle:{width:"103%"},attrs:{id:"checkedPersons",readonly:"readonly",size:"mini"},on:{focus:function(t){e.choosenDialogType("Org")}}},[e._l(e.serachSlectData.tagsOrgSelect,function(t,i){return a("el-tag",{key:i,attrs:{slot:"prefix",size:"mini",closable:""},on:{close:function(a){e.closeProcessTag(t)}},slot:"prefix"},[e._v("\n                        "+e._s(t.UserDisplayName)+"\n                      ")])}),e._v(" "),a("i",{staticClass:"iconfont icon-member",attrs:{slot:"suffix"},on:{click:function(t){e.choosenDialogType("Org")}},slot:"suffix"})],2)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"todoProcess-main"},[a("el-row",{staticClass:"listButton",attrs:{type:"flex",justify:"end"}},[a("el-button",{staticClass:"upload",attrs:{round:"",disabled:0==e.multipleSelection.length,type:"primary",icon:"iconfont  icon-end-icon",size:"mini"},on:{click:function(t){e.approvaldialog=!0,e.burialPointEvent("我的待办-操作-批量审批")}}},[e._v("批量审批\n            ")])],1),e._v(" "),a("div",{staticClass:"list",class:{table_safari:e.isSafari}},[a("el-table",{ref:"table",attrs:{data:e.tableData,height:e.showList?e.bodyHeight-295:e.bodyHeight-210,border:"","header-row-class-name":e.tableHeaderClassName,size:"mini","row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"sort-change":e.sortChange}},[a("el-table-column",{attrs:{type:"selection",width:"44px",selectable:e.checkBoxForm}}),e._v(" "),a("el-table-column",{attrs:{prop:"icon",width:"44px","render-header":e.renderIcon,label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"iconfont icon-process",on:{click:function(a){e.jumpToView(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Folio",label:"流程单号",width:"150px",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"table-popover folio",on:{click:function(a){e.folioBlank(t.row)}}},[e._v(e._s(t.row.Folio))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"UrgencyName",label:"紧急度",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.UrgencyName)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ProcessName","min-width":"150px",align:"center",label:"流程名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-popover",attrs:{title:t.row.ProcessName}},[e._v(e._s(t.row.ProcessName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"FormSubject","min-width":"200px",align:"center",label:"流程主题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{disabled:!t.row.Summary,placement:"right",color:"rgb(166, 176, 185)",effect:"light"}},[a("div",{staticClass:"table-popover folio",attrs:{target:"view_window"},on:{click:function(a){e.folioBlank(t.row)}}},[e._v(e._s(t.row.FormSubject)+"\n                    ")]),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"toolTipContent"},[a("div",{domProps:{innerHTML:e._s(t.row.Summary)}})])])])]}}])}),e._v(" "),a("el-table-column",{staticClass:"originator",attrs:{prop:"ApplicantDisplayName",width:"140px",label:"发起人",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-popover",attrs:{title:t.row.ApplicantDisplayName}},[e._v(e._s(t.row.ApplicantDisplayName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ActivityDisplayName","min-width":"150px",align:"center",label:"节点名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-popover",attrs:{title:t.row.ActivityDisplayName}},[e._v(e._s(t.row.ActivityDisplayName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"StartDate",width:"150px",label:"开始时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.SubmitDate,"YYYY-MM-DD HH:mm")))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"StartDate",width:"150px",label:"任务到达时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.StartDate,"YYYY-MM-DD HH:mm")))]}}])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.imgLoading,expression:"!imgLoading"}],attrs:{slot:"empty"},slot:"empty"},[a("p",{style:{marginTop:"23px"}},[e._v("暂无数据")])]),e._v(" "),a("div",{attrs:{slot:"append"},slot:"append"},[e.tableData.length>0?a("page",{attrs:{pageIndex:e.CriteriaModel.pageIndex,total:e.CriteriaModel.total,pageSize:e.CriteriaModel.pageSize,pageSizesList:e.CriteriaModel.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}}):e._e()],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"message-dialog",attrs:{visible:e.endsDialog,title:"结束流程","close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.endsDialog=t}}},[a("span",{staticStyle:{"text-align":"left"}},[e._v("您确认需要结束该流程？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.endProcess}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:function(t){e.endsDialog=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{staticClass:"message-dialog approvaldialog",attrs:{visible:e.approvaldialog,title:"批量审批","close-on-click-modal":!1,id:"wait-opinion-dialog"},on:{"update:visible":function(t){e.approvaldialog=t},close:e.closeApproval}},[a("el-form",{ref:"carefulform",attrs:{model:e.carefulform,rules:e.rules,"label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"审批意见",prop:"checkComment"}},[a("el-input",{attrs:{type:"textarea",rows:8},model:{value:e.carefulform.checkComment,callback:function(t){e.$set(e.carefulform,"checkComment",t)},expression:"carefulform.checkComment"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"办理人："}},[a("span",[e._v(e._s(e.carefulform.userName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"办理时间："}},[a("span",[e._v(e._s(e.carefulform.handtime))])])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-circle-check-outline",size:"mini"},on:{click:function(t){e.ascertain("carefulform")}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:function(t){e.approvaldialog=!1}}},[e._v("取 消")])],1)],1)],1)]),e._v(" "),a("choosen",{ref:"dialogChoosen",attrs:{typeTab:e.typeTab,Visible:e.Visible,ProcessType:e.ProcessType,portalmMtilselectCheck:e.portalmMtilselectCheck},on:{OpenDialog:e.OpenDialog,sendTag:e.sendTag,CloseDialog:e.CloseDialog}})],1)],1)],1)},staticRenderFns:[]};var n=function(e){a(730)},o=a(47)(i.a,s,!1,n,"data-v-410eb98c",null);t.default=o.exports}});