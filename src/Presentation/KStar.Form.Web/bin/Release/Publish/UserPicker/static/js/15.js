webpackJsonp([15],{685:function(e,t,i){"use strict";var a={name:"page",props:{pageIndex:{type:Number,default:1,required:!0},pageSize:{type:Number,default:1,required:!0},total:{type:Number,default:0,required:!0},pageSizesList:{type:Array,required:!0}},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},firstPage:function(){this.pageIndex=1},tailPage:function(){this.pageIndex=this.$refs.page.internalPageCount}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page"},[i("el-pagination",{ref:"page",attrs:{background:"","current-page":e.pageIndex,"page-sizes":e.pageSizesList,"page-size":e.pageSize,"prev-text":e.$t("UserPicker.HomePage"),"next-text":e.$t("UserPicker.TailPage"),layout:"total, prev, pager, next, sizes",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"prev-click":e.firstPage,"next-click":e.tailPage}})],1)},staticRenderFns:[]};var r=i(47)(a,s,!1,function(e){i(687)},"data-v-18a42a56",null).exports;t.a=r},687:function(e,t){},688:function(e,t,i){"use strict";var a,s=i(360),r=i.n(s),n=i(163),o=i.n(n),c=i(160),l=i.n(c),d=i(357),h=i(67),p={name:"",props:{componentParam:{componentType:{type:String,required:!0},childDataUrl:{type:Object,required:!0},backfillData:{type:Array,default:new Array,required:!0},assemblyParam:{type:Object,required:!0},checkProcess:{type:Boolean,default:!1,required:!0},oneCheck:{type:Boolean,default:!1,required:!0},closeShow:{type:Boolean,default:!0,required:!0},type:Object,required:!0}},mounted:function(){if(this.componentParam.backfillData.length>0){var e=!0,t=!1,i=void 0;try{for(var a,s=l()(this.componentParam.backfillData);!(e=(a=s.next()).done);e=!0){var r=a.value;this.selectedCities.push(r)}}catch(e){t=!0,i=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw i}}}},data:function(){return{checkedCities:[],selectedCities:[],processName:"",organizeProcessName:"",organName:"",selectOrgs:[],isActive:!1,checkAll:!1,cities:[],treeSearch:"",treeList:[],rootNode:{},defaultProps:{id:"id",children:"Child",label:"name"},tooltiprocessName:"",defaultKeys:[],currentId:"",isIndeterminate:!1,props:{label:"orgName",value:"orgID",children:"m_ChildOrg"},organizeList:[],activeOrganizeName:[],organizeName:"",organize:{orgID:""},imgLoading:!1}},watch:{treeSearch:function(e){this.debouncedSearchTree()}},created:function(e){var t=this;t.debouncedSearchTree=Object(d.debounce)(t.searchTree,2e3),t.debouncedGetProcess=Object(d.debounce)(t.getProcess,200,e),t.imgLoading=!0,o.a.all([t.getOrganizeList(),t.getUserOrganize()]).then(function(e){if(e[0]){t.organize.orgID=e[1]||t.organizeList[0].orgID;var i=t.$refs.orgtree.getNode(t.organize.orgID);i&&(t.$refs.orgtree.setCurrentKey(t.organize.orgID),t.setOrganize(i)),t.getCategoryOfOrganize(t.organize.orgID).then(function(){t.imgLoading=!1})}}).catch(function(e){t.imgLoading=!1,t.$message.error(e)})},methods:(a={selectTreeClick:function(e,t){var i=this;this.processName="",this.tooltiprocessName="",i.$refs.selectTree.visible=!1,i.organize=e,i.setOrganize(t),i.imgLoading=!0,i.getCategoryOfOrganize(e.orgID).then(function(){i.imgLoading=!1}),i.cities=[],i.checkAll=!1,i.isIndeterminate=!1},setOrganize:function(e){this.activeOrganizeName=[],this.getOrgPrarentNode(e),this.organizeName=this.activeOrganizeName.reverse().join("/"),this.organizeProcessName=this.activeOrganizeName.join(">")+">"},getUserOrganize:function(){var e=this;return new o.a(function(t,i){e.$axios.post("/api/getorg",{}).then(function(e){if(e.data.getOrgList.length>0){var i=e.data.getOrgList[0].orgid;t(i)}else t(null)}).catch(function(e){i("获取用户所在部门失败!ERROR MESSAGE:"+e)})})},getOrganizeList:function(){var e=this;return new o.a(function(t,i){e.$axios.post("/api/companytree/page",{}).then(function(i){i.data.companyTreeList.length>0?(e.organizeList=i.data.companyTreeList,t(!0)):t(!1)}).catch(function(e){i("获取组织数据失败!ERROR MESSAGE:"+e)})})},getCategoryOfOrganize:function(e){var t=this,i={orgId:e,isUse:1,name:t.treeSearch.trim(),isHide:1,isDailog:"1"};return new o.a(function(e,a){t.$axios.post("/api/processCategory",i).then(function(i){if(0==i.data.result.length)t.treeList=[];else{for(var a=h.a.toTree(i.data.result,"id","pid","Child"),s=0;s<a.length;s++)0!=a[s].pid&&(a.splice(s,1),s--);t.treeList=a}e(!0)}).catch(function(e){a("查询列表数据失败!ERROR MESSAGE:"+e)})})},getOrgPrarentNode:function(e){void 0!=e.data.orgName&&this.activeOrganizeName.push(e.data.orgName),void 0!=e.parent&&this.getOrgPrarentNode(e.parent)},enterSearch:function(){this.defaultKeys=[],this.debouncedSearchTree()},searchTree:function(){var e=this;if(e.defaultKeys=[],""==e.treeSearch.trim())return e.imgLoading=!0,void e.getCategoryOfOrganize(e.organize.orgID).then(function(){e.imgLoading=!1});""!=e.organize.orgID?e.searchProcessCategory():e.$message.warning("请先选择组织进行搜索！")},searchProcessCategory:function(){var e=this;e.treeList.splice(0,e.treeList.length),e.cities.splice(0,e.cities.length),e.checkAll=!1,e.isIndeterminate=!1;var t={isCategory:"",isDailog:1,isHide:1,isUse:1,name:e.treeSearch.trim(),id:"",orgId:e.organize.orgID};e.imgLoading=!0,e.$axios.post("/api/processCategoryTree",t).then(function(t){if(0==t.data.result.length)e.treeList=[];else{var i=h.a.toTree(t.data.result,"id","pid","Child");e.treeList=i,e.getdefaultKeys(i)}e.imgLoading=!1}).catch(function(t){e.imgLoading=!1,e.$message.error("搜索组织流程失败！"+t)})},getProcess:function(e){if(e){var t=this,i=t.getSelectProcessId(t.selectedCities),a={isCategory:"0",isDailog:1,isHide:1,isUse:1,name:"",id:e.data.id,orgId:t.organize.orgID};t.imgLoading=!0,t.$axios.post("/api/processCategoryTree",a).then(function(e){t.displayProcess(e.data.result,i),t.imgLoading=!1}).catch(function(e){t.imgLoading=!1,t.$message.error("连接服务器失败！"+e)})}},handleNodeClick:function(e,t){if(0==this.treeSearch.trim().length)this.debouncedGetProcess(t);else if(this.treeSearch.trim().length>0){var i=this.getSelectProcessId(this.selectedCities),a=[];e.Child?a=e.Child:a.push(e),this.displayProcess(a,i)}this.selectOrgs=[],this.getPrarentNode(t),this.disposeOrganName(e.name)},getdefaultKeys:function(e){var t=!0,i=!1,a=void 0;try{for(var s,r=l()(e);!(t=(s=r.next()).done);t=!0){var n=s.value;n.hasOwnProperty("Child")&&n.Child.length>0&&(this.defaultKeys.push(n.id),this.getdefaultKeys(n.Child))}}catch(e){i=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw a}}},displayProcess:function(e,t){this.cities.splice(0,this.cities.length),this.checkedCities=[],this.checkAll=!1,this.isIndeterminate=!1;var i=!0,a=!1,s=void 0;try{for(var r,n=l()(e);!(i=(r=n.next()).done);i=!0){var o=r.value;o.processId&&"0"!==o.processId&&null!==o.processId&&(t.indexOf(o.processId)>-1&&this.checkedCities.push(o),this.cities.push(o))}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}var c=this.getId(this.cities),d=0,h=!0,p=!1,g=void 0;try{for(var u,m=l()(this.checkedCities);!(h=(u=m.next()).done);h=!0){var f=u.value;-1!==c.indexOf(f.id)&&d++}}catch(e){p=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(p)throw g}}this.checkAll=d>0&&d===this.cities.length,this.isIndeterminate=this.checkedCities.length>0&&this.checkedCities.length<this.cities.length},dblclickCheckedCitie:function(e){this.clickDepartment(e),this.$emit("sureSubmit",{type:this.componentParam.componentType,list:this.selectedCities})},clickDepartment:function(e){this.selectedCities.splice(0,this.selectedCities.length),this.selectedCities.push(e),this.checkedCities.splice(0,this.checkedCities.length),this.checkedCities.push(e);var t=this.$refs.processTree.getNode(e.pid);this.selectOrgs=[],this.getPrarentNode(t),e.tooltiprocessName=this.disposeOrganName(e.name)},handleCheckAllChange:function(e){this.checkedCities=[];var t=this.getSelectProcessId(this.selectedCities);if(e){var i=!0,a=!1,s=void 0;try{for(var r,n=l()(this.cities);!(i=(r=n.next()).done);i=!0){var o=r.value;-1===t.indexOf(o.processId)&&this.selectedCities.push(o),this.checkedCities.push(o)}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}this.checkAll=!0,this.isIndeterminate=!1}else{var c=!0,d=!1,h=void 0;try{for(var p,g=l()(this.cities);!(c=(p=g.next()).done);c=!0){var u=p.value;if(t.indexOf(u.processId)>-1){var m=-1;for(var f in this.selectedCities)this.selectedCities[f].processId==u.processId&&(m=f);-1!=m&&this.selectedCities.splice(m,1)}}}catch(e){d=!0,h=e}finally{try{!c&&g.return&&g.return()}finally{if(d)throw h}}this.checkAll=!1,this.isIndeterminate=!1}},handleCheckedCitiesChange:function(e){this.isIndeterminate=!1;var t=[],i=!0,a=!1,s=void 0;try{for(var r,n=l()(this.selectedCities);!(i=(r=n.next()).done);i=!0){var o=r.value;t.push(o)}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}this.selectedCities.splice(0,this.selectedCities.length);var c=this.getId(this.cities),d=[];for(var h in t)-1==c.indexOf(t[h].id)&&d.push(t[h]);this.selectedCities=d;var p=[],g=!0,u=!1,m=void 0;try{for(var f,v=l()(e);!(g=(f=v.next()).done);g=!0){var C=f.value;p.tooltiprocessName=this.disposeOrganName(C.name)}}catch(e){u=!0,m=e}finally{try{!g&&v.return&&v.return()}finally{if(u)throw m}}var y=this.getSelectProcessId(this.selectedCities),k=!0,b=!1,I=void 0;try{for(var x,_=l()(e);!(k=(x=_.next()).done);k=!0){var D=x.value;-1===y.indexOf(D.processId)&&this.selectedCities.push(D)}}catch(e){b=!0,I=e}finally{try{!k&&_.return&&_.return()}finally{if(b)throw I}}var z=0,N=!0,w=!1,O=void 0;try{for(var S,L=l()(e);!(N=(S=L.next()).done);N=!0){var P=S.value;-1!==c.indexOf(P.id)&&z++}}catch(e){w=!0,O=e}finally{try{!N&&L.return&&L.return()}finally{if(w)throw O}}this.checkedCities=e,this.checkAll=z===this.cities.length,this.isIndeterminate=z>0&&z<this.cities.length},pullBtnHeightChange:function(){this.isActive=!this.isActive},sureSubmit:function(){this.$emit("sureSubmit",{type:this.componentParam.componentType,list:this.selectedCities})},getSelectProcessId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var r,n=l()(e);!(i=(r=n.next()).done);i=!0){var o=r.value;t.push(o.processId)}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}return t},getId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var r,n=l()(e);!(i=(r=n.next()).done);i=!0){var o=r.value;t.push(o.id)}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}return t}},r()(a,"pullBtnHeightChange",function(){this.isActive=!this.isActive}),r()(a,"close",function(){this.$emit("hideComponent")}),r()(a,"deleteDept",function(e){for(var t in this.checkAll=!1,this.isIndeterminate=!1,this.checkedCities)this.checkedCities[t].id==this.selectedCities[e].id&&this.checkedCities.splice(t,1);this.selectedCities.splice(e,1),this.checkAll=this.checkedCities.length===this.cities.length&&this.cities.length>0,this.isIndeterminate=this.checkedCities.length>0&&this.checkedCities.length<this.cities.length}),r()(a,"clearDept",function(){this.checkedCities.splice(0,this.checkedCities.length),this.selectedCities.splice(0,this.selectedCities.length),this.checkAll=!1,this.isIndeterminate=!1}),r()(a,"disposeOrganName",function(e){var t="",i=!0,a=!1,s=void 0;try{for(var r,n=l()(this.selectOrgs);!(i=(r=n.next()).done);i=!0){t+=r.value.text+" > "}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}return t=(t=t.trim()).substr(0,t.length-1),this.tooltiprocessName=t,t.length>30?this.processName=t.substr(0,30)+"...":this.processName=t,t}),r()(a,"getPrarentNode",function(e){e&&(e.data&&void 0!=e.data.name&&this.selectOrgs.unshift({text:""+e.data.name,petId:""+e.data.id,PID:""+e.data.pid}),void 0!=e.parent&&this.getPrarentNode(e.parent))}),a)},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"originater_dialog newProcess_dialog"},[i("div",{class:[e.componentParam.closeShow?"pc-candidates":"pc-candidates pc-background"]},[i("div",{staticClass:"dialog_content"},[i("el-main",{staticStyle:{position:"relative"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.componentParam.closeShow,expression:"!componentParam.closeShow"}],staticClass:"top"},[e._v("流程选择\n          "),i("span",{staticStyle:{"font-size":"30px",cursor:"pointer"},on:{click:e.close}},[e._v("×")])]),e._v(" "),i("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],attrs:{type:"card","element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[i("el-tab-pane",{staticClass:"candidates-recently"},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-todos"}),e._v(" 流程")]),e._v(" "),i("div",{staticClass:"title  title-border"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right",title:e.organizeProcessName+e.tooltiprocessName}},[i("el-breadcrumb-item",[e._v("流程选择")]),e._v(" "),i("el-breadcrumb-item",{staticStyle:{overflow:"hidden","-ms-text-overflow":"ellipsis","text-overflow":"ellipsis","white-space":"nowrap",width:"300px",display:"inline-block"}},[e._v(e._s(e.organizeProcessName)+e._s(e.processName))])],1),e._v(" "),i("span",{staticClass:"rightInput"},[i("el-input",{attrs:{placeholder:"请输入流程关键字","prefix-icon":"el-icon-search",size:"mini"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.enterSearch(t):null}},model:{value:e.treeSearch,callback:function(t){e.treeSearch=t},expression:"treeSearch"}})],1)],1),e._v(" "),i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"content-left",staticStyle:{position:"relative"}},[i("div",{staticClass:"title"},[i("el-form",{staticClass:"demo-form-inline init-organize-box",staticStyle:{width:"100%"},attrs:{inline:!0}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:""}},[i("el-select",{ref:"selectTree",staticStyle:{width:"100%"},attrs:{placeholder:"组织","popper-class":"tree-list-box"},model:{value:e.organizeName,callback:function(t){e.organizeName=t},expression:"organizeName"}},[i("el-option",{staticStyle:{height:"auto",padding:"0px 0px"},attrs:{value:"",disabled:!0}},[i("div",[i("el-tree",{ref:"orgtree",attrs:{data:e.organizeList,"highlight-current":!0,"node-key":"orgID","default-expand-all":"","expand-on-click-node":!1,"empty-text":"暂无数据",props:e.props},on:{"node-click":e.selectTreeClick}})],1)])],1)],1)],1)],1),e._v(" "),e.treeList.length>0?i("el-tree",{ref:"processTree",attrs:{data:e.treeList,"node-key":"id","highlight-current":!0,props:e.defaultProps,"empty-text":"","expand-on-click-node":!1,"default-expanded-keys":e.defaultKeys},on:{"node-click":e.handleNodeClick}}):e._e(),e._v(" "),0===e.treeList.length?i("div",{staticStyle:{position:"absolute",top:"50%",left:"50%","-webkit-transform":"translate(-50%, -50%)","-moz-transform":"translate(-50%, -50%)","-ms-transform":"translate(-50%, -50%)","-o-transform":"translate(-50%, -50%)",transform:"translate(-50%, -50%)"}},[e._v("\n                  暂无数据\n                ")]):e._e()],1),e._v(" "),i("div",{staticClass:"content-right",staticStyle:{position:"relative"}},[e.componentParam.oneCheck?e._e():i("el-checkbox",{staticStyle:{"padding-top":"6px","padding-left":"20px"},attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n                ")]),e._v(" "),e.componentParam.oneCheck?i("el-checkbox-group",{staticClass:"theRadio",model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return i("el-checkbox-button",{key:t.id,attrs:{label:t,checked:t.checked}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body",on:{click:function(i){e.clickDepartment(t)},dblclick:function(i){e.dblclickCheckedCitie(t)}}},[i("h4",{staticClass:"media-heading iconfont icon-process1",attrs:{title:t.name}},[e._v(e._s(t.name.length>30?t.name.substr(0,30)+"...":t.name))])])])])})):i("el-checkbox-group",{staticClass:"mut-check",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return i("el-checkbox",{key:t.id,attrs:{label:t,checked:t.checked}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body"},[i("h4",{staticClass:"media-heading",attrs:{title:t.name}},[e._v(e._s(t.name.length>30?t.name.substr(0,30)+"...":t.name))])])])])})),e._v(" "),0===e.cities.length?i("div",{staticStyle:{position:"absolute",top:"50%",left:"50%","-webkit-transform":"translate(-50%, -50%)","-moz-transform":"translate(-50%, -50%)","-ms-transform":"translate(-50%, -50%)","-o-transform":"translate(-50%, -50%)",transform:"translate(-50%, -50%)"}},[e._v("\n                  暂无数据\n                ")]):e._e()],1)]),e._v(" "),i("div",{staticClass:"addrecently-box",class:{pullup:e.isActive}},[i("div",{staticClass:"addrecently"},[i("div",{staticClass:"media"},[i("div",{staticClass:"pull",on:{click:e.pullBtnHeightChange}}),e._v(" "),i("ul",{staticClass:"clearfix"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedCities.length>0,expression:"selectedCities.length>0"}],staticClass:"clearBtn",on:{click:e.clearDept}}),e._v(" "),e._l(e.selectedCities,function(t,a){return i("li",{key:a},[i("div",{staticClass:"media-body"},[i("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.deleteDept(a)}}}),e._v(" "),i("span",{staticClass:"media-heading"},[e._v(e._s(t.name))])])])})],2)])])]),e._v(" "),i("div",{staticClass:"addrecently-footer"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.sureSubmit}},[e._v("确定\n              ")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:e.close}},[e._v("取消")])],1)])],1)],1)],1)])])},staticRenderFns:[]};var u=i(47)(p,g,!1,function(e){i(689)},"data-v-2617991c",null);t.a=u.exports},689:function(e,t){},690:function(e,t,i){"use strict";var a,s=i(360),r=i.n(s),n=i(160),o=i.n(n),c=i(163),l=i.n(c),d=(i(357),i(67)),h={name:"processClassification",props:{componentParam:{componentType:{type:String,required:!0},backfillData:{type:Array,default:new Array,required:!0},oneCheck:{type:Boolean,default:!1,required:!0},closeShow:{type:Boolean,default:!0,required:!0},type:Object,required:!0}},data:function(){return{tooltipclassificationName:"",classificationName:"",treeSearch:"",treeList:[],defaultKeys:[],defaultProps:{id:"id",children:"Child",label:"name"},checkedCities:[],selectedCities:[],selectOrgs:[],isActive:!1,checkAll:!1,isIndeterminate:!1,cities:[],currentId:"",rootNode:{},oldtime:0,props:{label:"orgName",value:"orgID",children:"m_ChildOrg"},organizeList:[],activeOrganizeName:[],organizeName:"",organize:{orgID:""},imgLoading:!1}},watch:{treeSearch:function(e){this.$refs.classificationTree.filter(e.trim())}},created:function(e){var t=this;t.imgLoading=!0,l.a.all([t.getOrganizeList(),t.getUserOrganize()]).then(function(e){if(e[0]){t.organize.orgID=e[1]||t.organizeList[0].orgID;var i=t.$refs.orgtree.getNode(t.organize.orgID);i&&(t.$refs.orgtree.setCurrentKey(t.organize.orgID),t.setOrganize(i)),t.getCategoryOfOrganize(t.organize.orgID).then(function(){t.imgLoading=!1})}}).catch(function(e){t.imgLoading=!1,t.$message.error(e)})},mounted:function(){if(this.componentParam.backfillData.length>0){var e=!0,t=!1,i=void 0;try{for(var a,s=o()(this.componentParam.backfillData);!(e=(a=s.next()).done);e=!0){var r=a.value;this.selectedCities.push(r)}}catch(e){t=!0,i=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw i}}}},methods:(a={selectTreeClick:function(e,t){var i=this;i.$refs.selectTree.visible=!1,i.organize=e,i.setOrganize(t),i.imgLoading=!0,i.getCategoryOfOrganize(e.orgID).then(function(){i.imgLoading=!1}),i.cities=[],i.checkAll=!1,i.isIndeterminate=!1},setOrganize:function(e){this.activeOrganizeName=[],this.getOrgPrarentNode(e),this.organizeName=this.activeOrganizeName.reverse().join("/")},getUserOrganize:function(){var e=this;return new l.a(function(t,i){e.$axios.post("/api/getorg",{}).then(function(e){if(e.data.getOrgList.length>0){var i=e.data.getOrgList[0].orgid;t(i)}else t(null)}).catch(function(e){i("获取用户所在部门失败!ERROR MESSAGE:"+e)})})},getOrganizeList:function(){var e=this;return new l.a(function(t,i){e.$axios.post("/api/companytree/page",{}).then(function(i){i.data.companyTreeList.length>0?(e.organizeList=i.data.companyTreeList,t(!0)):t(!1)}).catch(function(e){i("获取组织数据失败!ERROR MESSAGE:"+e)})})},getCategoryOfOrganize:function(e){var t=this,i={orgId:e,isUse:1,name:t.treeSearch,isHide:1,isDailog:"1"};return new l.a(function(e,a){t.$axios.post("/api/processCategory",i).then(function(i){if(0==i.data.result.length)t.$message.success("暂无数据"),t.treeList=[];else{for(var a=d.a.toTree(i.data.result,"id","pid","Child"),s=0;s<a.length;s++)0!=a[s].pid&&(a.splice(s,1),s--);t.treeList=a}e(!0)}).catch(function(e){a("查询列表数据失败!ERROR MESSAGE:"+e)})})},getOrgPrarentNode:function(e){void 0!=e.data.orgName&&this.activeOrganizeName.push(e.data.orgName),void 0!=e.parent&&this.getOrgPrarentNode(e.parent)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleNodeClick:function(e,t){var i=this,a=(new Date).getTime();if(i.oldtime&&i.rootNode&&(a-i.oldtime<500&&i.rootNode.id==t.id))return i.clickDepartment(e),i.getChildNode(t.data.Child),void setTimeout(function(){i.$emit("sureSubmit",{type:i.componentParam.componentType,list:i.selectedCities})},300);i.oldtime=a,i.rootNode=t,i.displayContents(t.data),i.selectOrgs=[],i.getPrarentNode(t),i.disposeOrganName(e.name)},displayContents:function(e){var t=this.getId(this.selectedCities);if(this.cities=[],this.checkedCities=[],this.checkAll=!1,this.isIndeterminate=!1,e.hasOwnProperty("Child")){var i=!0,a=!1,s=void 0;try{for(var r,n=o()(e.Child);!(i=(r=n.next()).done);i=!0){var c=r.value;this.cities.push(c)}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}var l=!0,d=!1,h=void 0;try{for(var p,g=o()(e.Child);!(l=(p=g.next()).done);l=!0){c=p.value;t.indexOf(c.id)>-1&&this.checkedCities.push(c)}}catch(e){d=!0,h=e}finally{try{!l&&g.return&&g.return()}finally{if(d)throw h}}}else t.indexOf(e.id)>-1&&this.checkedCities.push(e),this.cities.push(e);var u=this.getId(this.cities),m=0,f=!0,v=!1,C=void 0;try{for(var y,k=o()(this.checkedCities);!(f=(y=k.next()).done);f=!0){var b=y.value;-1!==u.indexOf(b.id)&&m++}}catch(e){v=!0,C=e}finally{try{!f&&k.return&&k.return()}finally{if(v)throw C}}this.checkAll=m>0&&m===this.cities.length,this.isIndeterminate=this.checkedCities.length>0&&this.checkedCities.length<this.cities.length},dblclickCheckedCitie:function(e){this.clickDepartment(e),this.$emit("sureSubmit",{type:"new_process_dialog",list:this.selectedCities})},clickDepartment:function(e){this.selectedCities.splice(0,this.selectedCities.length),this.selectedCities.push(e),this.checkedCities.splice(0,this.checkedCities.length),this.checkedCities.push(e);var t=this.$refs.classificationTree.getNode(e.pid);this.selectOrgs=[],this.getPrarentNode(t),e.tooltipclassificationName=this.disposeOrganName(e.name)},handleCheckAllChange:function(e){var t=this.getId(this.selectedCities);if(this.checkedCities=[],e){var i=!0,a=!1,s=void 0;try{for(var r,n=o()(this.cities);!(i=(r=n.next()).done);i=!0){var c=r.value;-1===t.indexOf(c.id)&&this.selectedCities.push(c),this.checkedCities.push(c)}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}this.checkAll=!0,this.isIndeterminate=!1}else{var l=!0,d=!1,h=void 0;try{for(var p,g=o()(this.cities);!(l=(p=g.next()).done);l=!0){c=p.value;if(t.indexOf(c.id)>-1){var u=-1;for(var m in this.selectedCities)this.selectedCities[m].id==c.id&&(u=m);-1!=u&&this.selectedCities.splice(u,1)}}}catch(e){d=!0,h=e}finally{try{!l&&g.return&&g.return()}finally{if(d)throw h}}this.checkAll=!1,this.isIndeterminate=!1}},handleCheckedCitiesChange:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var r,n=o()(this.selectedCities);!(i=(r=n.next()).done);i=!0){var c=r.value;t.push(c)}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}this.selectedCities.splice(0,this.selectedCities.length);var l=this.getId(this.cities),d=[];for(var h in t)-1==l.indexOf(t[h].id)&&(d.push(t[h]),x++);this.selectedCities=d;c=[];var p=!0,g=!1,u=void 0;try{for(var m,f=o()(e);!(p=(m=f.next()).done);p=!0){h=m.value;c.tooltipclassificationName=this.disposeOrganName(h.name)}}catch(e){g=!0,u=e}finally{try{!p&&f.return&&f.return()}finally{if(g)throw u}}var v=this.getId(this.selectedCities),C=!0,y=!1,k=void 0;try{for(var b,I=o()(e);!(C=(b=I.next()).done);C=!0){h=b.value;-1===v.indexOf(h.id)&&this.selectedCities.push(h)}}catch(e){y=!0,k=e}finally{try{!C&&I.return&&I.return()}finally{if(y)throw k}}var x=0,_=!0,D=!1,z=void 0;try{for(var N,w=o()(e);!(_=(N=w.next()).done);_=!0){var O=N.value;-1!==l.indexOf(O.id)&&x++}}catch(e){D=!0,z=e}finally{try{!_&&w.return&&w.return()}finally{if(D)throw z}}this.checkedCities=e,this.checkAll=x===this.cities.length,this.isIndeterminate=x>0&&x<this.cities.length},pullBtnHeightChange:function(){this.isActive=!this.isActive},sureSubmit:function(){this.$emit("sureSubmit",{type:this.componentParam.componentType,list:this.selectedCities})},getId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var r,n=o()(e);!(i=(r=n.next()).done);i=!0){var c=r.value;t.push(c.id)}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}return t}},r()(a,"pullBtnHeightChange",function(){this.isActive=!this.isActive}),r()(a,"close",function(){this.$emit("hideComponent")}),r()(a,"deleteDept",function(e){for(var t in this.checkAll=!1,this.isIndeterminate=!1,this.checkedCities)this.checkedCities[t].id==this.selectedCities[e].id&&this.checkedCities.splice(t,1);this.selectedCities.splice(e,1),this.checkAll=this.checkedCities.length===this.cities.length&&this.cities.length>0,this.isIndeterminate=this.checkedCities.length>0&&this.checkedCities.length<this.cities.length}),r()(a,"clearDept",function(){this.checkedCities.splice(0,this.checkedCities.length),this.selectedCities.splice(0,this.selectedCities.length),this.checkAll=!1,this.isIndeterminate=!1}),r()(a,"disposeOrganName",function(e){var t="",i=!0,a=!1,s=void 0;try{for(var r,n=o()(this.selectOrgs);!(i=(r=n.next()).done);i=!0){t+=r.value.text+" > "}}catch(e){a=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(a)throw s}}return t=(t=t.trim()).substr(0,t.length-1),this.tooltipclassificationName=t,t.length>30?this.classificationName=t.substr(0,30)+"...":this.classificationName=t,t}),r()(a,"getPrarentNode",function(e){e&&(e.data&&void 0!=e.data.name&&this.selectOrgs.unshift({text:""+e.data.name,petId:""+e.data.id,PID:""+e.data.pid}),void 0!=e.parent&&this.getPrarentNode(e.parent))}),r()(a,"getChildNode",function(e){var t=!0,i=!1,a=void 0;try{for(var s,r=o()(e);!(t=(s=r.next()).done);t=!0){var n=s.value;this.selectedCities.push(n),n.hasOwnProperty("Child")&&n.Child.length>0&&this.getChildNode(n.Child)}}catch(e){i=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw a}}}),a)},p={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"originater_dialog newProcess_dialog"},[i("div",{class:[e.componentParam.closeShow?"pc-candidates":"pc-candidates pc-background"]},[i("div",{staticClass:"dialog_content"},[i("el-main",{staticStyle:{position:"relative"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.componentParam.closeShow,expression:"!componentParam.closeShow"}],staticClass:"top"},[i("span",[e._v("流程分类选择")]),e._v(" "),i("span",{staticStyle:{"font-size":"30px",cursor:"pointer"},on:{click:e.close}},[e._v("×")])]),e._v(" "),i("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],attrs:{type:"card","element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[i("el-tab-pane",{staticClass:"candidates-recently"},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-todos"}),e._v(" 流程")]),e._v(" "),i("div",{staticClass:"title  title-border"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right",title:e.tooltipclassificationName}},[i("el-breadcrumb-item",[e._v("流程分类选择")]),e._v(" "),i("el-breadcrumb-item",[e._v(e._s(e.classificationName))])],1),e._v(" "),i("span",{staticClass:"rightInput"},[i("el-input",{attrs:{placeholder:"请输入流程分类名","prefix-icon":"el-icon-search",size:"mini"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.enterSearch(t):null}},model:{value:e.treeSearch,callback:function(t){e.treeSearch=t},expression:"treeSearch"}})],1)],1),e._v(" "),i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"content-left"},[i("div",{staticClass:"title"},[i("el-form",{staticClass:"demo-form-inline init-organize-box",staticStyle:{width:"100%"},attrs:{inline:!0}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:""}},[i("el-select",{ref:"selectTree",staticStyle:{width:"100%"},attrs:{placeholder:"组织","popper-class":"tree-list-box"},model:{value:e.organizeName,callback:function(t){e.organizeName=t},expression:"organizeName"}},[i("el-option",{staticStyle:{height:"auto",padding:"0px 0px"},attrs:{value:"",disabled:!0}},[i("div",[i("el-tree",{ref:"orgtree",attrs:{data:e.organizeList,"highlight-current":!0,"node-key":"orgID","default-expand-all":"","expand-on-click-node":!1,"empty-text":"暂无数据",props:e.props},on:{"node-click":e.selectTreeClick}})],1)])],1)],1)],1)],1),e._v(" "),i("el-tree",{ref:"classificationTree",attrs:{data:e.treeList,"node-key":"id","highlight-current":!0,props:e.defaultProps,"empty-text":"","expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),i("div",{staticClass:"content-right"},[e.componentParam.oneCheck?e._e():i("el-checkbox",{staticStyle:{"padding-top":"6px","padding-left":"20px"},attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n                ")]),e._v(" "),e.componentParam.oneCheck?i("el-checkbox-group",{staticClass:"theRadio",model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return i("el-checkbox-button",{key:t.id,attrs:{label:t,checked:t.checked}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body",on:{click:function(i){e.clickDepartment(t)},dblclick:function(i){e.dblclickCheckedCitie(t)}}},[i("h4",{staticClass:"media-heading iconfont icon-process1",attrs:{title:t.name}},[e._v(e._s(t.name.length>30?t.name.substr(0,30)+"...":t.name))])])])])})):i("el-checkbox-group",{staticClass:"mut-check",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return i("el-checkbox",{key:t.id,attrs:{label:t,checked:t.checked}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body"},[i("h4",{staticClass:"media-heading",attrs:{title:t.name}},[e._v(e._s(t.name.length>30?t.name.substr(0,30)+"...":t.name))])])])])}))],1)]),e._v(" "),i("div",{staticClass:"addrecently-box",class:{pullup:e.isActive}},[i("div",{staticClass:"addrecently"},[i("div",{staticClass:"media"},[i("div",{staticClass:"pull",on:{click:e.pullBtnHeightChange}}),e._v(" "),i("ul",{staticClass:"clearfix"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedCities.length>0,expression:"selectedCities.length>0"}],staticClass:"clearBtn",on:{click:e.clearDept}}),e._v(" "),e._l(e.selectedCities,function(t,a){return i("li",{key:a},[i("div",{staticClass:"media-body"},[i("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.deleteDept(a)}}}),e._v(" "),i("span",{staticClass:"media-heading"},[e._v(e._s(t.name))])])])})],2)])])]),e._v(" "),i("div",{staticClass:"addrecently-footer"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.sureSubmit}},[e._v("确定\n              ")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:e.close}},[e._v("取消")])],1)])],1)],1)],1)])])},staticRenderFns:[]};var g=i(47)(h,p,!1,function(e){i(691)},"data-v-4306266d",null);t.a=g.exports},691:function(e,t){},709:function(e,t,i){"use strict";var a=i(163),s=i.n(a),r=i(67),n=(i(711),{name:"CascaderOrganize",props:{defaultFirst:{type:Array,default:void 0},isShowStar:{type:Boolean,default:null},isCheckProcess:{type:String,default:""}},data:function(){return{showStar:!1,loading:!1,props:{label:"orgName",value:"orgID",children:"m_ChildOrg"},cascad:{organize:{},department:{},projects:{}},company:"",department:"",projects:"",organizeList:[],activeCompany:[],departmentList:[],projectList:[],cacheMap:{}}},watch:{cascad:{handler:function(e,t){this.$emit("changeSetvaule",{data:this.cascad})},deep:!0}},created:function(){this.showStar=this.isShowStar;var e=this;e.$nextTick(function(){e.$on("refresh",function(){e.refresh()})}),this.isShowStar&&this.visibleOrganize()},methods:{disposeRepetition:function(e){this.$route.name&&r.a.burialPoint(this.$route.name+"-"+e)},burialPointEvent:function(e){r.a.burialPoint(e)},refresh:function(){this.company="",this.department="",this.projects="",this.$refs.orgtree.setCurrentKey(null),this.cascad={organize:{},department:{},projects:{}},this.departmentList=[],this.projectList=[]},visibleOrganize:function(){var e=this;0==e.organizeList.length&&(e.loading=!0,e.getOrganizeList().then(function(t){if(t.state&&e.defaultFirst&&e.defaultFirst.indexOf("organize")>-1){var i=e.$refs.orgtree.getNode(t.orgID);i&&(e.cascad.organize=i.data,e.$refs.orgtree.setCurrentKey(t.orgID),e.setOrganize(i))}e.loading=!1}))},selectTreeClick:function(e,t){this.department="",this.projects="";this.$refs.selectTree.visible=!1,e.orgID!=this.cascad.organize.orgID&&(this.cascad.organize=e,this.departmentList=[],this.cascad.department={},this.projectList=[],this.cascad.projects={},this.setOrganize(t))},clearOrganize:function(){this.refresh(),this.$refs.orgtree.getCurrentNode()&&this.$refs.orgtree.setCurrentKey(null)},setOrganize:function(e){var t=[];this.activeCompany=[],this.getPrarentNode(e,t),this.company=t.reverse().join("/"),this.company=this.company.substr(1,this.company.length)},getPrarentNode:function(e,t){void 0!=e.data&&(this.activeCompany.push(e.data),t.push(e.data.orgName)),void 0!=e.parent&&this.getPrarentNode(e.parent,t)},getOrganizeList:function(){var e=this,t={};return"0"===this.isCheckProcess&&(t.isSelect="0"),new s.a(function(i,a){e.$axios.post("/api/companytree/page",t).then(function(t){if(t.data.companyTreeList.length>0){e.organizeList=t.data.companyTreeList;var a=e.organizeList[0].orgID;i({state:!0,orgID:a})}else i({state:!0})}).catch(function(e){a("获取组织数据失败!ERROR MESSAGE:"+e)})})},getdepartmentList:function(e){var t=this;t.$axios.post("/api/department/page",{orgID:e}).then(function(i){t.departmentList=i.data.departmentList,t.setCacheMap(t.departmentList,e,"department")}).catch(function(e){t.$message.error("获取部门数据失败!ERROR MESSAGE:"+e)})},changeDepartment:function(e){console.log("选中部门",e),this.cascad.department=e},clearDepartment:function(){},visibleDepartment:function(e){if(e&&this.cascad.organize.orgID){if(this.cacheMap[this.cascad.organize.orgID]&&this.cacheMap[this.cascad.organize.orgID].department)return void(this.departmentList=this.cacheMap[this.cascad.organize.orgID].department);this.getdepartmentList(this.cascad.organize.orgID)}},getprojectList:function(e){var t=this;t.$axios.post("/api/project/page",{orgID:e}).then(function(i){t.projectList=i.data.projectList,t.setCacheMap(t.projectList,e,"project")}).catch(function(e){t.$message.error("获取项目数据失败!ERROR MESSAGE:"+e)})},changeProject:function(e){console.log("选中项目",e),this.cascad.projects=e},clearProject:function(){},visibleProject:function(e){if(e&&this.cascad.organize.orgID){if(this.cacheMap[this.cascad.organize.orgID]&&this.cacheMap[this.cascad.organize.orgID].project)return void(this.projectList=this.cacheMap[this.cascad.organize.orgID].project);this.getprojectList(this.cascad.organize.orgID)}},setCacheMap:function(e,t,i){this.cacheMap[t]||(this.cacheMap[t]={}),this.cacheMap[t][i]=e}}}),o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"所属公司",title:e.company}},[e.isShowStar?i("span",{staticStyle:{color:"red","font-size":"14px",float:"left",position:"absolute",top:"-5px",left:"-10px","z-index":"99"}},[e._v("*")]):e._e(),e._v(" "),i("el-select",{ref:"selectTree",attrs:{"value-key":"orgID",clearable:"",placeholder:"请选择...","popper-class":"tree-list-box"},on:{focus:function(t){e.disposeRepetition("输入条件-所属公司")},clear:e.clearOrganize,"visible-change":e.visibleOrganize},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}},[i("el-option",{staticStyle:{height:"auto",padding:"0px 0px"},attrs:{value:"orgID",disabled:!0}},[i("div",{staticStyle:{height:"100%",width:"100%"}},[i("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"orgtree",attrs:{data:e.organizeList,"node-key":"orgID","highlight-current":"","default-expand-all":"","expand-on-click-node":!1,"empty-text":"无数据",props:e.props},on:{"node-click":e.selectTreeClick}})],1)])],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"部门"}},[i("el-select",{attrs:{"value-key":"id",clearable:"",placeholder:"请选择...","popper-class":"tree-list-box"},on:{focus:function(t){e.disposeRepetition("输入条件-部门")},clear:e.clearDepartment,change:e.changeDepartment,"visible-change":e.visibleDepartment},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},e._l(e.departmentList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"项目"}},[i("el-select",{attrs:{"value-key":"pc_ID",clearable:"",placeholder:"请选择...","popper-class":"tree-list-box"},on:{focus:function(t){e.disposeRepetition("输入条件-项目")},clear:e.clearProject,change:e.changeProject,"visible-change":e.visibleProject},model:{value:e.projects,callback:function(t){e.projects=t},expression:"projects"}},e._l(e.projectList,function(e){return i("el-option",{key:e.pc_ID,attrs:{label:e.pc_NAME,value:e}})}))],1)],1)],1)},staticRenderFns:[]};var c=i(47)(n,o,!1,function(e){i(710)},"data-v-b7a5b7c2",null).exports;t.a=c},710:function(e,t){},711:function(e,t){e.exports={company:[{orgID:"yewuxitongzhuanyong",orgName:"业务系统专用",orgorder:100,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"fzgs",orgName:"万科物业总部",orgorder:200,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"fzgs-1",orgName:"测试数据-1",pid:"fzgs",orgorder:200,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"fzgs-1-1",orgName:"测试数据-1-1",pid:"fzgs-1",orgorder:200,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"city",orgName:"城市公司共用",orgorder:300,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"zhuzhai",orgName:"BU1.住宅运营",orgorder:400,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"yewuliucheng",orgName:"BU2.1业务流程",orgorder:500,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"pulinyewu",orgName:"BU4.1朴邻业务",orgorder:600,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"vanrui",orgName:"BU5 万睿智能",orgorder:700,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"fuxunxinxijishu",orgName:"福迅信息技术",orgorder:800,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"wwc",orgName:"万物仓",orgorder:900,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"diwust",orgName:"第五食堂",orgorder:950,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null}],department:[{deptId:"csbm1",deptName:"测试部门-1"},{deptId:"csbm2",deptName:"测试部门-2"},{deptId:"csbm3",deptName:"测试部门-3"},{deptId:"csbm4",deptName:"测试部门-4"},{deptId:"csbm5",deptName:"测试部门-5"}],project:[{projectId:"cszz1",projectName:"测试组织-1"},{projectId:"cszz2",projectName:"测试组织-2"},{projectId:"cszz3",projectName:"测试组织-3"},{projectId:"cszz4",projectName:"测试组织-4"},{projectId:"cszz5",projectName:"测试组织-5"}]}},758:function(e,t){},797:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(160),s=i.n(a),r=i(162),n=i.n(r),o=i(68),c=i.n(o),l=i(82),d=i(1),h=i.n(d),p=i(67),g=i(685),u=i(709),m=i(688),f=i(690),v=i(359),C={name:"processInstance",components:{CascaderOrganize:u.a,processClassification:f.a,processSelection:m.a,page:g.a},computed:c()({bodyHeight:function(){return document.documentElement.clientHeight}},Object(l.b)(["isIE","bodyHeight"])),data:function(){var e=this;return{pickerOptionsBefore:{disabledDate:function(t){var i=e.processform.date[1];if(i)return h()(t).format("YYYY-MM-DD")>i}},pickerOptionsAfter:{disabledDate:function(t){var i=e.processform.date[0];if(i)return h()(t).format("YYYY-MM-DD")<i}},tableData:[],processFormName:"",processCategoryName:"",processCategoryIDs:"",processName:"",processIDs:"",loading:!1,defaultFirst:["organize"],processform:{organize:{},department:{},projects:{},approveTime:"",date:[h()().subtract(1,"months").format("YYYY-MM-DD"),h()().format("YYYY-MM-DD")],processCategoryList:[],processList:[]},model:{companyID:"",startDateFrom:"",startDateTo:"",departmentID:"",projectID:"",processCategoryIDs:"",processID:"",orderBy:""},showdialog:!1,componentParam:{componentType:{type:String,required:!0},backfillData:{type:Array,required:!0},oneCheck:{type:Boolean,required:!0},closeShow:{type:Boolean,required:!0}},pageIndex:1,total:0,pageSize:20,pageSizesList:[20,50,100]}},mounted:function(){},methods:{formatMinutes:function(e){var t=parseInt(Math.floor(e/1440)),i=t>0?Math.floor((e-1440*t)/60):Math.floor(e/60),a=i>0?Math.floor(e-1440*t-60*i):e,s="";return t>0&&(s+=t+"天"),i>0&&(s+=i+"小时"),a>0&&(s+=a+"分钟"),s},sortChange:function(e){var t="statusName"==e.prop?"dodoType":e.prop;this.model.orderBy=t+" "+e.order.replace("ending",""),this.pageIndex=1,this.getResultList()},hideDate:function(e){setTimeout(function(){var t=void 0,i=void 0,a=null,s=null;document.getElementsByClassName("el-picker-panel")[0]&&(a=!0),document.getElementsByClassName("el-picker-panel")[1]&&(s=!0),t=a?document.getElementsByClassName("el-picker-panel")[0]:"",i=s?document.getElementsByClassName("el-picker-panel")[1]:"",e.$el.firstElementChild==document.activeElement?(a&&(t.style.display="none"),s&&(i.style.display="none")):(a&&(t.style.display="block"),s&&(i.style.display="block"))},10)},checknum:function(e){var t=this;/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/.test(e)||setTimeout(function(){t.processform.approveTime=""},100)},handleSizeChange:function(e){this.pageIndex=1,this.pageSize=parseInt(e),localStorage.myInitPageSize=e,this.getResultList()},handleCurrentChange:function(e){this.pageIndex=e,this.getResultList()},changeSetvaule:function(e){this.processform=n()({},this.processform,e.data)},tableHeaderClassName:function(e){e.row,e.rowIndex;return"table-head-th"},openDailog:function(e){this.componentParam.closeShow=!1,this.componentParam.componentType=e,this.componentParam.oneCheck=!1,"processClassification"==e?this.componentParam.backfillData=this.processform.processCategoryList:"processSelection"==e&&(this.componentParam.backfillData=this.processform.processList),this.showdialog=!0,p.a.showDailog_mask()},hideComponent:function(){this.showdialog=!1,p.a.hiddenDailog_mask()},showMsgfromchild:function(e){e.type&&"processClassification"==e.type?(this.processform.processCategoryList=e.list,this.handleProcessCategory()):e.type&&"processSelection"==e.type&&(this.processform.processList=e.list,this.handleProcess()),this.hideComponent()},search:function(){this.getResultList()},refresh:function(){this.processform={organize:{},department:{},projects:{},date:[h()().subtract(1,"months").format("YYYY-MM-DD"),h()().format("YYYY-MM-DD")],processCategoryList:[],processList:[],approveTime:""},this.$refs.cascaderOrganize.$emit("refresh")},exportList:function(){var e=this;""!=e.model.processID||""!=e.model.processCategoryIDs?""!=e.processform.approveTime?e.processform.approveTime>1e4?e.$message.warning("审批时间超过N小时必须为小于10000数字！"):(v.a.startLoading({lock:!0,text:"加载中...",background:"rgba(255, 255, 255, 0.9)",target:document.querySelector(".loadingtext")}),e.$axios.post("/api/exportExcelForTable",{tableName:"用户平均审批时间",params:e.model},{responseType:"blob"}).then(function(e){var t=e.data;p.a.exportSearchList("用户平均审批时间",t),v.a.endLoading()}).catch(function(t){v.a.endLoading(),e.$message.error("导出Excel失败!ERROR MESSAGE:"+t)})):e.$message.warning("审批时间超过N小时不能为空！"):e.$message.warning("请选择流程分类或流程!")},Quvalidation:function(){},getResultList:function(){var e=this;""!==e.model.companyID?""!=e.model.processID||""!=e.model.processCategoryIDs?this.model.startDateFrom&&this.model.startDateTo?""!=e.processform.approveTime?e.processform.approveTime>1e4?e.$message.warning("审批时间超过N小时必须为小于10000数字!"):""===e.model.startDateFrom&&""===e.model.startDateTo||!(e.model.startDateFrom<"1753-01-01"||e.model.startDateTo<"1753-01-01")?(v.a.startLoading(),e.$axios.post("/api/ApproveTime/page?pageIndex="+(e.pageIndex-1)+"&pageSize="+e.pageSize,this.model).then(function(t){v.a.endLoading(),200===t.status?(console.log(t.data),e.tableData=t.data.approveTimeList,e.total=t.data.pageControllerInfo.totalRecordCount):e.$message.error("请求失败！")}).catch(function(t){v.a.endLoading(),e.$message.error("查询列表数据失败!ERROR MESSAGE:"+t)})):this.$message.warning("请选择1753-01-01 ~ 9999-12-31之间的日期"):e.$message.warning("审批时间超过N小时不能为空!"):this.$message.warning("请选择日期!"):e.$message.warning("请选择流程分类或流程!"):e.$message.warning("请选择所属公司!")},handleProcess:function(){var e=[],t=[],i=!0,a=!1,r=void 0;try{for(var n,o=s()(this.processform.processList);!(i=(n=o.next()).done);i=!0){var c=n.value;t.push(c.name),e.push(c.processId+"")}}catch(e){a=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw r}}return this.processName=t.join("；"),this.processIDs=e.join(","),e.join(",")||""},handleProcessCategory:function(){var e=[],t=[],i=!0,a=!1,r=void 0;try{for(var n,o=s()(this.processform.processCategoryList);!(i=(n=o.next()).done);i=!0){var c=n.value;t.push(c.name),e.push(c.id+"")}}catch(e){a=!0,r=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw r}}return this.processCategoryName=t.join("；"),this.processCategoryIDs=e.join(","),e.join(",")||""},handleQueryParam:function(e){this.model={companyID:e.organize.orgID||"",startDateFrom:e.date[0],startDateTo:e.date[1],departmentID:e.department.id||"",projectID:e.projects.pc_ID||"",processCategoryIDs:this.handleProcessCategory(),processID:this.handleProcess(),approveTime:e.approveTime}}},watch:{processform:{handler:function(e,t){this.handleQueryParam(e)},deep:!0}}},y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"staticReports todoProcess loadingtext"},[i("el-container",[i("el-header",[i("div",{staticClass:"staticReports minWidth"},[i("div",{staticClass:"taticReports-content"},[i("el-row",{staticClass:" staticReports-header ",attrs:{type:"flex",justify:"space-between"}},[i("el-col",{staticClass:"titleMT",attrs:{span:17}},[i("span",{staticClass:"mz",on:{click:function(t){e.$router.back(-1)}}},[e._v("流程报表")]),i("i",{staticClass:"el-icon-arrow-down"})]),e._v(" "),i("el-col",{staticClass:"titleBtn clearfix",attrs:{span:6}},[i("el-button",{attrs:{round:"",type:"primary",size:"mini"},on:{click:e.refresh}},[e._v("重置")]),e._v(" "),i("el-button",{attrs:{round:"",type:"primary",size:"mini"},on:{click:e.search}},[e._v("搜索")])],1)],1)],1)])]),e._v(" "),i("el-main",[i("div",{staticClass:"mainContaint"},[i("div",{staticClass:"todoProcess-screenList screenList-box",class:{screenList_box_ie:e.isIE}},[i("el-row",[i("el-col",{staticClass:"report",attrs:{span:24}},[i("span",[e._v("用户平均审批时间")])])],1),e._v(" "),i("el-form",{ref:"processform",staticClass:"todoForm",attrs:{"label-width":"100px",size:"mini"},model:{value:e.processform,callback:function(t){e.processform=t},expression:"processform"}},[i("el-row",{attrs:{type:""}},[i("CascaderOrganize",{ref:"cascaderOrganize",attrs:{isShowStar:!0,defaultFirst:e.defaultFirst},on:{changeSetvaule:e.changeSetvaule}})],1),e._v(" "),i("el-row",{attrs:{type:""}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"发起时段"}},[i("span",{staticStyle:{color:"red","font-size":"14px",float:"left",position:"absolute",top:"0",left:"-10px"}},[e._v("*")]),e._v(" "),i("div",{staticClass:"money-box"},[i("el-form-item",[i("el-date-picker",{staticClass:"todoDate",attrs:{"value-format":"yyyy-MM-dd",type:"date",clearable:!1,"picker-options":e.pickerOptionsBefore,placeholder:"选择日期"},on:{focus:e.hideDate},model:{value:e.processform.date[0],callback:function(t){e.$set(e.processform.date,0,t)},expression:"processform.date[0]"}})],1),e._v(" "),i("el-form-item",[e._v("~")]),e._v(" "),i("el-form-item",[i("el-date-picker",{staticClass:"todoDate",staticStyle:{float:"right"},attrs:{"value-format":"yyyy-MM-dd",type:"date",clearable:!1,"picker-options":e.pickerOptionsAfter,placeholder:"选择日期"},on:{focus:e.hideDate},model:{value:e.processform.date[1],callback:function(t){e.$set(e.processform.date,1,t)},expression:"processform.date[1]"}})],1)],1)])],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"流程分类"}},[i("span",{on:{dblclick:function(t){e.openDailog("processClassification")}}},[i("el-input",{staticClass:"input-text",attrs:{disabled:"",placeholder:"请选择...",title:e.processCategoryName},model:{value:e.processCategoryName,callback:function(t){e.processCategoryName=t},expression:"processCategoryName"}})],1),e._v(" "),i("i",{staticClass:"iconfont icon-category ",on:{click:function(t){e.openDailog("processClassification")}}})])],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"流程"}},[i("span",{on:{dblclick:function(t){e.openDailog("processSelection")}}},[i("el-input",{staticClass:"input-text",attrs:{disabled:"",placeholder:"请选择...",title:e.processName},model:{value:e.processName,callback:function(t){e.processName=t},expression:"processName"}})],1),e._v(" "),i("i",{staticClass:"iconfont icon-category ",on:{click:function(t){e.openDailog("processSelection")}}})])],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"审批超过"}},[i("span",{staticStyle:{color:"red","font-size":"14px",float:"left",position:"absolute",top:"0",left:"-10px"}},[e._v("*")]),e._v(" "),i("span",{staticClass:"clearfix"},[i("el-input",{staticClass:"hours input-embedded input-text",attrs:{type:"text"},on:{input:function(t){e.checknum(e.processform.approveTime)}},model:{value:e.processform.approveTime,callback:function(t){e.$set(e.processform,"approveTime",t)},expression:"processform.approveTime"}}),e._v(" "),i("i",{staticClass:"text-embedded"},[e._v("小时")])],1)])],1)],1)],1),e._v(" "),i("div",{staticClass:"todoProcess-main"},[i("el-row",{staticClass:"listButton",attrs:{type:"flex",justify:"end"}},[i("el-button",{staticClass:"upload",attrs:{round:"",type:"primary",icon:"iconfont icon-export",size:"mini"},on:{click:e.exportList}},[e._v("导出\n              ")])],1),e._v(" "),i("div",{staticClass:"list"},[i("el-table",{ref:"singleTable",attrs:{data:e.tableData,height:e.bodyHeight-400,"header-row-class-name":e.tableHeaderClassName,border:"","highlight-current-row":"",size:"mini"},on:{"sort-change":e.sortChange}},[i("el-table-column",{attrs:{property:"userID",label:"审批人账号",width:"130",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"table-popover",attrs:{title:t.row.userID}},[e._v(e._s(t.row.userID))])]}}])}),e._v(" "),i("el-table-column",{attrs:{property:"userName",label:"审批人","min-width":"130",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"table-popover",attrs:{title:t.row.userName}},[e._v(e._s(t.row.userName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{property:"departmentName","min-width":"130",label:"部门名称",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"table-popover",attrs:{title:t.row.departmentName}},[e._v(e._s(t.row.departmentName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{property:"numer",width:"130",label:"审批次数",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"table-popover",attrs:{title:t.row.numer}},[e._v(e._s(t.row.numer))])]}}])}),e._v(" "),i("el-table-column",{attrs:{property:"totaltime",width:"130",label:"审批时长",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"table-popover",attrs:{title:t.row.total}},[e._v(e._s(t.row.total))])]}}])}),e._v(" "),i("el-table-column",{attrs:{property:"totaltime",width:"130",label:"平均审批时长",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"table-popover",attrs:{title:t.row.avgTIME}},[e._v(e._s(t.row.avgTIME))])]}}])}),e._v(" "),i("el-table-column",{attrs:{property:"processIDList",width:"100",label:"流程ID",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"table-popover",attrs:{title:t.row.processIDList}},[e._v(e._s(t.row.processIDList))])]}}])}),e._v(" "),i("el-table-column",{attrs:{property:"activityNameList",width:"100",label:"审批步骤",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"table-popover",attrs:{title:t.row.activityNameList}},[e._v(e._s(t.row.activityNameList))])]}}])}),e._v(" "),i("div",{attrs:{slot:"empty"},slot:"empty"},[i("p",[e._v("暂无数据")])]),e._v(" "),i("div",{attrs:{slot:"append"},slot:"append"},[e.tableData.length>0?i("page",{attrs:{pageIndex:e.pageIndex,total:e.total,pageSize:e.pageSize,pageSizesList:e.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}}):e._e()],1)],1)],1)],1)],1)]),e._v(" "),e.showdialog?i(e.componentParam.componentType,{tag:"component",attrs:{componentParam:e.componentParam},on:{hideComponent:e.hideComponent,sureSubmit:e.showMsgfromchild}}):e._e()],1)],1)],1)},staticRenderFns:[]};var k=i(47)(C,y,!1,function(e){i(758)},"data-v-29a5f2f2",null);t.default=k.exports}});