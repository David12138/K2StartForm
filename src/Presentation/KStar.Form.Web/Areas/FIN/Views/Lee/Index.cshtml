
@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>BPM 流程系统 表单</title>
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <link href="~/Scripts/element/2.8.2/theme-chalk/index.css" rel="stylesheet" />
    <link href="~/Content/css/reset.css" rel="stylesheet" />
    <link href="~/Content/iconfont/iconfont.css" rel="stylesheet" />
    <link href="~/Content/css/form/form.css" rel="stylesheet" />
    <link href="~/Content/css/components/headerSubtitle.css" rel="stylesheet" />
</head>
<body>
    <div id="app" v-cloak>
        <!-- 专属测试流程，请不要擅动 -->

        <el-container>
            <!-- 头部header悬浮按钮工具栏 -->
            <headertoolbar :formtype="vmFormType" :formbtnmodel="vmKStarFormButtons" :formbackactivity="vmBackActivitys" :formoperationmodel="vmOperation"></headertoolbar>
            <main class="wrap">
                <div class="form">
                    <!-- 标题头 -->
                    <headertitle :formheadmodel='vmFormInstance' :formprocessroute="vmProcessRoute"></headertitle>

                    <div class="center">
                        <!-- 当前处理人 -->
                        <moduleprocessingpeople v-if="vmFormType!='Application'&& vmFormInstance.Status==2"></moduleprocessingpeople>

                        <!-- 基本信息 -->
                        <modulebasicinformation :formtype="vmFormType" :formbasicinformationmodel='vmFormInstance' :formoperationmodel="vmOperation" ref="refComBasicInfo"></modulebasicinformation>

                        <!-- 流程说明 -->
                        <moduleprocessthat v-if="vmFormSetting.ShowProcDescModule" :formsettingmodel="vmFormSetting"></moduleprocessthat>

                        <!-- 相关流程 -->
                        @*<modulerelatedprocesses></modulerelatedprocesses>*@

                        <!-- 表单信息 -->
                        <headersubtitle header-title="表单信息">
                            <i slot="subIcon" class="icon-sub icon iconfont iconbiaodanxinxi"></i>

                            <el-form :model="vmFormContent" :rules="formContentRules" ref="refFormContent" label-width="150px" class="demo-ruleForm" inline-message size="mini">
                                <el-row>
                                    <el-col :xs="24" :sm="24" :md="12" :lg="8">
                                        <el-form-item label="单据编号：" prop="OrderNo">
                                            <el-input v-if="isEdit" v-model="vmFormContent.OrderNo" size="mini"></el-input>
                                            <div v-else class="form-item-div">{{ vmFormContent.OrderNo }}</div>
                                        </el-form-item>
                                    </el-col>

                                    <el-col :xs="24" :sm="24" :md="12" :lg="8">
                                        <el-form-item label="单据名称：" prop="OrderName">
                                            <el-input v-if="isEdit" v-model="vmFormContent.OrderName" size="mini"></el-input>
                                            <div v-else class="form-item-div">{{ vmFormContent.OrderName }}</div>
                                        </el-form-item>
                                    </el-col>

                                    <el-col :xs="24" :sm="24" :md="12" :lg="8">
                                        <el-form-item label="合同名称：" prop="ContractName">
                                            <el-input v-if="isEdit" v-model="vmFormContent.ContractName" size="mini"></el-input>
                                            <div v-else class="form-item-div">{{ vmFormContent.ContractName }}</div>
                                        </el-form-item>
                                    </el-col>
                                </el-row>
                                <el-row>
                                    <el-col :xs="24" :sm="24" :md="12" :lg="8">
                                        <el-form-item label="合同金额：" prop="ContractAmount">
                                            <el-input v-if="isEdit" v-model="vmFormContent.ContractAmount" size="mini"></el-input>
                                            <div v-else class="form-item-div">{{ vmFormContent.ContractAmount }}</div>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :xs="24" :sm="24" :md="12" :lg="8">
                                        <el-form-item label="部门：" prop="region">
                                            <el-select v-if="isEdit" v-model="vmFormContent.region" placeholder="请选择部门" size="mini">
                                                <el-option label="财务部" value="财务部"></el-option>
                                                <el-option label="市场部" value="市场部"></el-option>
                                                <el-option label="开发部" value="开发部"></el-option>
                                            </el-select>
                                            <div v-else class="form-item-div">{{ vmFormContent.region }}</div>
                                        </el-form-item>
                                    </el-col>
                                </el-row>
                                <subtitle subtitle="测试参数部分"></subtitle>
                                <el-row>
                                    <el-col :xs="24" :sm="24" :md="12" :lg="8">
                                        <el-form-item label="公司名称：" prop="CompanyName">
                                            <el-select v-if="isEdit" v-model="vmFormContent.CompanyName" placeholder="请选择公司" size="mini">
                                                <el-option label="中山" value="中山"></el-option>
                                                <el-option label="肇庆" value="肇庆"></el-option>
                                                <el-option label="上海" value="上海"></el-option>
                                                <el-option label="成都" value="成都"></el-option>
                                                <el-option label="河源" value="河源"></el-option>
                                                <el-option label="海南" value="海南"></el-option>
                                                <el-option label="防城港" value="防城港"></el-option>
                                                <el-option label="桂林" value="桂林"></el-option>
                                                <el-option label="柳州" value="柳州"></el-option>
                                                <el-option label="广清" value="广清"></el-option>
                                                <el-option label="东莞" value="东莞"></el-option>
                                                <el-option label="深圳" value="深圳"></el-option>
                                                <el-option label="南宁" value="南宁"></el-option>
                                                <el-option label="惠州" value="惠州"></el-option>
                                                <el-option label="汕头" value="汕头"></el-option>
                                                <el-option label="佛山" value="佛山"></el-option>
                                                <el-option label="珠海" value="珠海"></el-option>
                                                <el-option label="神湾" value="神湾"></el-option>
                                                <el-option label="阳江" value="阳江"></el-option>
                                            </el-select>
                                            <div v-else class="form-item-div">{{ vmFormContent.CompanyName }}</div>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :xs="24" :sm="24" :md="12" :lg="8">
                                        <el-form-item label="项目名称：" prop="ProjectName">
                                            <el-select v-if="isEdit" v-model="vmFormContent.ProjectName" placeholder="请选择项目" size="mini">
                                                <el-option label="潮州" value="潮州"></el-option>
                                                <el-option label="清远" value="清远"></el-option>
                                            </el-select>
                                            <div v-else class="form-item-div">{{ vmFormContent.ProjectName }}</div>
                                        </el-form-item>
                                    </el-col>
                                    <el-col :xs="24" :sm="24" :md="12" :lg="8">
                                        <el-form-item label="调价幅度：" prop="PriceRange">
                                            <el-input v-if="isEdit" v-model="vmFormContent.PriceRange" size="mini"></el-input>
                                            <div v-else class="form-item-div">{{ vmFormContent.PriceRange }}</div>
                                        </el-form-item>
                                    </el-col>
                                </el-row>
                            </el-form>
                        </headersubtitle>

                        <!-- 附件 -->
                        <moduletheattachment :formtype="vmFormType" :attachmentmodel="vmFormSetting" :formattachmentsmodel="vmFormAttachments" :attachmenttype="'Platform'" :attachmenttitle="'附件'"></moduletheattachment>

                        <!-- 步骤信息 -->
                        <modulestepinformation :formtype="vmFormType" :procpredictionmodel="vmProcPrediction"></modulestepinformation>

                        <!-- 流程处理 -->
                        <moduleprocesstodealwith v-if="vmFormType=='Approval'||vmFormType=='ReApproval'||vmFormType=='CommunicateFeedback'" :formprocesstodealwithmodel="vmFormSetting" :formoperationmodel="vmOperation" :formbtnmodel="vmKStarFormButtons" :formbackactivitymodel="vmBackActivitys" ref="refComProcessToDeal"></moduleprocesstodealwith>

                        <!-- 审批记录 -->
                        <moduleApprovalRecords v-if="vmFormType!='Application'" :formapprovalmodel="vmFormApprovalHistorys"></moduleApprovalRecords>
                    </div>
                </div>
            </main>
        </el-container>

    </div>
    <script src="~/Scripts/lodash/lodash.min.js"></script>
    <script src="~/Scripts/axios/0.19.0/axios.min.js"></script>
    <script src="~/Scripts/moment.min.js"></script>
    <script src="~/Scripts/vue/2.6.10/vue.js"></script>
    <script src="~/Scripts/element/2.8.2/index.js"></script>

    <script src="~/Scripts/components/UserPick.js"></script>

    <script src="~/Scripts/components/headerToolbar.js"></script>
    <script src="~/Scripts/components/headertitle.js"></script>
    <script src="~/Scripts/components/headerSubtitle.js"></script>
    <script src="~/Scripts/components/moduleProcessingPeople.js"></script>
    <script src="~/Scripts/components/moduleBasicInformation.js"></script>
    <script src="~/Scripts/components/moduleProcessThat.js"></script>
    <script src="~/Scripts/components/moduleRelatedProcesses.js"></script>
    <script src="~/Scripts/components/moduleTheAttachment.js"></script>
    <script src="~/Scripts/components/moduleStepInformation.js"></script>
    <script src="~/Scripts/components/moduleProcessToDealWith.js"></script>
    <script src="~/Scripts/components/moduleApprovalRecords.js"></script>
    <script src="~/Scripts/components/subtitlet.js"></script>
    <script src="~/Scripts/components/userRemotePick.js"></script>
    <script src="~/Scripts/components/UserPick.js"></script>
    <script src="~/Scripts/components/returnDialog.js"></script>
    <script src="~/Scripts/IE-promise.js"></script>
    <script src="~/Areas/FIN/Models/LeaveModel.js"></script>
    <script src="~/Scripts/formmain.js"></script>

    <script type="text/javascript">

        //初始化数据后绑定之前
        KStarForm.initFormDataAfter = function () {


        }
        //扩展
        KStarForm.formModelExtend = {
            data: function () {
                return {
                    //等待其它系统会写
                    WaittingActivity: ['010环节'],//需校验等待环节
                    WaittingItemName: { '010环节': 'IsPayed' },
                    //校验规则
                    formContentRules: {
                        OrderNo: [
                            { required: true, message: '请输入单据编号', trigger: 'blur' },
                            { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }
                        ],
                        OrderName: [
                            { required: true, message: '请输入单据名称', trigger: 'blur' }
                        ],
                        region: [
                            { required: true, message: '请选择部分', trigger: 'change' }
                        ]
                    }
                }
            },
            //方法
            methods: {
                hello: function () {
                    alert("aa");
                },
                alert2: function () {
                    alertInfo.call(this, "好样的！！");
                },
                submitForm2: function (formName) {
                    // alert(formName);
                    this.$refs[formName].validate(function (valid) {
                        if (valid) {
                            alert('submit!');
                        } else {
                            console.log('error submit!!');
                            return false;
                        }
                    });
                }
            },
            //计算属性
            computed: {
                isEdit: function () {
                    return this.vmFormType == 'Application' || this.vmFormType == 'Draft' || this.vmFormType == 'ReApproval' ? true : false;
                }
            }

        }
        KStarForm.init();
    </script>
</body>
</html>