webpackJsonp([30],{"6Q/B":function(t,e){},qEUD:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("NYxO");var s=a("Lxn6"),o=a("PJh5"),i=a.n(o),n=(a("qeuM"),a("ts/9")),l=a("+vjY"),r=a("T//Y"),c=i()().day(0).format("YYYY-MM-DD"),d=i()().day(6).format("YYYY-MM-DD"),h=i()().startOf("month").format("YYYY-MM-DD"),p=i()().endOf("month").format("YYYY-MM-DD"),m=i()().startOf("quarter").format("YYYY-MM-DD"),g=i()().endOf("quarter").format("YYYY-MM-DD"),u=i()().startOf("year").format("YYYY-MM-DD"),v=i()().endOf("year").format("YYYY-MM-DD"),D={name:"",mounted:function(){},components:{project_dialog:n.a,page:r.a},data:function(){return{oneCheck:!0,OrgId:"",fullHeight:document.documentElement.clientHeight,selectValue:1,tableData:[],type:1,isShow:!0,isShowtwo:!0,arrtTwo:"收起",iconTwo:"el-icon-arrow-down",model:{selectForm:{departmentID:""},date:[],companys:""},comp:{},childDataUrl:{url:""},showdialog:!1,pageIndex:1,total:0,pageSize:10,pageSizesList:[10,20,50,100],orderBy:"",processID:"",start:"",end:"",startDate:c,endDate:d,imgLoading:!1}},methods:{change:function(){switch(this.selectValue){case 1:this.startDate=c,this.endDate=d;break;case 2:this.startDate=h,this.endDate=p;break;case 3:this.startDate=m,this.endDate=g;break;case 4:this.startDate=u,this.endDate=v;break;case 5:this.startDate=this.model.date[0]?this.model.date[0]+" 00:00:00":"",this.endDate=this.model.date[1]?this.model.date[1]+" 23:59:59":""}},sortChange:function(t){this.orderBy=t.prop+" "+t.order.replace("ending",""),this.getList()},showToggle:function(){this.isShow=!this.isShow,this.isShow?(this.arrt="收起",this.icon="el-icon-arrow-up"):(this.arrt="展开",this.icon="el-icon-arrow-down")},showToggleTwo:function(){this.isShowtwo=!this.isShowtwo,this.isShowtwo?(this.arrtTwo="收起",this.iconTwo="el-icon-arrow-up"):(this.arrtTwo="展开",this.iconTwo="el-icon-arrow-down")},search:function(){this.getList()},getList:function(){var t=this;if(0!==this.model.selectForm.departmentID.length){this.imgLoading=!0,this.change(),localStorage.todoPageSize&&(this.pageSize=Number(localStorage.todoPageSize));var e={startDate:this.startDate,endDate:this.endDate,deptID:this.model.selectForm.departmentID,pageIndex:this.pageIndex-1,pageSize:this.pageSize,orderBy:this.orderBy};this.$axios.post("/api/StatisticalPeopleProInst/page",e).then(function(e){t.tableData=e.data.statisticalPeopleProInst,t.total=e.data.total,t.imgLoading=!1}).catch(function(e){t.imgLoading=!1,t.$message.error("查询列表数据失败!ERROR MESSAGE:"+e)})}else this.$message.warning("请选择组织进行查询！")},reset:function(){var t=this;this.childDataUrl.chooseProject=new Array,this.$nextTick(function(){t.selectValue=1,t.startDate="",t.endDate="",t.model.date=[],t.model.companys="",t.model.selectForm.departmentID=""})},handleSizeChange:function(t){var e=""+t;this.pageIndex=1,this.pageSize=parseInt(e),localStorage.todoPageSize=t,this.getList()},handleCurrentChange:function(t){this.pageIndex=t,this.getList()},exportList:function(){var t=this;this.change(),l.a.startLoading({lock:!0,text:"数据量过大，正在拼命加载中...",background:"rgba(255, 255, 255, 0.9)",target:document.querySelector(".loadingtext")});var e={startDate:this.startDate,endDate:this.endDate,deptID:this.model.selectForm.departmentID,pageIndex:0,pageSize:1e3,orderBy:this.orderBy};this.$axios.post("/api/exportExcelForTable",{tableName:"动态-岗位/人-以“人”统计处理流程实例最多",params:e},{responseType:"blob"}).then(function(t){l.a.endLoading();var e=t.data;s.a.exportSearchList("动态-岗位/人-以“人”统计处理流程实例最多",e)}).catch(function(e){l.a.endLoading(),t.$message.error("导出失败!ERROR MESSAGE:"+e)})},openDailog:function(t,e){this.comp.component=t,this.showdialog=!0,s.a.showDailog_mask(),"project_dialog"==t&&(this.childDataUrl.getTree="getTree",this.childDataUrl.isFirst="2")},hideComponent:function(){this.showdialog=!1,s.a.hiddenDailog_mask()},showMsgfromchild:function(t){if(this.oneCheck){var e=t.last.lastNode;this.model.companys_t=e,this.model.companys=e,this.model.companys.length>15&&(this.model.companys=this.model.companys.substr(0,20)+"..."),this.model.selectForm.departmentID=t.item.orgID,this.model.selectForm.companyCode=t.last.lastId.toString(),this.childDataUrl.chooseProject=t}this.hideComponent()},sureSubmit:function(t){}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"staticReports"},[a("el-container",[a("el-header",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.imgLoading,expression:"imgLoading"}],staticClass:"staticReports minWidth loadingtext",attrs:{"element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[a("el-row",{staticClass:"staticReports-header"},[a("el-col",{staticClass:"peoplePublichTitle",attrs:{span:17}},[a("span",{staticClass:"mz",on:{click:function(e){t.$router.back(-1)}}},[t._v("流程报表")]),a("i",{class:t.iconTwo})]),t._v(" "),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{type:"primary",round:"",size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)],1),t._v(" "),a("div",{staticClass:"taticReports-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"statement"},[a("el-row",[a("el-col",{staticClass:"fz16 livingmore",attrs:{span:24}},[t._v("\n                动态-岗位/人-以“人”统计处理实例最多\n              ")])],1),t._v(" "),a("el-row",{staticClass:"staticReports-middle lh35",staticStyle:{"padding-left":"1px !important"}},[a("el-col",{staticStyle:{"min-width":"94px"},attrs:{span:2,sm:4,md:1}},[a("span",[t._v("组织选择 : ")])]),t._v(" "),a("el-col",{staticClass:"peopleles",attrs:{span:14}},[a("span",{on:{dblclick:function(e){t.openDailog("project_dialog")}}},[a("i",{staticClass:"iconfont icon-organization pl10",on:{click:function(e){t.openDailog("project_dialog")}}}),t._v(" "),a("el-input",{staticClass:"input-text",attrs:{disabled:"",placeholder:""},model:{value:t.model.companys,callback:function(e){t.$set(t.model,"companys",e)},expression:"model.companys"}})],1)])],1),t._v(" "),a("el-row",{staticClass:"lh35"},[a("el-col",{staticStyle:{"min-width":"94px","line-height":"30px"},attrs:{span:2,sm:4,md:1}},[a("span",{staticClass:"lh35"},[t._v("时间段 :")])]),t._v(" "),a("el-col",{attrs:{span:7,sm:8}},[a("el-radio-group",{on:{change:t.change},model:{value:t.selectValue,callback:function(e){t.selectValue=e},expression:"selectValue"}},[a("el-radio",{attrs:{label:1}},[t._v("本周")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("本月")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("本季度")]),t._v(" "),a("el-radio",{attrs:{label:4}},[t._v("本年")]),t._v(" "),a("el-radio",{attrs:{label:5}},[t._v("其他：")])],1)],1),t._v(" "),5===t.selectValue?a("el-col",{attrs:{span:7,sm:6}},[a("div",{staticClass:"border"},[a("el-date-picker",{attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.model.date,callback:function(e){t.$set(t.model,"date",e)},expression:"model.date"}})],1)]):t._e(),t._v(" "),a("el-col",{staticClass:"buttonWrap",attrs:{span:4}},[a("el-button",{staticClass:"upload",attrs:{type:"primary",round:"",size:"mini"},on:{click:t.exportList}},[a("i",{staticClass:"iconfont icon-export"}),t._v("导出")])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"taticReports-content"},[a("div",{staticClass:"statement"},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":"",height:t.isShow?t.fullHeight-318:t.fullHeight-215,border:""},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{prop:"rowNumber",type:"index",width:"50",sortable:"custom",label:"排名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",sortable:"custom",label:"人员"}}),t._v(" "),a("el-table-column",{attrs:{prop:"department","min-width":"300",sortable:"custom",label:"部门"}}),t._v(" "),a("el-table-column",{attrs:{prop:"approvalCnt",label:"处理流程实例数",width:"200",sortable:"custom"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.imgLoading,expression:"!imgLoading"}],attrs:{slot:"empty"},slot:"empty"},[a("p",{style:{marginTop:"23px"}},[t._v("暂无数据")])]),t._v(" "),a("div",{attrs:{slot:"append"},slot:"append"},[a("page",{attrs:{pageIndex:t.pageIndex,total:t.total,pageSize:t.pageSize,pageSizesList:t.pageSizesList},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}})],1)],1)],1)])],1),t._v(" "),t.showdialog?a(t.comp.component,{tag:"component",attrs:{childDataUrl:t.childDataUrl},on:{hideComponent:t.hideComponent,sureSubmit:t.showMsgfromchild}}):t._e()],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(D,w,!1,function(t){a("6Q/B")},"data-v-16411c61",null);e.default=f.exports}});
//# sourceMappingURL=30.5e414f35fab090c03c73.js.map