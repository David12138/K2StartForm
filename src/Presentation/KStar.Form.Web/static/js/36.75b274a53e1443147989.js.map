{"version":3,"sources":["webpack:///src/components/views/iframeDialog.vue","webpack:///./src/components/views/iframeDialog.vue?7307","webpack:///./src/components/views/iframeDialog.vue"],"names":["iframeDialog","name","components","originator_dailog","process_dailog","process_dialog","project_dialog","flowchart_dialog","mounted","this","compName","getUrlParam","person","setDialog","okresult","key","data","model","w","h","window","parent","postMessage","util","getCookie","getLocalStorage","openDailog","childDataUrl","url","showdialog","component","whereParams","closeShow","methods","src","width","height","param","href","reg","RegExp","result","location","match","decodeURIComponent","type","getTree","companytree","showMsgfromchild","results","re","id","last","lastId","fullName","item","orgFullName","orgName","path","lastNode","push","processFullName","text","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","peoArr","next","done","origina","value","displayName","loginName","userId","err","return","closeWin","views_iframeDialog","render","_vm","_h","$createElement","_self","_c","tag","attrs","on","hideComponent","$event","sureSubmit","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/36.75b274a53e1443147989.js","sourcesContent":["<!--\n * File Name: iframe\n * Author:\n * Version:1.0\n * Date: 2018.06.7\n * purpose Description:\n * Modification history :\n-->\n<template>\n    <!--弹窗组件-->\n    <component :is=\"component\" v-on:hideComponent=\"closeWin()\" v-on:sureSubmit=\"showMsgfromchild\" v-bind:childDataUrl=\"childDataUrl\" v-bind:closeShow=\"closeShow\"></component>\n</template>\n\n<script>\n  import orginatordialog from '../dailog/originator_dailog.vue'\n  import projectdialog from '../dailog/project_dialog.vue'\n  import processdialog from '../dailog/process_dialog.vue'\n  import flowchartdialog from '../dailog/flowchart_dialog.vue'\n  // import { util } from \"../../js/util\";\n  import util from \"../../js/util\";\n\n  export default {\n    name: 'iframeDialog',\n    components: {\n      'originator_dailog': orginatordialog,\n      'process_dailog': processdialog,\n      'project_dialog': projectdialog,\n      'flowchart_dialog': flowchartdialog,\n    },\n    /**\n     * 外部iframe访问界面构造函数\n     */\n    mounted() {\n      this.compName = this.getUrlParam('compName');\n      this.person = this.getUrlParam('userId');\n      this.setDialog(this.compName);\n      var okresult = {};\n      okresult.key = 'setCss';\n      okresult.compName = this.compName;\n      okresult.data = this.model;\n      okresult.w = this.w;\n      okresult.h = this.h;\n      window.parent.postMessage(okresult,'*');\n      if (!util.getCookie('access_token') && !util.getLocalStorage('access_token')) {\n//        this.getToken();\n      } else {\n        this.openDailog(this.compName);\n      }\n    },\n    data() {\n      return {\n        compName: '',\n        childDataUrl: {url: ''},//传给子组件的值\n        showdialog: false,\n        //动态变更弹出框组件\n        component: '',\n        person:'',\n        model:{whereParams: {}},\n        closeShow: true,\n        w:0,\n        h:0\n      }\n    },\n    methods: {\n      setDialog(src){\n        var width = 600;\n        var height = 490;\n        switch (src){\n          case 'originator_dailog':\n            width = 600;\n            height = 490;\n            break;\n          case 'project_dialog':\n            width = 600;\n            height = 490;\n            break;\n          case 'process_dailog':\n            width = 1123;\n            height = 446;\n            break;\n          default:\n        }\n        this.w = width;\n        this.h = height;\n      },\n      // 获取对应url里面的属性值\n      getUrlParam(param, href){\n        let reg = new RegExp(\"[?&]\"+param + \"=([^&]*)\", \"i\"); // 匹配目标参数，i表示区分大小写\n        href = href || window.location.href;\n        let result = href.match(reg); // result为数组，分别为全词，匹配的第一项（按括号区隔的），匹配的第二项……\n        if (result != null) {\n          return decodeURIComponent(result[1]);\n        } else {\n          return null;\n        }\n      },\n//      getToken() {\n////        util.clearCookie(); //清除原有cookie\n//        var qs = require('qs');\n//        var params = qs.stringify({\"grant_type\":\"password\",\n//          \"username\":\"SSO)h%~EUAp^S%t_\" + this.person,\n//          \"password\":\"SSO)h%~EUAp^S%t_\" + this.person});\n//        this.$axios.post(\"http://bpm.vankeservice.com:30009/paicoreuaa/oauth/token\",\n//          params,{\n//            headers: {\n//              \"Content-Type\": \"application/x-www-form-urlencoded\",\n//              Authorization: \"Basic azI6SzJwYXNzIQ==\"\n//            }\n//          }\n//        ).then(result => {\n//          util.setCookie(\"loginname\", this.person);\n//          for (let it in result.data) {\n//            util.setCookie(it, result.data[it]);\n//          }\n//          this.openDailog(this.compName);\n//        }).catch(err => {\n//          this.$message.error('连接服务器失败！'+err);\n//        });\n//      },\n      /**\n       * 打开弹出框组件\n       */\n      openDailog(type) {\n        // 弹出框类型\n        this.component = type;\n        if (type == 'originator_dailog') {//发起人\n          this.childDataUrl.getTree = 'getTree';\n          this.childDataUrl.companytree = 'companytree/page';\n        } else if (type == 'project_dialog') {//组织\n          this.childDataUrl.getTree = 'getTree';\n          this.childDataUrl.companytree = 'companytree/page';\n        }\n      },\n      /**\n       * 弹窗组件带出数据赋值给主组件\n       */\n      showMsgfromchild(data) {\n        var results = [];\n        if (data.type && data.type == \"project\") {\n          //选择组织架构\n          var re = {};\n          re.id = data.last.lastId;\n          re.fullName = data.item.orgFullName;\n          re.name = data.item.orgName;\n          re.path = data.last.lastNode;\n          results.push(re);\n\n        } else if (data.type && data.type == \"process\") {\n          //选择流程类别\n          this.model.whereParams.processFullName = data.text;\n        } else if (data.type && data.type == \"originator\") { // 选择发起人\n          for (let origina of data.peoArr) {\n            var re = {};\n            re.displayName = origina.name;\n            re.loginName = `Vanke\\\\${origina.userId}`;\n            results.push(re);\n          }\n        }\n        var okresult = {};\n        okresult.key = 'ok';\n        okresult.compName = this.compName;\n        okresult.data = results;\n        window.parent.postMessage(okresult,'*');\n      },\n      // 点击关闭或者取消触发方法\n      closeWin(data) {\n        var okresult = {};\n        okresult.key = 'close';\n        okresult.compName = this.compName;\n        okresult.data = {};\n        window.parent.postMessage(okresult,'*');\n      }\n    }\n  }\n</script>\n\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/views/iframeDialog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(_vm.component,{tag:\"component\",attrs:{\"childDataUrl\":_vm.childDataUrl,\"closeShow\":_vm.closeShow},on:{\"hideComponent\":function($event){_vm.closeWin()},\"sureSubmit\":_vm.showMsgfromchild}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4708ec4c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/views/iframeDialog.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./iframeDialog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./iframeDialog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4708ec4c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./iframeDialog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/views/iframeDialog.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}