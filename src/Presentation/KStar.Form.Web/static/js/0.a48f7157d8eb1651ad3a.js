webpackJsonp([0],{"+1cD":function(e,t){},"+X0E":function(e,t){},"/xpi":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("lHA8"),s=i.n(a),n=i("c/Tr"),o=i.n(n),r=i("BO1k"),l=i.n(r),c=i("woOf"),d=i.n(c),h=i("M4fF"),u=i("Vi29"),g={name:"OrganizationTree",props:{nodKey:{type:String,default:"id",require:!1},highlightCurrent:{require:!1,type:Boolean,default:!0},checkOnClickNode:{type:Boolean,require:!1,default:!0},expandOnClickNode:{type:Boolean,require:!1,default:!0},renderexpand:{type:Boolean,require:!1,default:!0},autoExpandParent:{type:Boolean,require:!1,default:!0},depthIdPath:{type:Boolean,require:!1,default:!1},isMountedGetData:{type:Boolean,require:!1,default:!0},defaultRootNode:{type:Object,require:!1,default:null},defaultPropLabel:{type:String,require:!1,default:"displayName"},defaultSort:{type:String,require:!1,default:"orderIndex"}},data:function(){return{organizationList:[],defaultProps:{label:"title",children:"children",isLeaf:"isLast"},loading:!1,currentNode:null,isFristLoadTree:!0,userPickUrl:u.baseUrl}},created:function(e){this.debouncedSearchTree=Object(h.debounce)(this.getTreeList,null)},mounted:function(){this.isMountedGetData&&this.debouncedSearchTree(null)},methods:{loadNodeData:function(e,t){return 0===e.level?void(this.isFristLoadTree=!1):void this.debouncedSearchTree(e,t)},getTreeList:function(e,t){var i=this;if(null===e)var a=null;else if(!e.data.isLast)a={ParentID:e.data.id,context:e.data.title};var s={url:i.userPickUrl.Base_User_URL+"/GetChildOrgTree",method:"post",data:a};i.httpService(s,function(e){if(e.data&&200===e.status)if(e.data.data&&e.data.data.length>0){var a=e.data.data;t?t(a):i.organizationList=a}else t&&t([]);i.$emit("closeLoadding")})},nodeClick:function(e,t,i){this.currentNode=t,this.$emit("node-click",e,t,i)},currentChange:function(e,t){this.$emit("current-change",e,t)},checkChange:function(e,t,i){this.$emit("check-change",e,t,i)},check:function(e,t){this.$emit("check",e,t)},setChecked:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this;a.$refs.organizationTree&&a.$nextTick(function(){a.$refs.organizationTree.setChecked(e,t,i)})},setCurrentKey:function(e){var t=this;t.$nextTick(function(){if(e&&t.$refs.organizationTree){t.$refs.organizationTree.setCurrentKey(e);var i=t.$refs.organizationTree.getNode(e);i&&t.$emit("node-click",i.data,i,t.$refs.organizationTree.$el)}})},setCheckedKeys:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$nextTick(function(){t.$refs.organizationTree.setCheckedKeys(e,i)})},getNode:function(e){return this.$refs.organizationTree.getNode(e)},getCheckedNodes:function(){return this.$refs.organizationTree.getCheckedNodes()},toTree:function(e){if(null==e||0==e.length)return[];var t=[],i={};return e.forEach(function(e){delete e.children}),e.forEach(function(e){i[e.id]=e}),e.forEach(function(e){var a=i[e.parentId];a?(a.children||(a.children=[])).push(e):t.push(e)}),t},httpService:function(e,t){var i=this;i.loading=!0,i.$emit("openLoadding"),i.$axios(e).then(function(e){i.loading=!1,t(e)}).catch(function(e){throw i.loading=!1,i.$emit("closeLoadding"),e})},getSecode:function(e){e={ParentID:e.data.id,parentId:-1,context:e.data.title,isLeaf:e.data.isLast,level:e.level,spread:!1};var t={url:this.userPickUrl.Base_User_URL+"/GetChildOrgTree",method:"post",data:e};e.isLast||this.$axios(t).then(function(e){})}},computed:{personTableHeight:function(){return this.organizationList.length>0?333:223}}},f={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tree",{ref:"organizationTree",attrs:{"node-key":e.nodKey,props:e.defaultProps,data:e.organizationList,"highlight-current":e.highlightCurrent,"check-on-click-node":e.checkOnClickNode,"expand-on-click-node":e.expandOnClickNode,"auto-expand-parent":e.autoExpandParent,load:e.loadNodeData,loading:e.loading,height:e.personTableHeight,lazy:""},on:{"node-click":e.nodeClick,"current-change":e.currentChange,"check-change":e.checkChange,check:e.check}})],1)},staticRenderFns:[]},p=i("VU/8")(g,f,!1,null,null,null).exports,v=i("Gu7T"),m=i.n(v),y=i("T//Y"),C={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20,50]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",tableData:[],currentRow:null,usertags:[],isActive:!1,searchTxt:"",orgPersons:[],newisEmptyApplicant:!1,LeaveDimission:!1,multipleSelection:[],isLeave:"",orgPersonTable:[],collectIcon:"",dialogTags:[],userPickUrl:u.baseUrl,tempOrgID:""}},components:{page:y.a},props:{persons:{type:String,default:""},chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:[]},type:{type:String,default:""},mutilselectCheck:{type:String,default:""},currentOrgId:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}}},computed:{personTableHeight:function(){return this.tableData.length>0?195:240},userTableHeight:function(){return this.userdata.length>0?195:230}},watch:{tags:{handler:function(e,t){e&&(this.parmDialog.classifier?this.setIframeSelect(this.orgPersonTable,e):this.doSelection(this.orgPersonTable,e),this.dialogTags=[].concat(m()(e)))},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(e)},deep:!0}},mounted:function(){this.ownIsleave(this.orgPersonTable),this.dialogTags=[].concat(m()(this.tags))},methods:{selectCheckChange:function(e,t){t.type="User";if("true"===this.mutilselectCheck){var i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;r.type="User",r.UserAccount=r.UserAccount,r.Name=r.UserDisplayName}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}var c=this.getPersonAccount(this.orgPersonTable);this.dialogTags=this.dialogTags.filter(function(e){return-1==c.indexOf(e.UserAccount)});var h=!0,u=!1,g=void 0;try{for(var f,p=l()(e);!(h=(f=p.next()).done);h=!0){var v=f.value;this.dialogTags.push(d()({},v))}}catch(e){u=!0,g=e}finally{try{!h&&p.return&&p.return()}finally{if(u)throw g}}}else if(e.length>=1){var y=[].concat(m()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var C=!0,T=!1,b=void 0;try{for(var k,S=l()(y);!(C=(k=S.next()).done);C=!0){if("User"===k.value.type){var x=e.filter(function(e){return e.UserAccount!==t.UserAccount});this.$refs.employeeTable.toggleRowSelection(x[0],!1);var I=this.dialogTags.findIndex(function(e){return"User"===e.type});this.dialogTags.splice(I,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||this.dialogTags.push(t)}}catch(e){T=!0,b=e}finally{try{!C&&S.return&&S.return()}finally{if(T)throw b}}}else this.dialogTags.push(t)}else{this.$refs.employeeTable.toggleRowSelection(t,!1);var P=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(P,1)}this.$emit("choosePersonTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},handleSizeChange:function(e){var t=e;this.infoPage.pageIndex=1,this.infoPage.pageSize=parseInt(t),this.searchTxt?this.handleSearch():this.getPerson(this.searchTxt,this.currentOrgId,this.LeaveDimission)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getPerson(t.searchTxt,t.currentOrgId,t.LeaveDimission),setTimeout(function(){t.doSelection(t.orgPersonTable,t.dialogTags),t.setIframeSelect(t.orgPersonTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$refs.employeeTable.toggleRowSelection(e,!0)})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.employeeTable.clearSelection()});var i=function(e){e.SysId?t.dialogTags=[]:t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.SysId})},a=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(a=(o=r.next()).done);a=!0){i(o.value)}}catch(e){s=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw n}}}else{var c=t.getPersonAccount(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="User",c.includes(p.UserAccount)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}var v=!0,m=!1,y=void 0;try{for(var C,T=l()(t.dialogTags);!(v=(C=T.next()).done);v=!0){var b=C.value;switch(b.type){case"User":b.UserAccount=b.UserAccount,b.Name=b.UserDisplayName}}}catch(e){m=!0,y=e}finally{try{!v&&T.return&&T.return()}finally{if(m)throw y}}t.$emit("choosePersonTag",t.dialogTags)},doSelection:function(e,t){var i=this;i.$nextTick(function(){t&&t.length>=1?("false"===i.mutilselectCheck&&i.$refs.employeeTable.clearSelection(),t.forEach(function(t){var a=e.findIndex(function(e){return e.UserAccount===t.UserAccount});a>-1?i.$nextTick(function(){i.$refs.employeeTable.toggleRowSelection(e[a],!0)}):i.$nextTick(function(){i.$refs.employeeTable.toggleRowSelection(e[a],!1)})})):0===t.length&&i.$nextTick(function(){i.$refs.employeeTable.clearSelection()})})},getPersonId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value.SysId;r&&t.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},getPersonAccount:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value.UserAccount;r&&t.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},onlyDelete:function(e){var t=this.getPersonAccount(this.orgPersonTable).findIndex(function(t){return t===e.UserAccount});this.$refs.employeeTable.toggleRowSelection(this.orgPersonTable[t],!1)},Collectchange:function(e){var t=this;if(e.IsCollect){i={IsCollect:!1,refUserId:e.SysId};t.$axios({url:t.userPickUrl.Base_User_URL+"/SetCollectPerson",method:"POST",data:i}).then(function(i){0===i.data.code?(t.$message.success("取消收藏"),e.IsCollect=!e.IsCollect):t.$message.success("取消收藏失败")}).catch(function(e){t.$message.error("数据获取失败!ERROR MESSAGE:"+e.message)})}else{var i={IsCollect:!0,refUserId:e.SysId};t.$axios({url:t.userPickUrl.Base_User_URL+"/SetCollectPerson",method:"POST",data:i}).then(function(i){0===i.data.code?(t.$message.success("收藏成功"),e.IsCollect=!e.IsCollect):t.$message.success("收藏失败")}).catch(function(e){t.$message.error("数据获取失败!ERROR MESSAGE:"+e.message)})}},handleSearch:function(){""!==this.searchTxt?this.getPerson(this.searchTxt,this.currentOrgId,this.LeaveDimission):this.$message.error("请填写用户信息")},ownIsleave:function(e){var t=!0,i=!1,a=void 0;try{for(var s,n=l()(e);!(t=(s=n.next()).done);t=!0){s.value.UserStatus?this.isLeave="在职":this.isLeave="离职"}}catch(e){i=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(i)throw a}}},getPerson:function(e,t,i){var a=this;""!==e&&e&&(t="");var s={page:a.infoPage.pageIndex,limit:a.infoPage.pageSize,OrgId:t,key:e,isLeave:i};a.doRest(s,function(e){a.orgPersonTable=e.data,a.infoPage.total=e.count,a.ownIsleave(a.orgPersonTable),a.doSelection(a.orgPersonTable,a.dialogTags),a.setIframeSelect(a.orgPersonTable,a.dialogTags)},function(e){})},doRest:function(e,t){var i=this;i.loading=!0,i.$axios.post(i.userPickUrl.Base_User_URL+"/GetUserListByOrgId",e).then(function(e){200===e.status&&(t(e.data),i.loading=!1)}).catch(function(e){throw i.loading=!1,e})},httpService:function(e,t){var i=this;i.loading=!0,i.$axios(e).then(function(e){i.loading=!1,t(e)}).catch(function(e){throw i.loading=!1,e})},setIframeSelect:function(e,t){var i=this;i.$nextTick(function(){t&&t.length>=1?("false"===i.mutilselectCheck&&i.$refs.employeeTable.clearSelection(),t.forEach(function(t){var a=e.findIndex(function(e){return e.UserAccount===t.UserAccount});a>-1?i.$refs.employeeTable.toggleRowSelection(e[a],!0):i.$nextTick(function(){i.$refs.employeeTable.toggleRowSelection(e[a],!1)})})):0===t.length&&i.$nextTick(function(){i.$refs.employeeTable.clearSelection()})})}}},T={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("div",{staticClass:"choosePerson-data"},[i("div",{staticClass:"search-condition btn-linkage"},[i("el-row",[i("el-col",{staticClass:"serchCOL",attrs:{span:24}},[i("el-input",{staticClass:"searchText",attrs:{placeholder:"员工编号和姓名",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),i("div",{staticClass:"searchline"},[i("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n                    ")]),e._v(" "),[i("el-checkbox",{staticClass:"choosenSwitch",model:{value:e.LeaveDimission,callback:function(t){e.LeaveDimission=t},expression:"LeaveDimission"}},[e._v("离职人员")])]],2)],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:24}},[i("div",{staticClass:"table-box"},[i("el-table",{ref:"employeeTable",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.orgPersonTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[i("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),i("el-table-column",{attrs:{label:"用户",center:"",prop:"UserName","show-overflow-tooltip":"",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{label:"账号",prop:"UserAccount","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{label:"状态",width:"70","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.isLeave))])]}}])}),e._v(" "),i("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"收藏",width:"50","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"icon iconfont",class:t.row.IsCollect?"icon-noCollect-icon":"icon-collect-icon-copy",staticStyle:{"font-size":"16px"},attrs:{title:t.row.IsCollect?"已收藏":"未收藏"},on:{click:function(i){i.stopPropagation(),e.Collectchange(t.row)}}})]}}])})],1)],1)])],1)])],1)])]),e._v(" "),i("div",{staticClass:"table-foot"},[i("div",{staticClass:"page-sizes-box"},[i("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,"pager-count":4,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var b={name:"ChoosepersonNew",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",currentOrgId:"",code:""}},components:{OrganizationTree:p,choosentable:i("VU/8")(C,T,!1,function(e){i("ceSc")},"data-v-79928cae",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.employeeTable.getPerson()})},methods:{handleClick:function(e,t){this.currentOrgId=e.id,this.$refs.employeeTable.getPerson(null,e.id,null)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},choosePersonTag:function(e){this.$emit("empSelectTags",e)}}},k={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("el-col",{staticClass:"treeWidth",attrs:{span:10}},[i("div",{staticClass:"tree-container"},[i("organization-tree",{ref:"tree",on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),i("el-col",{attrs:{span:14}},[i("choosentable",{ref:"employeeTable",staticClass:"choosePersonTable",attrs:{tags:e.tags,type:e.type,mutilselectCheck:e.mutilselectCheck,parmDialog:e.parmDialog,currentOrgId:e.currentOrgId,deleteTags:e.deleteTags},on:{choosePersonTag:e.choosePersonTag}})],1)],1)],1)])])},staticRenderFns:[]};var S=i("VU/8")(b,k,!1,function(e){i("VgUy")},"data-v-b2d672ae",null).exports,x={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",currentRow:null,usertags:[],isActive:!1,searchTxt:"",orgTable:[],newisEmptyApplicant:!1,multipleOrgTable:[],dialogTags:[],userPickUrl:u.baseUrl}},components:{page:y.a},props:{chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:function(){return[]}},type:{type:String,default:""},orgTreeID:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){if(this.orgTable)return this.orgTable.length>0?185:230}},watch:{tags:{handler:function(e,t){e&&(this.mutilselectCheck?this.setIframeSelect(this.orgTable,e):this.doSelection(this.orgTable,e),this.dialogTags=this.tags)},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(this.orgTable,e)},deep:!0}},mounted:function(){this.dialogTags=this.tags},methods:{selectCheckChange:function(e,t){t.type="Org";if("true"===this.mutilselectCheck){if(e.length>=1){var i=!0,a=!1,n=void 0;try{for(var r,c=l()(e);!(i=(r=c.next()).done);i=!0){var h=r.value;h.type="Org",h.UserDisplayName=h.Name,h.UserAccount=h.SysId}}catch(e){a=!0,n=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw n}}}else this.$refs.multipleOrgTable.toggleRowSelection(t,!1);var u=this.getPersonId(this.orgTable);this.dialogTags=this.dialogTags.filter(function(e){return-1==u.indexOf(e.SysId)});var g=this.getPersonId(this.dialogTags),f=!0,p=!1,v=void 0;try{for(var y,C=l()(e);!(f=(y=C.next()).done);f=!0){var T=y.value;-1==g.indexOf(T.SysId)&&this.dialogTags.push(d()({},T))}}catch(e){p=!0,v=e}finally{try{!f&&C.return&&C.return()}finally{if(p)throw v}}}else if(e.length>=1){var b=[].concat(m()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var k=!0,S=!1,x=void 0;try{for(var I,P=l()(b);!(k=(I=P.next()).done);k=!0){if("Org"===I.value.type){var w=e.filter(function(e){return e.SysId!==t.SysId});this.$refs.multipleOrgTable.toggleRowSelection(w[0],!1);var _=this.dialogTags.findIndex(function(e){return"Org"===e.type});this.dialogTags.splice(_,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||(this.dialogTags.push(t),this.dialogTags=o()(new s.a(this.dialogTags)))}}catch(e){S=!0,x=e}finally{try{!k&&P.return&&P.return()}finally{if(S)throw x}}}else this.dialogTags.push(t)}else{this.$refs.multipleOrgTable.toggleRowSelection(t,!1);var D=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(D,1)}var N=!0,O=!1,$=void 0;try{for(var R,z=l()(e);!(N=(R=z.next()).done);N=!0){var L=R.value;"Org"===L.type&&(L.UserDisplayName=L.Name,L.UserAccount=L.SysId)}}catch(e){O=!0,$=e}finally{try{!N&&z.return&&z.return()}finally{if(O)throw $}}this.$emit("chooseOrgTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},handleSizeChange:function(e){var t=e;this.infoPage.pageIndex=1,this.infoPage.pageSize=parseInt(t),_this.searchTxt?_this.handleSearch():_this.getOrg(_this.orgTreeID),setTimeout(function(){_this.doSelection(_this.orgTable,_this.dialogTags)},500)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getOrg(t.orgTreeID),setTimeout(function(){t.doSelection(t.orgTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$nextTick(function(){t.$refs.multipleOrgTable.toggleRowSelection(e,!0)})})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.multipleOrgTable.clearSelection()});var i=t.getPersonId(t.orgTable),a=function(a){-1===i.indexOf(a.SysId)?t.dialogTags=[].concat(m()(e)):t.dialogTags=t.dialogTags.filter(function(e){return e.SysId!==a.SysId})},s=!0,n=!1,o=void 0;try{for(var r,c=l()(e);!(s=(r=c.next()).done);s=!0){a(r.value)}}catch(e){n=!0,o=e}finally{try{!s&&c.return&&c.return()}finally{if(n)throw o}}}else{var d=t.getPersonId(t.dialogTags),h=!0,u=!1,g=void 0;try{for(var f,p=l()(e);!(h=(f=p.next()).done);h=!0){var v=f.value;v.type="Org",v.UserAccount=v.SysId,d.includes(v.SysId)||t.dialogTags.push(v)}}catch(e){u=!0,g=e}finally{try{!h&&p.return&&p.return()}finally{if(u)throw g}}}var y=!0,C=!1,T=void 0;try{for(var b,k=l()(t.dialogTags);!(y=(b=k.next()).done);y=!0){var S=b.value;switch(S.type){case"Org":S.UserDisplayName=S.Name}}}catch(e){C=!0,T=e}finally{try{!y&&k.return&&k.return()}finally{if(C)throw T}}t.$emit("chooseOrgTag",t.dialogTags)},doSelection:function(e,t){var i=this,a=this;t&&t.length>=1?t.forEach(function(t){var i=e.findIndex(function(e){return e.SysId===t.SysId});i>-1?a.$nextTick(function(){a.$refs.multipleOrgTable.toggleRowSelection(e[i],!0)}):a.$nextTick(function(){a.$refs.multipleOrgTable.toggleRowSelection(e[i],!1)})}):0===t.length&&a.$nextTick(function(){i.$refs.multipleOrgTable.clearSelection()})},getPersonId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value.SysId;r&&t.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},onlyDelete:function(e,t){var i=this.getPersonId(e).indexOf(t.SysId);this.$refs.multipleOrgTable.toggleRowSelection(e[i],!1)},handleSearch:function(){this.orgTreeID="",""!==this.searchTxt?this.getOrgSearch(this.orgTreeID,this.searchTxt):this.$message.error("请输入岗位信息")},getOrg:function(e){var t=this,i={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,OrgID:e};t.doRest(i,function(e){t.orgTable=e.data,t.infoPage.total=e.count,t.doSelection(t.orgTable,t.dialogTags),t.setIframeSelect(t.orgTable,t.dialogTags)},function(e){})},doRest:function(e,t){var i=this;i.loading=!0,i.$axios.post(i.userPickUrl.Base_User_URL+"/GetOrgListByOrgId",e).then(function(e){200===e.status&&(t(e.data),i.loading=!1)}).catch(function(e){throw i.loading=!1,e})},httpService:function(e,t){var i=this;i.loading=!0,i.$axios(e).then(function(e){i.loading=!1,t(e)}).catch(function(e){throw i.loading=!1,e})},getOrgSearch:function(e,t){var i=this,a={page:i.infoPage.pageIndex,limit:i.infoPage.pageSize,OrgID:"",key:t};i.$axios.post(i.userPickUrl.Base_User_URL+"/GetOrgListByKey",a).then(function(e){i.orgTable=e.data.data,i.infoPage.total=e.data.count,i.doSelection(i.orgTable,i.dialogTags)}).catch(function(e){})},setIframeSelect:function(e,t){var i=this;i.$nextTick(function(){t&&t.length>=1?t.forEach(function(t){var a=e.findIndex(function(e){return e.SysId===t.SysId});a>-1?i.$refs.multipleOrgTable.toggleRowSelection(e[a],!0):i.$nextTick(function(){i.$refs.multipleOrgTable.toggleRowSelection(e[a],!1)})}):0===t.length&&i.$nextTick(function(){i.$refs.multipleOrgTable.clearSelection()})})}}},I={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("div",{staticClass:"choosePerson-data"},[i("div",{staticClass:"search-condition btn-linkage"},[i("el-row",[i("el-col",{staticClass:"serchCOL",attrs:{span:24}},[i("el-input",{staticClass:"searchText",attrs:{placeholder:"组织名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),i("div",{staticClass:"searchline"},[i("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n                    ")])],1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:24}},[i("div",{staticClass:"table-box"},[i("el-table",{ref:"multipleOrgTable",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.orgTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{staticClass:"clcsWidth",attrs:{label:"组织",center:"",prop:"Name","show-overflow-tooltip":""}})],1)],1)])],1)])],1)])]),e._v(" "),i("div",{staticClass:"table-foot"},[i("div",{staticClass:"page-sizes-box"},[i("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var P={name:"chooseOrg",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",currentSelectOrganizationId:"",isActive:!1,code:"",LeaveDimission:!1,orgTreeID:""}},components:{OrganizationTree:p,orgTable:i("VU/8")(x,I,!1,function(e){i("m6Cw")},"data-v-275e781c",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){},methods:{handleClick:function(e,t){this.orgTreeID=e.id,this.$refs.orgTable.getOrg(e.id)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},chooseOrgTag:function(e){this.$emit("empSelectTags",e)}}},w={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("el-col",{staticClass:"treeWidth",attrs:{span:10}},[i("div",{staticClass:"tree-container"},[i("organization-tree",{ref:"tree",on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),i("el-col",{attrs:{span:14}},[i("org-table",{ref:"orgTable",staticClass:"choosePersonTable",attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,orgTreeID:e.orgTreeID,deleteTags:e.deleteTags},on:{chooseOrgTag:e.chooseOrgTag}})],1)],1)],1)])])},staticRenderFns:[]};var _=i("VU/8")(P,w,!1,function(e){i("PTnI")},"data-v-7b8a579c",null).exports,D={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",currentRow:null,usertags:[],isActive:!1,searchTxt:"",positionTable:[],newisEmptyApplicant:!1,multiplePositionTable:[],userPickUrl:u.baseUrl}},components:{page:y.a},props:{chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:function(){return[]}},type:{type:String,default:""},orgTreeID:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.positionTable.length>0?185:230}},watch:{tags:{handler:function(e,t){e&&(this.mutilselectCheck?this.setIframeSelect(this.positionTable,e):this.doSelection(this.positionTable,e),this.dialogTags=this.tags)},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(this.positionTable,e)},deep:!0}},mounted:function(){this.dialogTags=this.tags},methods:{selectCheckChange:function(e,t){t.type="Position";if("true"===this.mutilselectCheck){if(e.length>=1){var i=!0,a=!1,n=void 0;try{for(var r,c=l()(e);!(i=(r=c.next()).done);i=!0){var h=r.value;h.type="Position",h.UserDisplayName=h.Name,h.UserAccount=h.SysId}}catch(e){a=!0,n=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw n}}}else this.$refs.multiplePositionTable.toggleRowSelection(t,!1);var u=this.getPersonId(this.positionTable);if(console.log(this.dialogTags,this.tags),this.dialogTags){this.dialogTags=this.dialogTags.filter(function(e){return-1==u.indexOf(e.SysId)});var g=this.getPersonId(this.dialogTags),f=!0,p=!1,v=void 0;try{for(var y,C=l()(e);!(f=(y=C.next()).done);f=!0){var T=y.value;-1==g.indexOf(T.SysId)&&this.dialogTags.push(d()({},T))}}catch(e){p=!0,v=e}finally{try{!f&&C.return&&C.return()}finally{if(p)throw v}}}}else if(e.length>=1){var b=[].concat(m()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var k=!0,S=!1,x=void 0;try{for(var I,P=l()(b);!(k=(I=P.next()).done);k=!0){if("Position"===I.value.type){var w=e.filter(function(e){return e.SysId!==t.SysId});this.$refs.multiplePositionTable.toggleRowSelection(w[0],!1);var _=this.dialogTags.findIndex(function(e){return"Position"===e.type});this.dialogTags.splice(_,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||(this.dialogTags.push(t),this.dialogTags=o()(new s.a(this.dialogTags)))}}catch(e){S=!0,x=e}finally{try{!k&&P.return&&P.return()}finally{if(S)throw x}}}else this.dialogTags.push(t)}else{this.$refs.multiplePositionTable.toggleRowSelection(t,!1);var D=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(D,1)}var N=!0,O=!1,$=void 0;try{for(var R,z=l()(this.dialogTags);!(N=(R=z.next()).done);N=!0){var L=R.value;"Position"===L.type&&(L.UserDisplayName=L.Name,L.UserAccount=L.SysId)}}catch(e){O=!0,$=e}finally{try{!N&&z.return&&z.return()}finally{if(O)throw $}}this.$emit("chooseOrgTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},handleSizeChange:function(e){var t=this,i=e;t.infoPage.pageIndex=1,t.infoPage.pageSize=parseInt(i),_this.searchTxt?_this.handleSearch():_this.getPosition(_this.orgTreeID),setTimeout(function(){t.doSelection(t.positionTable,t.dialogTags),_this.setIframeSelect(_this.positionTable,_this.dialogTags)},500)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getPosition(t.orgTreeID),setTimeout(function(){t.doSelection(t.positionTable,t.dialogTags),t.setIframeSelect(t.positionTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$nextTick(function(){t.$refs.multiplePositionTable.toggleRowSelection(e,!0)})})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.multiplePositionTable.clearSelection()});var i=function(e){t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.SysId})},a=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(a=(o=r.next()).done);a=!0){i(o.value)}}catch(e){s=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw n}}t.dialogTags.splice(0,t.dialogTags.length)}else{var c=t.getPersonId(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="Position",p.UserDisplayName=p.Name,p.UserAccount=p.SysId,c.includes(p.SysId)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}t.$emit("chooseOrgTag",t.dialogTags)},doSelection:function(e,t){var i=this,a=this;t&&t.length>=1?t.forEach(function(t){var i=e.findIndex(function(e){return e.SysId===t.SysId});i>-1?a.$nextTick(function(){a.$refs.multiplePositionTable.toggleRowSelection(e[i],!0)}):a.$nextTick(function(){a.$refs.multiplePositionTable.toggleRowSelection(e[i],!1)})}):t&&0===t.length&&a.$nextTick(function(){i.$refs.multiplePositionTable.clearSelection()})},getPersonId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value.SysId;r&&t.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},onlyDelete:function(e,t){var i=this.getPersonId(e).indexOf(t.SysId);this.$refs.multiplePositionTable.toggleRowSelection(e[i],!1)},handleSearch:function(){""!==this.searchTxt?this.getOrgSearch(this.orgTreeID,this.searchTxt):this.$message.error("请输入岗位信息")},getPosition:function(e){var t=this,i={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,OrgID:e,type:"C"};t.doRest(i,function(e){t.positionTable=e.data,t.infoPage.total=e.count,t.doSelection(t.positionTable,t.dialogTags),t.setIframeSelect(t.positionTable,t.dialogTags)},function(e){})},doRest:function(e,t){var i=this;i.loading=!0,i.$axios.post(i.userPickUrl.Base_User_URL+"/GetPositionList",e).then(function(e){200===e.status&&(t(e.data),i.loading=!1)}).catch(function(e){throw i.loading=!1,e})},httpService:function(e,t){var i=this;i.loading=!0,i.$axios(e).then(function(e){i.loading=!1,t(e)}).catch(function(e){throw i.loading=!1,e})},getOrgSearch:function(e,t){var i=this,a={page:i.infoPage.pageIndex,limit:i.infoPage.pageSize,OrgID:"",type:"C",key:t};i.$axios.post(i.userPickUrl.Base_User_URL+"/GetPositionList",a).then(function(e){i.positionTable=e.data.data,i.infoPage.total=e.data.count,i.doSelection(i.positionTable,i.dialogTags)}).catch(function(e){})},setIframeSelect:function(e,t){var i=this;i.$nextTick(function(){t&&t.length>=1?t.forEach(function(t){var a=e.findIndex(function(e){return e.SysId===t.SysId});a>-1?i.$refs.multiplePositionTable.toggleRowSelection(e[a],!0):i.$nextTick(function(){i.$refs.multiplePositionTable.toggleRowSelection(e[a],!1)})}):0===t.length&&i.$nextTick(function(){i.$refs.multiplePositionTable.clearSelection()})})}}},N={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("div",{staticClass:"choosePerson-data"},[i("div",{staticClass:"search-condition btn-linkage"},[i("el-row",[i("el-col",{staticClass:"serchCOL",attrs:{span:24}},[i("el-input",{staticClass:"searchText",attrs:{placeholder:"岗位名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),i("div",{staticClass:"searchline"},[i("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n                    ")])],1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:24}},[i("div",{staticClass:"table-box"},[i("el-table",{ref:"multiplePositionTable",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.positionTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{label:"岗位名称",center:"",prop:"Name","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{label:"职级",center:"",prop:"RankName",width:"100px","show-overflow-tooltip":""}})],1)],1)])],1)])],1)])]),e._v(" "),i("div",{staticClass:"table-foot"},[i("div",{staticClass:"page-sizes-box"},[i("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var O={name:"chooseOrg",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",currentSelectOrganizationId:"",isActive:!1,code:"",LeaveDimission:!1,orgTreeID:""}},components:{OrganizationTree:p,positionTable:i("VU/8")(D,N,!1,function(e){i("giE4")},"data-v-764bf918",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){},methods:{handleClick:function(e,t){this.orgTreeID=e.id,this.$refs.positionTable.getPosition(e.id)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},chooseOrgTag:function(e){this.$emit("empSelectTags",e)}}},$={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("el-col",{staticClass:"treeWidth",attrs:{span:10}},[i("div",{staticClass:"tree-container"},[i("organization-tree",{ref:"tree",on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),i("el-col",{attrs:{span:14}},[i("positionTable",{ref:"positionTable",staticClass:"choosePersonTable",attrs:{mutilselectCheck:e.mutilselectCheck,tags:e.tags,orgTreeID:e.orgTreeID,deleteTags:e.deleteTags},on:{chooseOrgTag:e.chooseOrgTag}})],1)],1)],1)])])},staticRenderFns:[]};var R=i("VU/8")(O,$,!1,function(e){i("+1cD")},"data-v-4088396c",null).exports,z={name:"positionVsTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",currentRow:null,usertags:[],isActive:!1,searchTxt:"",vpositionTable:[],newisEmptyApplicant:!1,multipleVsPositionTable:[],userPickUrl:u.baseUrl}},components:{page:y.a},props:{chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:function(){return[]}},type:{type:String,default:""},orgTreeID:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.vpositionTable.length>0?185:230}},watch:{tags:{handler:function(e,t){e&&this.doSelection(this.vpositionTable,e),this.dialogTags=this.tags},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(this.vpositionTable,e)},deep:!0}},mounted:function(){this.dialogTags=this.tags},methods:{selectCheckChange:function(e,t){t.type="InventedPosition";if("true"===this.mutilselectCheck){if(e.length>=1){var i=!0,a=!1,n=void 0;try{for(var r,c=l()(e);!(i=(r=c.next()).done);i=!0){var h=r.value;h.type="InventedPosition",h.UserDisplayName=h.Name,h.UserAccount=h.SysId}}catch(e){a=!0,n=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw n}}}else this.$refs.multipleVsPositionTable.toggleRowSelection(t,!1);var u=this.getPersonId(this.vpositionTable);if(this.dialogTags){this.dialogTags=this.dialogTags.filter(function(e){return-1==u.indexOf(e.SysId)});var g=this.getPersonId(this.dialogTags),f=!0,p=!1,v=void 0;try{for(var y,C=l()(e);!(f=(y=C.next()).done);f=!0){var T=y.value;-1==g.indexOf(T.SysId)&&this.dialogTags.push(d()({},T))}}catch(e){p=!0,v=e}finally{try{!f&&C.return&&C.return()}finally{if(p)throw v}}}}else if(e.length>=1){var b=[].concat(m()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var k=!0,S=!1,x=void 0;try{for(var I,P=l()(b);!(k=(I=P.next()).done);k=!0){if("InventedPosition"===I.value.type){var w=e.filter(function(e){return e.SysId!==t.SysId});this.$refs.multipleVsPositionTable.toggleRowSelection(w[0],!1);var _=this.dialogTags.findIndex(function(e){return"InventedPosition"===e.type});this.dialogTags.splice(_,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||(this.dialogTags.push(t),this.dialogTags=o()(new s.a(this.dialogTags)))}}catch(e){S=!0,x=e}finally{try{!k&&P.return&&P.return()}finally{if(S)throw x}}}else this.dialogTags.push(t)}else{this.$refs.multipleVsPositionTable.toggleRowSelection(t,!1);var D=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(D,1)}var N=!0,O=!1,$=void 0;try{for(var R,z=l()(this.dialogTags);!(N=(R=z.next()).done);N=!0){var L=R.value;"InventedPosition"===L.type&&(L.UserDisplayName=L.Name,L.UserAccount=L.SysId)}}catch(e){O=!0,$=e}finally{try{!N&&z.return&&z.return()}finally{if(O)throw $}}this.$emit("chooseOrgTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},handleSizeChange:function(e){var t=this,i=e;t.infoPage.pageIndex=1,t.infoPage.pageSize=parseInt(i),_this.searchTxt?_this.handleSearch():t.getVsPosition(t.orgTreeID),setTimeout(function(){t.doSelection(t.vpositionTable,t.tags)},500)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getVsPosition(t.orgTreeID),setTimeout(function(){t.doSelection(t.vpositionTable,t.tags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$nextTick(function(){t.$refs.multipleVsPositionTable.toggleRowSelection(e,!0)})})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.multipleVsPositionTable.clearSelection()});var i=function(e){t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.SysId})},a=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(a=(o=r.next()).done);a=!0){i(o.value)}}catch(e){s=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw n}}}else{var c=t.getPersonId(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="InventedPosition",p.UserDisplayName=p.Name,p.UserAccount=p.SysId,c.includes(p.SysId)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}t.$emit("chooseOrgTag",t.dialogTags)},doSelection:function(e,t){var i=this,a=this;t&&t.length>=1?t.forEach(function(t){var i=e.findIndex(function(e){return e.SysId===t.SysId});i>-1?a.$nextTick(function(){a.$refs.multipleVsPositionTable.toggleRowSelection(e[i],!0)}):a.$nextTick(function(){a.$refs.multipleVsPositionTable.toggleRowSelection(e[i],!1)})}):0===t.length&&a.$nextTick(function(){i.$refs.multipleVsPositionTable.clearSelection()})},getPersonId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value.SysId;r&&t.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},onlyDelete:function(e,t){var i=this.getPersonId(e).indexOf(t.SysId);this.$refs.multipleVsPositionTable.toggleRowSelection(e[i],!1)},handleSearch:function(){""!==this.searchTxt?this.getOrgSearch(this.orgTreeID,this.searchTxt):this.$message.error("请输入岗位信息")},getVsPosition:function(e){var t=this,i={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,OrgID:e,type:"V"};t.doRest(i,function(e){t.vpositionTable=e.data,t.infoPage.total=e.count,t.doSelection(t.vpositionTable,t.tags)},function(e){})},doRest:function(e,t){var i=this;i.loading=!0,i.$axios.post(i.userPickUrl.Base_User_URL+"/GetPositionList",e).then(function(e){200===e.status&&(t(e.data),i.loading=!1)}).catch(function(e){throw i.loading=!1,e})},httpService:function(e,t){var i=this;i.loading=!0,i.$axios(e).then(function(e){i.loading=!1,t(e)}).catch(function(e){throw i.loading=!1,e})},getOrgSearch:function(e,t){var i=this,a={page:i.infoPage.pageIndex,limit:i.infoPage.pageSize,OrgID:"",type:"V",key:t};i.$axios.post(i.userPickUrl.Base_User_URL+"/GetPositionList",a).then(function(e){i.vpositionTable=e.data.data,i.infoPage.total=e.data.count,i.doSelection(i.vpositionTable,i.tags)}).catch(function(e){})}}},L={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("div",{staticClass:"choosePerson-data"},[i("div",{staticClass:"search-condition btn-linkage"},[i("el-row",[i("el-col",{staticClass:"serchCOL",attrs:{span:24}},[i("el-input",{staticClass:"searchText",attrs:{placeholder:"虚拟岗位名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),i("div",{staticClass:"searchline"},[i("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n                    ")])],1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:24}},[i("div",{staticClass:"table-box"},[i("el-table",{ref:"multipleVsPositionTable",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.vpositionTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{label:"虚拟岗位",center:"",prop:"Name","show-overflow-tooltip":""}})],1)],1)])],1)])],1)])]),e._v(" "),i("div",{staticClass:"table-foot"},[i("div",{staticClass:"page-sizes-box"},[i("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var U={name:"chooseOrg",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",currentSelectOrganizationId:"",isActive:!1,code:"",LeaveDimission:!1,orgTreeID:""}},components:{OrganizationTree:p,positionVsTable:i("VU/8")(z,L,!1,function(e){i("3cJP")},"data-v-65d46f7a",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){},methods:{handleClick:function(e,t){this.orgTreeID=e.id,this.$refs.VspositionTable.getVsPosition(e.id)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},chooseOrgTag:function(e){this.$emit("empSelectTags",e)}}},A={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("el-col",{staticClass:"treeWidth",attrs:{span:10}},[i("div",{staticClass:"tree-container"},[i("organization-tree",{ref:"tree",on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),i("el-col",{attrs:{span:14}},[i("positionVsTable",{ref:"VspositionTable",staticClass:"choosePersonTable",attrs:{tags:e.tags,orgTreeID:e.orgTreeID,deleteTags:e.deleteTags,mutilselectCheck:e.mutilselectCheck},on:{chooseOrgTag:e.chooseOrgTag}})],1)],1)],1)])])},staticRenderFns:[]};var E=i("VU/8")(U,A,!1,function(e){i("Z6w1")},"data-v-ca90b342",null).exports,j={name:"systemRoleTree",props:{nodKey:{type:String,default:"id",require:!1},highlightCurrent:{require:!1,type:Boolean,default:!0},checkOnClickNode:{type:Boolean,require:!1,default:!0},expandOnClickNode:{type:Boolean,require:!1,default:!0},renderexpand:{type:Boolean,require:!1,default:!0},autoExpandParent:{type:Boolean,require:!1,default:!0},depthIdPath:{type:Boolean,require:!1,default:!1},isMountedGetData:{type:Boolean,require:!1,default:!0},defaultRootNode:{type:Object,require:!1,default:null},defaultPropLabel:{type:String,require:!1,default:"displayName"},defaultSort:{type:String,require:!1,default:"orderIndex"}},data:function(){return{organizationList:[],defaultProps:{label:"title",children:"children",isLeaf:"isLast"},loading:!1,currentNode:null,isFristLoadTree:!0,userPickUrl:u.baseUrl}},created:function(e){this.debouncedSearchTree=Object(h.debounce)(this.getTreeList,null)},mounted:function(){this.isMountedGetData&&this.debouncedSearchTree(null)},methods:{loadNodeData:function(e,t){return 0===e.level?void(this.isFristLoadTree=!1):void this.debouncedSearchTree(e,t)},getTreeList:function(e,t){var i=this;if(null===e)var a=null;else if(!e.data.isLast)a={ParentID:e.data.id,context:e.data.title};var s={url:"/System/UserPick/GetSystemRoleCategoryByParent",method:"post",data:a};i.httpService(s,function(e){if(e.data&&200===e.status)if(e.data.data&&e.data.data.length>0){var a=e.data.data;t?t(a):i.organizationList=a}else t&&t([]);i.$emit("closeLoadding")})},nodeClick:function(e,t,i){this.currentNode=t,this.$emit("node-click",e,t,i)},currentChange:function(e,t){this.$emit("current-change",e,t)},checkChange:function(e,t,i){this.$emit("check-change",e,t,i)},check:function(e,t){this.$emit("check",e,t)},setChecked:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this;a.$refs.systemRoleTree&&a.$nextTick(function(){a.$refs.systemRoleTree.setChecked(e,t,i)})},setCurrentKey:function(e){var t=this;t.$nextTick(function(){if(e&&t.$refs.systemRoleTree){t.$refs.systemRoleTree.setCurrentKey(e);var i=t.$refs.systemRoleTree.getNode(e);i&&t.$emit("node-click",i.data,i,t.$refs.systemRoleTree.$el)}})},setCheckedKeys:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$nextTick(function(){t.$refs.systemRoleTree.setCheckedKeys(e,i)})},getNode:function(e){return this.$refs.systemRoleTree.getNode(e)},getCheckedNodes:function(){return this.$refs.systemRoleTree.getCheckedNodes()},toTree:function(e){if(null==e||0==e.length)return[];var t=[],i={};return e.forEach(function(e){delete e.children}),e.forEach(function(e){i[e.id]=e}),e.forEach(function(e){var a=i[e.parentId];a?(a.children||(a.children=[])).push(e):t.push(e)}),t},httpService:function(e,t){var i=this;i.loading=!0,i.$emit("openLoadding"),i.$axios(e).then(function(e){i.loading=!1,t(e)}).catch(function(e){throw i.loading=!1,i.$emit("closeLoadding"),e})},getSecode:function(e){e={ParentID:e.data.id,parentId:-1,context:e.data.title,isLeaf:e.data.isLast,level:e.level,spread:!1};var t={url:this.userPickUrl.Base_User_URL+"/GetChildOrgTree",method:"post",data:e};e.isLast||this.$axios(t).then(function(e){})}},computed:{personTableHeight:function(){return this.organizationList.length>0?185:223}}},B={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tree",{ref:"systemRoleTree",attrs:{"node-key":e.nodKey,props:e.defaultProps,data:e.organizationList,"highlight-current":e.highlightCurrent,"check-on-click-node":e.checkOnClickNode,"expand-on-click-node":e.expandOnClickNode,"auto-expand-parent":e.autoExpandParent,load:e.loadNodeData,loading:e.loading,height:e.personTableHeight,lazy:""},on:{"node-click":e.nodeClick,"current-change":e.currentChange,"check-change":e.checkChange,check:e.check}})],1)},staticRenderFns:[]},F=i("VU/8")(j,B,!1,null,null,null).exports,V={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",currentRow:null,usertags:[],isActive:!1,searchTxt:"",systemRoleTable:[],newisEmptyApplicant:!1,multipleSys:[],dialogTags:[],userPickUrl:u.baseUrl}},components:{page:y.a},props:{chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:function(){return[]}},type:{type:String,default:""},orgTreeID:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.systemRoleTable.length>0?185:230}},watch:{tags:{handler:function(e,t){e&&this.doSelection(this.systemRoleTable,e),this.dialogTags=this.tags},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(this.systemRoleTable,e)},deep:!0}},mounted:function(){this.dialogTags=this.tags},methods:{selectCheckChange:function(e,t){t.type="SystemRole";if("true"===this.mutilselectCheck){if(e.length>=1){var i=!0,a=!1,n=void 0;try{for(var r,c=l()(e);!(i=(r=c.next()).done);i=!0){var h=r.value;h.type="SystemRole",h.UserDisplayName=h.DisplayName,h.UserAccount=h.Id}}catch(e){a=!0,n=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw n}}}else this.$refs.multipleSys.toggleRowSelection(t,!1);var u=this.getPersonId(this.systemRoleTable);if(this.dialogTags){this.dialogTags=this.dialogTags.filter(function(e){return-1==u.indexOf(e.Id)});var g=this.getPersonId(this.dialogTags),f=!0,p=!1,v=void 0;try{for(var y,C=l()(e);!(f=(y=C.next()).done);f=!0){var T=y.value;-1==g.indexOf(T.Id)&&this.dialogTags.push(d()({},T))}}catch(e){p=!0,v=e}finally{try{!f&&C.return&&C.return()}finally{if(p)throw v}}}}else if(e.length>=1){var b=[].concat(m()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var k=!0,S=!1,x=void 0;try{for(var I,P=l()(b);!(k=(I=P.next()).done);k=!0){if("SystemRole"===I.value.type){var w=e.filter(function(e){return e.Id!==t.Id});this.$refs.multipleSys.toggleRowSelection(w[0],!1);var _=this.dialogTags.findIndex(function(e){return"SystemRole"===e.type});this.dialogTags.splice(_,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||(this.dialogTags.push(t),this.dialogTags=o()(new s.a(this.dialogTags)))}}catch(e){S=!0,x=e}finally{try{!k&&P.return&&P.return()}finally{if(S)throw x}}}else this.dialogTags.push(t)}else{this.$refs.multipleSys.toggleRowSelection(t,!1);var D=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(D,1)}var N=!0,O=!1,$=void 0;try{for(var R,z=l()(this.dialogTags);!(N=(R=z.next()).done);N=!0){var L=R.value;"SystemRole"===L.type&&(L.UserDisplayName=L.DisplayName,L.UserAccount=L.Id)}}catch(e){O=!0,$=e}finally{try{!N&&z.return&&z.return()}finally{if(O)throw $}}this.$emit("chooseOrgTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},handleSizeChange:function(e){var t=this,i=e;t.infoPage.pageIndex=1,t.infoPage.pageSize=parseInt(i),_this.searchTxt?t.handleSearch():t.getOrg(t.orgTreeID),setTimeout(function(){t.doSelection(t.systemRoleTable,t.dialogTags)},500)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getOrg(t.orgTreeID),setTimeout(function(){t.doSelection(t.systemRoleTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$nextTick(function(){t.$refs.multipleSys.toggleRowSelection(e,!0)})})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.multipleSys.clearSelection()});var i=function(e){t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.id})},a=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(a=(o=r.next()).done);a=!0){i(o.value)}}catch(e){s=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw n}}}else{var c=t.getPersonId(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="SystemRole",p.UserDisplayName=p.DisplayName,p.UserAccount=p.Id,c.includes(p.Id)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}t.$emit("chooseOrgTag",t.dialogTags)},doSelection:function(e,t){var i=this,a=this;t&&t.length>=1?t.forEach(function(t){var i=e.findIndex(function(e){return e.Id===t.SysId});i>-1?a.$nextTick(function(){a.$refs.multipleSys.toggleRowSelection(e[i],!0)}):a.$nextTick(function(){a.$refs.multipleSys.toggleRowSelection(e[i],!1)})}):0===t.length&&a.$nextTick(function(){i.$refs.multipleSys.clearSelection()})},getPersonId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value.Id;r&&t.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},onlyDelete:function(e,t){var i=this.getPersonId(e).indexOf(t.SysId);this.$refs.multipleSys.toggleRowSelection(e[i],!1)},handleSearch:function(){""!==this.searchTxt?this.getOrgSearch(this.searchTxt):this.$message.error("请输入系统角色信息")},getSystemRole:function(e){var t=this,i={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,CategoryId:e};t.doRest(i,function(e){t.systemRoleTable=e.data,t.infoPage.total=e.data.length,t.doSelection(t.systemRoleTable,t.dialogTags)},function(e){})},doRest:function(e,t){var i=this;i.loading=!0,i.$axios.post(i.userPickUrl.Base_User_URL+"/GetSystemRoleByType",e).then(function(e){200===e.status&&(t(e.data),i.loading=!1)}).catch(function(e){throw i.loading=!1,e})},httpService:function(e,t){var i=this;i.loading=!0,i.$axios(e).then(function(e){i.loading=!1,t(e)}).catch(function(e){throw i.loading=!1,e})},getOrgSearch:function(e){var t=this,i={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,key:e};t.$axios.post(t.userPickUrl.Base_User_URL+"/GetSystemRoleListByKey",i).then(function(e){t.systemRoleTable=e.data.data,t.infoPage.total=e.data.count,t.doSelection(t.systemRoleTable,t.dialogTags)}).catch(function(e){})}}},K={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("div",{staticClass:"choosePerson-data"},[i("div",{staticClass:"search-condition btn-linkage"},[i("el-row",[i("el-col",{staticClass:"serchCOL",attrs:{span:24}},[i("el-input",{staticClass:"searchText",attrs:{placeholder:"系统角色名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),i("div",{staticClass:"searchline"},[i("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n                    ")])],1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:24}},[i("div",{staticClass:"table-box"},[i("el-table",{ref:"multipleSys",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.systemRoleTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{staticClass:"clcsWidth",attrs:{label:"角色名称",center:"",prop:"DisplayName","show-overflow-tooltip":""}})],1)],1)])],1)])],1)])]),e._v(" "),i("div",{staticClass:"table-foot"},[i("div",{staticClass:"page-sizes-box"},[i("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var q={name:"chooseOrg",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",currentSelectOrganizationId:"",isActive:!1,code:"",LeaveDimission:!1,orgTreeID:""}},components:{systemRoleTree:F,systemRoleTable:i("VU/8")(V,K,!1,function(e){i("qIgx")},"data-v-4fcb28e6",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){},methods:{handleClick:function(e,t){this.orgTreeID=e.id,this.$refs.systemRoleTable.getSystemRole(e.id)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},chooseOrgTag:function(e){this.$emit("empSelectTags",e)}}},H={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("el-col",{staticClass:"treeWidth",attrs:{span:10}},[i("div",{staticClass:"tree-container"},[i("systemRoleTree",{ref:"tree",on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),i("el-col",{attrs:{span:14}},[i("systemRoleTable",{ref:"systemRoleTable",staticClass:"choosePersonTable",attrs:{tags:e.tags,orgTreeID:e.orgTreeID,deleteTags:e.deleteTags,mutilselectCheck:e.mutilselectCheck},on:{chooseOrgTag:e.chooseOrgTag}})],1)],1)],1)])])},staticRenderFns:[]};var M=i("VU/8")(q,H,!1,function(e){i("raF1")},"data-v-0e58c099",null).exports,G={name:"customRoleTree",props:{nodKey:{type:String,default:"id",require:!1},highlightCurrent:{require:!1,type:Boolean,default:!0},checkOnClickNode:{type:Boolean,require:!1,default:!0},expandOnClickNode:{type:Boolean,require:!1,default:!0},renderexpand:{type:Boolean,require:!1,default:!0},autoExpandParent:{type:Boolean,require:!1,default:!0},depthIdPath:{type:Boolean,require:!1,default:!1},isMountedGetData:{type:Boolean,require:!1,default:!0},defaultRootNode:{type:Object,require:!1,default:null},defaultPropLabel:{type:String,require:!1,default:"displayName"},defaultSort:{type:String,require:!1,default:"orderIndex"}},data:function(){return{organizationList:[],defaultProps:{label:"title",children:"children",isLeaf:"isLast"},loading:!1,currentNode:null,isFristLoadTree:!0,userPickUrl:u.baseUrl}},created:function(e){this.debouncedSearchTree=Object(h.debounce)(this.getTreeList,null)},mounted:function(){this.isMountedGetData&&this.debouncedSearchTree(null)},methods:{loadNodeData:function(e,t){return 0===e.level?void(this.isFristLoadTree=!1):void this.debouncedSearchTree(e,t)},getTreeList:function(e,t){var i=this;if(null===e)var a=null;else if(!e.data.isLast)a={ParentID:e.data.id,context:e.data.title};var s={url:"/System/UserPick/GetCustomRoleCategoryByParent",method:"post",data:a};i.httpService(s,function(e){if(e.data&&200===e.status)if(e.data.data&&e.data.data.length>0){var a=e.data.data;t?t(a):i.organizationList=a}else t&&t([]);i.$emit("closeLoadding")})},nodeClick:function(e,t,i){this.currentNode=t,this.$emit("node-click",e,t,i)},currentChange:function(e,t){this.$emit("current-change",e,t)},checkChange:function(e,t,i){this.$emit("check-change",e,t,i)},check:function(e,t){this.$emit("check",e,t)},setChecked:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this;a.$refs.systemRoleTree&&a.$nextTick(function(){a.$refs.systemRoleTree.setChecked(e,t,i)})},setCurrentKey:function(e){var t=this;t.$nextTick(function(){if(e&&t.$refs.customRoleTree){t.$refs.customRoleTree.setCurrentKey(e);var i=t.$refs.customRoleTree.getNode(e);i&&t.$emit("node-click",i.data,i,t.$refs.customRoleTree.$el)}})},setCheckedKeys:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$nextTick(function(){t.$refs.customRoleTree.setCheckedKeys(e,i)})},getNode:function(e){return this.$refs.systemRoleTree.getNode(e)},getCheckedNodes:function(){return this.$refs.customRoleTree.getCheckedNodes()},toTree:function(e){if(null==e||0==e.length)return[];var t=[],i={};return e.forEach(function(e){delete e.children}),e.forEach(function(e){i[e.id]=e}),e.forEach(function(e){var a=i[e.parentId];a?(a.children||(a.children=[])).push(e):t.push(e)}),t},httpService:function(e,t){var i=this;i.loading=!0,i.$emit("openLoadding"),i.$axios(e).then(function(e){i.loading=!1,t(e)}).catch(function(e){throw i.loading=!1,i.$emit("closeLoadding"),e})}},computed:{personTableHeight:function(){return this.organizationList.length>0?185:223}}},W={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-tree",{ref:"customRoleTree",attrs:{"node-key":e.nodKey,props:e.defaultProps,data:e.organizationList,"highlight-current":e.highlightCurrent,"check-on-click-node":e.checkOnClickNode,"expand-on-click-node":e.expandOnClickNode,"auto-expand-parent":e.autoExpandParent,load:e.loadNodeData,loading:e.loading,height:e.personTableHeight,lazy:""},on:{"node-click":e.nodeClick,"current-change":e.currentChange,"check-change":e.checkChange,check:e.check}})],1)},staticRenderFns:[]},Y=i("VU/8")(G,W,!1,null,null,null).exports,J={name:"choosenTable",data:function(){return{loading:!0,infoPage:{pageIndex:1,pageSize:10,currentPage:1,total:0,pageSizesList:[10,20]},deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",activeName:"first",tabtoggle:0,currentSelectOrganizationId:"",currentRow:null,usertags:[],isActive:!1,searchTxt:"",customRoleTable:[],newisEmptyApplicant:!1,multipleSys:[],dialogTags:[],userPickUrl:u.baseUrl}},components:{page:y.a},props:{chooseDatas:{type:Object,default:function(){return{row:null,name:"",id:""}}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:function(){return[]}},type:{type:String,default:""},orgTreeID:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.customRoleTable.length>0?185:230}},watch:{tags:{handler:function(e,t){e&&this.doSelection(this.customRoleTable,e),this.dialogTags=this.tags},deep:!0},deleteTags:{handler:function(e,t){this.onlyDelete(this.customRoleTable,e)},deep:!0}},mounted:function(){this.dialogTags=this.tags},methods:{selectCheckChange:function(e,t){t.type="CustomRole";if("true"===this.mutilselectCheck){if(e.length>=1){var i=!0,a=!1,n=void 0;try{for(var r,c=l()(e);!(i=(r=c.next()).done);i=!0){var h=r.value;h.type="CustomRole",h.UserDisplayName=h.DisplayName,h.UserAccount=h.Id}}catch(e){a=!0,n=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw n}}}else this.$refs.multipleSys.toggleRowSelection(t,!1);var u=this.getPersonId(this.customRoleTable);if(this.dialogTags){this.dialogTags=this.dialogTags.filter(function(e){return-1==u.indexOf(e.Id)});var g=this.getPersonId(this.dialogTags),f=!0,p=!1,v=void 0;try{for(var y,C=l()(e);!(f=(y=C.next()).done);f=!0){var T=y.value;-1==g.indexOf(T.Id)&&this.dialogTags.push(d()({},T))}}catch(e){p=!0,v=e}finally{try{!f&&C.return&&C.return()}finally{if(p)throw v}}}}else if(e.length>=1){var b=[].concat(m()(this.dialogTags));if(this.dialogTags&&this.dialogTags.length>=1){var k=!0,S=!1,x=void 0;try{for(var I,P=l()(b);!(k=(I=P.next()).done);k=!0){if("CustomRole"===I.value.type){var w=e.filter(function(e){return e.Id!==t.Id});this.$refs.multipleSys.toggleRowSelection(w[0],!1);var _=this.dialogTags.findIndex(function(e){return"CustomRole"===e.type});this.dialogTags.splice(_,1,t)}else this.dialogTags.includes(t.type)||1!==e.length||(this.dialogTags.push(t),this.dialogTags=o()(new s.a(this.dialogTags)))}}catch(e){S=!0,x=e}finally{try{!k&&P.return&&P.return()}finally{if(S)throw x}}}else this.dialogTags.push(t)}else{this.$refs.multipleSys.toggleRowSelection(t,!1);var D=this.dialogTags.findIndex(function(e){return e.SysId===t.SysId});this.dialogTags.splice(D,1)}var N=!0,O=!1,$=void 0;try{for(var R,z=l()(this.dialogTags);!(N=(R=z.next()).done);N=!0){var L=R.value;"CustomRole"===L.type&&(L.UserDisplayName=L.DisplayName,L.UserAccount=L.Id)}}catch(e){O=!0,$=e}finally{try{!N&&z.return&&z.return()}finally{if(O)throw $}}this.$emit("chooseOrgTag",this.dialogTags)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;r.SysId;t.push(r.SysId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},handleSizeChange:function(e){var t=this,i=e;t.infoPage.pageIndex=1,t.infoPage.pageSize=parseInt(i),_this.searchTxt?t.handleSearch():t.getOrg(t.orgTreeID),setTimeout(function(){t.doSelection(t.customRoleTable,t.dialogTags)},500)},handleCurrentChange:function(e){var t=this;t.infoPage.pageIndex=e,t.searchTxt?t.handleSearch():t.getOrg(t.orgTreeID),setTimeout(function(){t.doSelection(t.customRoleTable,t.dialogTags)},500)},setToggleSelect:function(e){var t=this;e.forEach(function(e){t.$nextTick(function(){t.$refs.multipleSys.toggleRowSelection(e,!0)})})},selectAll:function(e){var t=this;if(0===e.length&&t.dialogTags.splice(0,t.dialogTags.length),"false"===t.mutilselectCheck){t.$nextTick(function(){t.$refs.multipleSys.clearSelection()});var i=function(e){t.dialogTags=t.dialogTags.filter(function(t){return t.SysId!==e.id})},a=!0,s=!1,n=void 0;try{for(var o,r=l()(e);!(a=(o=r.next()).done);a=!0){i(o.value)}}catch(e){s=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw n}}}else{var c=t.getPersonId(t.dialogTags),d=!0,h=!1,u=void 0;try{for(var g,f=l()(e);!(d=(g=f.next()).done);d=!0){var p=g.value;p.type="CustomRole",p.UserDisplayName=p.DisplayName,p.UserAccount=p.Id,c.includes(p.Id)||t.dialogTags.push(p)}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}t.$emit("chooseOrgTag",t.dialogTags)},doSelection:function(e,t){var i=this,a=this;t&&t.length>=1?t.forEach(function(t){var i=e.findIndex(function(e){return e.Id===t.SysId});i>-1?a.$nextTick(function(){a.$refs.multipleSys.toggleRowSelection(e[i],!0)}):a.$nextTick(function(){a.$refs.multipleSys.toggleRowSelection(e[i],!1)})}):0===t.length&&a.$nextTick(function(){i.$refs.multipleSys.clearSelection()})},getPersonId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value.Id;r&&t.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},onlyDelete:function(e,t){var i=this.getPersonId(e).indexOf(t.SysId);this.$refs.multipleSys.toggleRowSelection(e[i],!1)},handleSearch:function(){""!==this.searchTxt?this.getOrgSearch(this.searchTxt):this.$message.error("请输入角色自定义信息")},getCustomRole:function(e){var t=this,i={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,CategoryId:e};t.doRest(i,function(e){t.customRoleTable=e.data,t.infoPage.total=e.data.length,t.doSelection(t.customRoleTable,t.dialogTags)},function(e){})},doRest:function(e,t){var i=this;i.loading=!0,i.$axios.post(i.userPickUrl.Base_User_URL+"/GetCustomRoleByCategory",e).then(function(e){200===e.status&&(t(e.data),i.loading=!1)}).catch(function(e){throw i.loading=!1,e})},httpService:function(e,t){var i=this;i.loading=!0,i.$axios(e).then(function(e){i.loading=!1,t(e)}).catch(function(e){throw i.loading=!1,e})},getOrgSearch:function(e){var t=this,i={page:t.infoPage.pageIndex,limit:t.infoPage.pageSize,key:e};t.$axios.post(t.userPickUrl.Base_User_URL+"/GetCustomRoleListByKey",i).then(function(e){t.customRoleTable=e.data.data,t.infoPage.total=e.data.count,t.doSelection(t.customRoleTable,t.dialogTags)}).catch(function(e){})}}},Q={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("div",{staticClass:"choosePerson-data"},[i("div",{staticClass:"search-condition btn-linkage"},[i("el-row",[i("el-col",{staticClass:"serchCOL",attrs:{span:24}},[i("el-input",{staticClass:"searchText",attrs:{placeholder:"自定义角色名称",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}}),e._v(" "),i("div",{staticClass:"searchline"},[i("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n                    ")])],1)],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:24}},[i("div",{staticClass:"table-box"},[i("el-table",{ref:"multipleSys",staticStyle:{width:"100%","text-align":"center"},attrs:{"highlight-current-row":!0,data:e.customRoleTable,height:e.personTableHeight,border:"","empty-text":"","tooltip-effect":"dark"},on:{"select-all":e.selectAll,select:e.selectCheckChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{label:"角色名称",center:"",prop:"DisplayName","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{label:"角色类型",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(1===t.row.Type?"系统级":"流程级"))])]}}])})],1)],1)])],1)])],1)])]),e._v(" "),i("div",{staticClass:"table-foot"},[i("div",{staticClass:"page-sizes-box"},[i("page",{attrs:{pageIndex:e.infoPage.pageIndex,total:e.infoPage.total,pageSize:e.infoPage.pageSize,pageSizesList:e.infoPage.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1)])])},staticRenderFns:[]};var X={name:"chooseOrg",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",currentSelectOrganizationId:"",isActive:!1,code:"",LeaveDimission:!1,orgTreeID:""}},components:{customRoleTree:Y,customRoleTable:i("VU/8")(J,Q,!1,function(e){i("ScqL")},"data-v-a94a1678",null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){},methods:{handleClick:function(e,t){this.orgTreeID=e.id,this.$refs.customRoleTable.getCustomRole(e.id)},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},chooseOrgTag:function(e){this.$emit("empSelectTags",e)}}},Z={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("el-col",{staticClass:"treeWidth",attrs:{span:10}},[i("div",{staticClass:"tree-container"},[i("customRoleTree",{ref:"tree",on:{"node-click":e.handleClick},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}})],1)]),e._v(" "),i("el-col",{attrs:{span:14}},[i("customRoleTable",{ref:"customRoleTable",staticClass:"choosePersonTable",attrs:{tags:e.tags,orgTreeID:e.orgTreeID,deleteTags:e.deleteTags,mutilselectCheck:e.mutilselectCheck},on:{chooseOrgTag:e.chooseOrgTag}})],1)],1)],1)])])},staticRenderFns:[]};var ee=i("VU/8")(X,Z,!1,function(e){i("D9Qt")},"data-v-1ccbadbb",null).exports,te={name:"processTree",props:{nodKey:{type:String,default:"id",require:!1},highlightCurrent:{require:!1,type:Boolean,default:!0},expandOnClickNode:{type:Boolean,require:!1,default:!0},renderexpand:{type:Boolean,require:!1,default:!0},autoExpandParent:{type:Boolean,require:!1,default:!0},depthIdPath:{type:Boolean,require:!1,default:!1},isMountedGetData:{type:Boolean,require:!1,default:!0},defaultRootNode:{type:Object,require:!1,default:null},defaultPropLabel:{type:String,require:!1,default:"displayName"},defaultSort:{type:String,require:!1,default:"orderIndex"},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}},deleteTags:{type:Object,default:function(){return{}}},tags:{type:Array,default:null},ProcessType:{type:String,default:""}},data:function(){var e=this;return{searchTxt:"",processlist:[],defaultProps:{label:"name",children:"children",disabled:function(t,i){var a=e;if("All"===a.parmDialog.typeIframe)return!1;if("All"!==t.typeName){if(a.parmDialog.typeIframe){return!a.parmDialog.typeIframe.split(",").includes(t.typeName)}return t.typeName!==a.ProcessType}},isLeaf:function(e,t){return!!e.isLast}},loading:!1,isFristLoadTree:!0,checkStrictly:!0,defaultCheckedKeys:[],currentNode:null,current:{},userPickUrl:u.baseUrl}},created:function(e){this.debouncedSearchTree=Object(h.debounce)(this.getTreeList,null)},mounted:function(){this.isMountedGetData&&this.debouncedSearchTree(null)},watch:{tags:{handler:function(e,t){e&&(this.currentNode=e,this.getDefaultCheckedKeys())},deep:!0},ProcessType:{handler:function(e,t){e&&this.isMountedGetData&&this.debouncedSearchTree(null)},deep:!0}},methods:{clearText:function(){this.searchTxt=""},getDefaultCheckedKeys:function(){var e=this;this.$nextTick(function(){if("true"===e.mutilselectCheck){var t=[];e.currentNode&&e.currentNode.length>0&&e.currentNode.forEach(function(e){t.push(e.id)}),e.$refs.systemRoleTree.setCheckedKeys(t)}else e.currentNode.length>0?e.$refs.systemRoleTree.setCurrentKey(e.currentNode[0].id):e.$refs.systemRoleTree.setCheckedKeys([])})},loadNodeData:function(e,t){var i=this;if(0!==e.level){if(e.data.children&&e.data.children.length>0)t(e.data.children),this.$emit("load-node-data");else{if("Process"===e.data.typeName||"Version"===e.data.typeName||"Category"===e.data.typeName){debugger;return this.searchTxt="",void this.debouncedSearchTree(e,t)}t([])}this.$nextTick(function(){i.setCheckedKeys(i.defaultCheckedKeys)})}},getTreeList:function(e,t,i){var a=this,s=this,n={},o="";o=s.parmDialog.typeIframe?s.parmDialog.typeIframe:s.ProcessType;e&&(e.data.id,e.data.typeName),this.searchTxt?n={searchParam:this.searchTxt,dType:o}:void 0==e?n={dType:o}:e.data.isLast||(n={dType:o,searchParam:"",NodeId:e.data.id,recordData:{typeName:e.data.typeName}});var r={url:s.userPickUrl.Base_Process_URL+"/GetAllProcessTree",method:"get",params:n};s.httpService(r,function(e){if(e.data&&200===e.status){if(e.data.data&&e.data.data.length>0){var i=a.toTree(e.data.data);t?t(i):s.processlist=i}else t&&t([]);a.$nextTick(function(){a.setCheckedKeys(a.defaultCheckedKeys)})}s.$emit("closeLoadding")})},nodeClick:function(e,t,i){this.current=t,this.$emit("node-click",e,t,i)},currentChange:function(e,t){},checkChange:function(e,t,i){this.$emit("check-change",e,t,i)},check:function(e,t){if(this.defaultCheckedKeys=t.checkedKeys,"false"===this.mutilselectCheck){var i=e.id;if(this.defaultCheckedKeys=this.defaultCheckedKeys.filter(function(e){return e===i}),t.checkedKeys&&t.checkedKeys.length>0){this.currentNode=[e];this.$refs.systemRoleTree.getNode(e.parent_Id);var a=!0,s=!1,n=void 0;try{for(var o,r=l()(this.currentNode);!(a=(o=r.next()).done);a=!0){var c=o.value;c.ProcessType="ProcessPick",c.type=c.typeName}}catch(e){s=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw n}}}else this.currentNode=[];this.$refs.systemRoleTree.setCheckedKeys([]),this.$refs.systemRoleTree.setCheckedKeys(this.defaultCheckedKeys)}else{this.defaultCheckedKeys=t.checkedKeys,this.currentNode=t.checkedNodes;var d=!0,h=!1,u=void 0;try{for(var g,f=l()(this.currentNode);!(d=(g=f.next()).done);d=!0){var p=g.value;p.ProcessType="ProcessPick",p.type=p.typeName,p.ProcessType="ProcessPick",p.CategoryId=e.categoryId,p.CategoryName=e.categoryName,p.ProcessCode=e.processCode,p.ProcessName=e.processName,p.VersionId=e.versionId,p.VersionName=e.versionName,p.ActivityId=e.activityId,p.ActivityName=e.activityName}}catch(e){h=!0,u=e}finally{try{!d&&f.return&&f.return()}finally{if(h)throw u}}}this.$emit("ProcessCheck",this.currentNode)},setChecked:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=this;a.$refs.systemRoleTree&&a.$nextTick(function(){a.$refs.systemRoleTree.setChecked(e,t,i)})},setCurrentKey:function(e){var t=this;t.$nextTick(function(){if(e&&t.$refs.systemRoleTree){t.$refs.systemRoleTree.setCurrentKey(e);var i=t.$refs.systemRoleTree.getNode(e);i&&t.$emit("node-click",i.data,i,t.$refs.systemRoleTree.$el)}})},setCheckedKeys:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$nextTick(function(){t.$refs.systemRoleTree.setCheckedKeys(e,i)})},getNode:function(e){return this.$refs.systemRoleTree.getNode(e)},getCheckedNodes:function(){return this.$refs.systemRoleTree.getCheckedNodes()},toTree:function(e){if(null==e||0==e.length)return[];var t=[],i=[],a={},s=!0,n=!1,o=void 0;try{for(var r,c=l()(e);!(s=(r=c.next()).done);s=!0){var h=r.value,u=d()({},h);u.pId=u.parent_Id,t.push(u)}}catch(e){n=!0,o=e}finally{try{!s&&c.return&&c.return()}finally{if(n)throw o}}return t.forEach(function(e){delete e.children}),t.forEach(function(e){a[e.id]=e}),t.forEach(function(e){var t=a[e.pId];t?(t.children||(t.children=[])).push(e):i.push(e)}),i},httpService:function(e,t){var i=this;i.loading=!0,i.$emit("openLoadding"),i.$axios(e).then(function(e){i.loading=!1,t(e)}).catch(function(e){throw i.loading=!1,i.$emit("closeLoadding"),e})},getSecode:function(e){e={ParentID:e.data.id,parentId:-1,context:e.data.title,isLeaf:e.data.isLast,level:e.level,spread:!1};var t={url:this.userPickUrl.Base_M3_URL+"/UserPick/GetChildOrgTree",method:"post",data:e};e.isLast||this.$axios(t).then(function(e){})},handleSearch:function(){this.getTreeList()},onlyDelete:function(e,t){if("false"===this.mutilselectCheck)this.$refs.systemRoleTree.setCheckedKeys([]);else{var i=[];i.push(t.id),this.$refs.systemRoleTree.setCheckedKeys(i)}}},computed:{personTableHeight:function(){return this.processlist.length>0?185:223}}},ie={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"search-condition btn-linkage",staticStyle:{"margin-bottom":"15px"}},[i("el-row",[i("el-col",{staticClass:"serchCOL",attrs:{span:20}},[i("el-input",{staticClass:"searchText",attrs:{placeholder:"流程名称",clearable:""},on:{clear:e.clearText},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleSearch(t):null}},model:{value:e.searchTxt,callback:function(t){e.searchTxt=t},expression:"searchTxt"}})],1),e._v(" "),i("el-col",{attrs:{span:4}},[i("div",{staticClass:"searchline",staticStyle:{"text-align":"right"}},[i("el-button",{staticClass:"choosenBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索\n          ")])],1)])],1)],1),e._v(" "),i("div",{staticClass:"dialogScroll"},[i("el-tree",{ref:"systemRoleTree",attrs:{"node-key":e.nodKey,props:e.defaultProps,"show-checkbox":"","default-checked-keys":e.defaultCheckedKeys,data:e.processlist,"expand-on-click-node":!1,"check-strictly":e.checkStrictly,"highlight-current":e.highlightCurrent,"check-on-click-node":!1,"auto-expand-parent":e.autoExpandParent,load:e.loadNodeData,loading:e.loading,height:e.personTableHeight,lazy:""},on:{"node-click":e.nodeClick,"current-change":e.currentChange,"check-change":e.checkChange,check:e.check}})],1)])},staticRenderFns:[]};var ae={name:"ChoosepersonNew",data:function(){return{searchid:"",loading:!0,deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",currentSelectOrganizationId:"",code:""}},components:{processTree:i("VU/8")(te,ie,!1,function(e){i("JWYC")},null,null).exports},props:{tags:{type:Array,default:null},deleteTags:{type:Object,default:function(){return{}}},type:{type:String,default:""},mutilselectCheck:{type:String,default:""},parmDialog:{type:Object,default:function(){return new Object}},ProcessType:{type:String,default:""},Visible:{type:Boolean,default:!1}},computed:{personTableHeight:function(){return this.tableData.length>0?185:223},userTableHeight:function(){return this.userdata.length>0?185:223}},created:function(){},watch:{},mounted:function(){this.$nextTick(function(){})},methods:{handleClick:function(e,t){},getPersonEmpId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value,c=r.empId;void 0!=c||r.agent||t.push(r.id),void 0==c&&r.agent?t.push(r.agent):t.push(r.empId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},ProcessCheck:function(e){this.$emit("empSelectTags",e)}}},se={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"choosePerson"},[i("div",{staticClass:"choose-person-container"},[i("div",{staticClass:"content-body"},[i("el-row",[i("process-tree",{ref:"chooseTree",staticClass:"choosePersonTable",attrs:{parmDialog:e.parmDialog,deleteTags:e.deleteTags,ProcessType:e.ProcessType,tags:e.tags,Visible:e.Visible,mutilselectCheck:e.mutilselectCheck},on:{"node-click":e.handleClick,ProcessCheck:e.ProcessCheck}})],1)],1)])])},staticRenderFns:[]};var ne={name:"compositeChoosen",components:{ChoosePersonNew:S,ChooseOrg:_,ChoosePostion:R,choosVsPosition:E,choosSystemRole:M,choosCustomRole:ee,chooseProcess:i("VU/8")(ae,se,!1,function(e){i("seMD")},"data-v-7e9d3f49",null).exports},props:{parmDialog:{type:Object,default:function(){return new Object}},selecttype:{type:Boolean,default:!1},Visible:{type:Boolean,default:!1},portalmMtilselectCheck:{type:String,default:""},echoData:{type:Array,default:function(){return[]}},ProcessType:{type:String,default:""}},data:function(){return{CollectPerson:[],deletechooseheight:"deletechooseheight",deletechoosecontent:"deletechoose-content",tags:[],isActive:!0,choosenTab:"",deleteTags:{},tabType:"",type:"",dialogTitle:"",tabName:[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1},{name:"组织",value:"Org",show:!1},{name:"岗位",value:"Position",show:!1},{name:"虚拟岗位",value:"InventedPosition",show:!1},{name:"系统角色",value:"SystemRole",show:!1},{name:"自定义角色",value:"CustomRole",show:!1}],tabIndex:0,mutilselectCheck:"",top:"80px",userPickUrl:u.baseUrl}},mounted:function(){var e=this;e.$nextTick(function(){e.parmDialog.typeIframe?"form"===e.parmDialog.formType?(e.top="0px",e.mutilselectCheck=e.portalmMtilselectCheck):(e.top="120px",e.mutilselectCheck=e.parmDialog.mutilselect):(e.top="80px",e.mutilselectCheck=e.portalmMtilselectCheck)})},computed:{typeIframe:function(){return this.parmDialog.classifier}},watch:{tabType:{handler:function(e,t){"User"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="User",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"Org"===e&&(this.tags=this.tags.filter(function(e){return"Org"===e.type}),this.isActive=!0,this.dialogTitle="选择组织",this.choosenTab="Org",this.tabName=[{name:"组织",value:"Org",show:!1}]),"Position"===e&&(this.tags=this.tags.filter(function(e){return"Position"===e.type}),this.dialogTitle="选择岗位",this.choosenTab="Position",this.tabName=[{name:"岗位",value:"Position",show:!1}]),"InventedPosition"===e&&(this.tags=this.tags.filter(function(e){return"InventedPosition"===e.type}),this.dialogTitle="选择虚拟岗位",this.choosenTab="InventedPosition",this.tabName=[{name:"虚拟岗位",value:"vposition",show:!1}]),"SystemRole"===e&&(this.tags=this.tags.filter(function(e){return"InventedPosition"===e.type}),this.dialogTitle="SystemRole",this.choosenTab="SystemRole",this.tabName=[{name:"系统角色",value:"systemrole",show:!1}]),"CustomRole"===e&&(this.tags=this.tags.filter(function(e){return"InventedPosition"===e.type}),this.dialogTitle="CustomRole",this.choosenTab="CustomRole",this.tabName=[{name:"自定义角色",value:"customrole",show:!1}]),"Process"===e&&(this.tags=this.tags.filter(function(e){return"Process"===e.type}),this.isActive=!0,this.dialogTitle="流程",this.choosenTab="Process",this.tabName=[{name:"流程",value:"Process",show:!1}]),"all"===e&&(this.dialogTitle="选人控件",this.tabName=[{name:"收藏",value:"User",show:!1},{name:"人员",value:"User",show:!1},{name:"组织",value:"org",show:!1},{name:"岗位",value:"position",show:!1},{name:"虚拟岗位",value:"vposition",show:!1},{name:"系统角色",value:"systemrole",show:!1},{name:"自定义角色",value:"customrole",show:!1}])},deep:!0,immediate:!0},typeIframe:{handler:function(e,t){if(void 0!==e&&""!==e)if("UserPick"===e)if("All"===this.parmDialog.typeIframe)this.choosenTab="Collect",this.dialogTitle="我的收藏",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1},{name:"组织",value:"Org",show:!1},{name:"岗位",value:"Position",show:!1},{name:"虚拟岗位",value:"InventedPosition",show:!1},{name:"系统角色",value:"SystemRole",show:!1},{name:"自定义角色",value:"CustomRole",show:!1}];else{var i=[],a=d()([],this.tabName);i=this.parmDialog.typeIframe.split(","),this.parmDialog.typeIframe.indexOf("User")>-1&&(this.getCollect(),i.unshift("Collect")),this.tabName=a.filter(function(e){return i.includes(e.value)}),this.isActive=!0,this.$set(this,"choosenTab",this.tabName[0].value),this.$set(this,"dialogTitle","选择"+this.tabName[0].name)}else this.isActive=!0,this.choosenTab="Process",this.dialogTitle="流程",this.tabName=[{name:"流程",value:"Process",show:!1}]},immediate:!0},Visible:{handler:function(e,t){if(e){this.parmDialog.typeIframe||this.portalType(this.tabType)}else this.mutilselectCheck="false"},immediate:!0},echoData:{handler:function(e,t){var i=this;this.tags=[];var a={};if(this.parmDialog.typeIframe){var s=!0,n=!1,o=void 0;try{for(var r,c=l()(e);!(s=(r=c.next()).done);s=!0){var d=r.value,h={};h.UserDisplayName=d.Name,h.UserAccount=d.Value,h.type=d.Type,"User"!==d.Type&&(h.SysId=d.Value)}}catch(e){n=!0,o=e}finally{try{!s&&c.return&&c.return()}finally{if(n)throw o}}this.$nextTick(function(){i.tags.push(a)})}else{var u=!0,g=!1,f=void 0;try{for(var p,v=l()(e);!(u=(p=v.next()).done);u=!0){var m=p.value;m.portalType,"Process"===m.type?(a.typeName=m.type,a.processName=m.ProcessName,a.processCode=m.ProcessCode,a.type=m.type,a.id=m.id):"Category"===m.type?(a.name=m.categoryName,a.categoryName=m.categoryName,a.typeName=m.type,a.type=m.type,a.id=m.id):(a.SysId=m.SysId,a.UserDisplayName=m.UserDisplayName,a.UserAccount=m.UserAccount,a.type=m.type),this.$nextTick(function(){i.tags.push(a)})}}catch(e){g=!0,f=e}finally{try{!u&&v.return&&v.return()}finally{if(g)throw f}}}},immediate:!0}},methods:{handleClick:function(e,t){switch(this.isActive=!0,e.name){case"User":this.type="User",this.dialogTitle="选择人员",this.getCollect();break;case"Collect":this.type="Collect",this.dialogTitle="选择人员",this.getCollect();break;case"Org":this.dialogTitle="选择组织",this.type="Org";break;case"Position":this.dialogTitle="选择岗位",this.type="Position";break;case"InventedPosition":this.dialogTitle="选择虚拟岗位",this.type="InventedPosition";break;case"SystemRole":this.dialogTitle="选择系统角色",this.type="SystemRole";break;case"CustomRole":this.dialogTitle="选择自定义角色",this.type="CustomRole";break;case"Process":this.dialogTitle="选择流程",this.type="Process"}},getCollect:function(){var e=this;e.$axios({url:e.userPickUrl.Base_User_URL+"/GetUserListByCollect",method:"POST"}).then(function(t){200===t.status&&(e.CollectPerson=t.data.data)}).catch(function(t){e.$message.error("数据获取失败!ERROR MESSAGE:"+t.message)})},cancelCollect:function(e){var t=this,i={IsCollect:!1,refUserId:e.SysId};t.$axios({url:t.userPickUrl.Base_User_URL+"/SetCollectPerson",method:"POST",data:i}).then(function(i){0===i.data.code?(t.CollectPerson.splice(t.CollectPerson.indexOf(e),1),e.IsCollect=!e.IsCollect):t.$message.error("数据获取失败")}).catch(function(e){t.$message.error("数据获取失败!ERROR MESSAGE:"+e.message)})},submitAdd:function(e){if("true"===this.mutilselectCheck){if(e.checked=!0,this.tags&&this.tags.length>0)this.getPersonAccount(this.tags).includes(e.UserAccount)||this.tags.push(e);else this.tags.push(e)}else{var t=!0,i=!1,a=void 0;try{for(var s,n=l()(this.CollectPerson);!(t=(s=n.next()).done);t=!0){s.value.checked=!1}}catch(e){i=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(i)throw a}}e.checked=!0,this.tags&&this.tags.length>=1?(this.tags=this.tags.splice(this.tags.length,0),this.tags.push(e)):this.tags.push(e)}var o=!0,r=!1,c=void 0;try{for(var d,h=l()(this.tags);!(o=(d=h.next()).done);o=!0){d.value.type="User"}}catch(e){r=!0,c=e}finally{try{!o&&h.return&&h.return()}finally{if(r)throw c}}},openChoosen:function(e,t){this.tabType=t||e,this.$emit("OpenDialog",!0)},cancel:function(){this.$emit("CloseDialog",!1)},closeDialoging:function(){this.parmDialog.typeIframe?this.$emit("handleCloseDialog",!1):this.$emit("CloseDialog",!1)},pullupClick:function(){this.isActive=!this.isActive},clearAll:function(){this.tags=[]},handleClose:function(e){this.deleteTags=e;var t=this.tags.indexOf(e);this.tags.splice(t,1)},getPersonId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value.SysId;r&&t.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},submit:function(){this.$emit("OpenDialog",!1),this.$emit("sureSubmit",this.tags),this.sendTagSelect(this.tags,this.tabType)},empSelectTags:function(e){this.tags=e,this.tags=o()(new s.a(this.tags))},sendTagSelect:function(e,t){if(this.ProcessType){var i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){n.value.portalType=this.ProcessType}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}}this.$emit("sendTag",e,t)},portalehco:function(e){this.tags=e},getPersonAccount:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=l()(e);!(i=(n=o.next()).done);i=!0){var r=n.value.UserAccount;r&&t.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},portalType:function(e){"User"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="User",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"CurrentUser"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="Collect",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"ToWrite"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="Collect",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"Submitter"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="Collect",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"Org"===e&&(this.isActive=!0,this.dialogTitle="选择组织",this.choosenTab="Org",this.tabName=[{name:"组织",value:"Org",show:!1}]),"Position"===e&&(this.dialogTitle="选择岗位",this.choosenTab="Position",this.tabName=[{name:"岗位",value:"Position",show:!1}]),"InventedPosition"===e&&(this.dialogTitle="选择虚拟岗位",this.choosenTab="InventedPosition",this.tabName=[{name:"虚拟岗位",value:"vposition",show:!1}]),"SystemRole"===e&&(this.dialogTitle="SystemRole",this.choosenTab="SystemRole",this.tabName=[{name:"系统角色",value:"systemrole",show:!1}]),"CustomRole"===e&&(this.dialogTitle="CustomRole",this.choosenTab="CustomRole",this.tabName=[{name:"自定义角色",value:"customrole",show:!1}]),"Process"===e&&(this.isActive=!0,this.dialogTitle="流程",this.choosenTab="Process",this.tabName=[{name:"流程",value:"Process",show:!1}],this.mutilselectCheck="true"),"Category"===e&&(this.isActive=!0,this.dialogTitle="流程",this.choosenTab="Process",this.tabName=[{name:"流程",value:"Process",show:!1}],this.mutilselectCheck="true"),"userSelectFell"===e&&(this.isActive=!0,this.getCollect(),this.choosenTab="Collect",this.mutilselectCheck="true",this.dialogTitle="选择人员",this.tabName=[{name:"收藏",value:"Collect",show:!1},{name:"人员",value:"User",show:!1}]),"all"===e&&(this.dialogTitle="选人控件",this.tabName=[{name:"收藏",value:"User",show:!1},{name:"人员",value:"User",show:!1},{name:"组织",value:"org",show:!1},{name:"岗位",value:"position",show:!1},{name:"虚拟岗位",value:"vposition",show:!1},{name:"系统角色",value:"systemrole",show:!1},{name:"自定义角色",value:"customrole",show:!1}]),""===e&&(this.tabName=[])}}},oe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{staticClass:"pccandiate",attrs:{visible:e.Visible,id:"composite","close-on-click-modal":!1,title:e.dialogTitle,top:e.top,show:e.Visible,width:"700px",center:""},on:{"update:visible":function(t){e.Visible=t},opened:e.openChoosen,close:e.closeDialoging}},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.choosenTab,callback:function(t){e.choosenTab=t},expression:"choosenTab"}},e._l(e.tabName,function(t,a){return i("el-tab-pane",{key:a,attrs:{label:t.name,name:t.value}},["Collect"===t.value?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"common"},[i("el-row",[i("div",{staticClass:"recently-content radio-content"},[i("el-row",e._l(e.CollectPerson,function(t){return i("el-col",{key:t.id,staticClass:"recently-box",class:{checked:1==t.checked},attrs:{"is-checked":!0,span:8}},[i("div",{staticClass:"picture",on:{click:function(i){e.submitAdd(t)}}},[i("div",{staticClass:"picture-text"},[i("p",{staticClass:"department",attrs:{title:t.UserDisplayName}},[e._v(e._s(t.UserDisplayName))]),e._v(" "),i("p",{staticClass:"staff",attrs:{title:t.UserAccount}},[e._v(e._s(t.UserAccount))])]),e._v(" "),[i("i",{staticClass:"icon iconfont",class:t.IsCollect?"icon-collect-icon-copy":"icon-noCollect-icon",staticStyle:{"font-size":"20px",color:"#FFB800"},on:{click:function(i){i.stopPropagation(),e.cancelCollect(t)}}})]],2)])}))],1)])],1)]):e._e(),e._v(" "),"User"===t.value?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[i("Choose-person-New",{ref:"choosen",refInFor:!0,attrs:{tags:e.tags,deleteTags:e.deleteTags,mutilselectCheck:e.mutilselectCheck,parmDialog:e.parmDialog,type:e.type},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"Org"===t.value?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[i("choose-org",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"Position"===t.value?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[i("choose-postion",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"InventedPosition"===t.value?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[i("choos-vs-position",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"SystemRole"===t.value?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[i("choos-system-role",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"CustomRole"===t.value?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[i("choos-custom-role",{attrs:{tags:e.tags,mutilselectCheck:e.mutilselectCheck,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e(),e._v(" "),"Process"===t.value?i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}]},[i("choose-process",{attrs:{tags:e.tags,Visible:e.Visible,ProcessType:e.ProcessType,parmDialog:e.parmDialog,mutilselectCheck:e.mutilselectCheck,deleteTags:e.deleteTags},on:{empSelectTags:e.empSelectTags}})],1)]):e._e()])})),e._v(" "),i("div",{staticClass:"choosepersoned-top"},[i("div",{staticClass:"choosepersoned",class:{pullup:e.isActive}},[i("div",{staticClass:"pull",on:{click:e.pullupClick}}),e._v(" "),i("div",{staticClass:"personnal"},[i("div",{staticClass:"deletechoose-box"},[i("span",{staticClass:"deletechoose",on:{click:e.clearAll}},[i("i",{staticClass:"el-icon-delete"})])]),e._v(" "),i("div",{class:e.isActive?e.deletechooseheight:e.deletechoosecontent},e._l(e.tags,function(t){return i("el-tag",{key:t.SysId,attrs:{type:"info",closable:""},on:{close:function(i){e.handleClose(t)}},scopedSlots:e._u([{key:"default",fn:function(a){return[i("div",{staticClass:"deleteperson"},[i("div",{staticClass:"picture-text"},[i("p",{staticClass:"department",attrs:{title:t.UserDisplayName}},[e._v(e._s(t.UserDisplayName))]),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:"User"===t.type||"User"===t.Type||"User"===t.sourcesType,expression:"tag.type==='User' || tag.Type==='User' || tag.sourcesType==='User' "}],staticClass:"staff",attrs:{title:t.UserAccount}},[e._v(e._s(t.UserAccount))]),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:"Process"===t.typeName||"Activity"===t.typeName||"Version"===t.typeName,expression:"tag.typeName==='Process'|| tag.typeName==='Activity' || tag.typeName==='Version' "}],staticClass:"staff",attrs:{title:t.displayName}},[e._v(e._s(t.processName)+"("+e._s(t.processCode)+")")]),e._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:"Process"!==t.typeName,expression:"tag.typeName!=='Process'"}],staticClass:"staff",attrs:{title:t.name}},[e._v(e._s(t.name))])])])]}}])})}))])])]),e._v(" "),i("div",{staticClass:"el-dialog__footer"},[i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)])],1)],1)},staticRenderFns:[]};var re=i("VU/8")(ne,oe,!1,function(e){i("oqwl")},null,null);t.default=re.exports},"3cJP":function(e,t){},"8IKV":function(e,t,i){"use strict";var a=i("//Fk"),s=i.n(a),n=i("Lxn6"),o=(i("NJM4"),{name:"CascaderOrganize",props:{defaultFirst:{type:Array,default:void 0},isShowStar:{type:Boolean,default:null},isCheckProcess:{type:String,default:""}},data:function(){return{showStar:!1,loading:!1,props:{label:"orgName",value:"orgID",children:"m_ChildOrg"},cascad:{organize:{},department:{},projects:{}},company:"",department:"",projects:"",organizeList:[],activeCompany:[],departmentList:[],projectList:[],cacheMap:{}}},watch:{cascad:{handler:function(e,t){this.$emit("changeSetvaule",{data:this.cascad})},deep:!0}},created:function(){this.showStar=this.isShowStar;var e=this;e.$nextTick(function(){e.$on("refresh",function(){e.refresh()})}),this.isShowStar&&this.visibleOrganize()},methods:{disposeRepetition:function(e){this.$route.name&&n.a.burialPoint(this.$route.name+"-"+e)},burialPointEvent:function(e){n.a.burialPoint(e)},refresh:function(){this.company="",this.department="",this.projects="",this.$refs.orgtree.setCurrentKey(null),this.cascad={organize:{},department:{},projects:{}},this.departmentList=[],this.projectList=[]},visibleOrganize:function(){var e=this;0==e.organizeList.length&&(e.loading=!0,e.getOrganizeList().then(function(t){if(t.state&&e.defaultFirst&&e.defaultFirst.indexOf("organize")>-1){var i=e.$refs.orgtree.getNode(t.orgID);i&&(e.cascad.organize=i.data,e.$refs.orgtree.setCurrentKey(t.orgID),e.setOrganize(i))}e.loading=!1}))},selectTreeClick:function(e,t){this.department="",this.projects="";this.$refs.selectTree.visible=!1,e.orgID!=this.cascad.organize.orgID&&(this.cascad.organize=e,this.departmentList=[],this.cascad.department={},this.projectList=[],this.cascad.projects={},this.setOrganize(t))},clearOrganize:function(){this.refresh(),this.$refs.orgtree.getCurrentNode()&&this.$refs.orgtree.setCurrentKey(null)},setOrganize:function(e){var t=[];this.activeCompany=[],this.getPrarentNode(e,t),this.company=t.reverse().join("/"),this.company=this.company.substr(1,this.company.length)},getPrarentNode:function(e,t){void 0!=e.data&&(this.activeCompany.push(e.data),t.push(e.data.orgName)),void 0!=e.parent&&this.getPrarentNode(e.parent,t)},getOrganizeList:function(){var e=this,t={};return"0"===this.isCheckProcess&&(t.isSelect="0"),new s.a(function(i,a){e.$axios.post("/api/companytree/page",t).then(function(t){if(t.data.companyTreeList.length>0){e.organizeList=t.data.companyTreeList;var a=e.organizeList[0].orgID;i({state:!0,orgID:a})}else i({state:!0})}).catch(function(e){a("获取组织数据失败!ERROR MESSAGE:"+e)})})},getdepartmentList:function(e){var t=this;t.$axios.post("/api/department/page",{orgID:e}).then(function(i){t.departmentList=i.data.departmentList,t.setCacheMap(t.departmentList,e,"department")}).catch(function(e){t.$message.error("获取部门数据失败!ERROR MESSAGE:"+e)})},changeDepartment:function(e){console.log("选中部门",e),this.cascad.department=e},clearDepartment:function(){},visibleDepartment:function(e){if(e&&this.cascad.organize.orgID){if(this.cacheMap[this.cascad.organize.orgID]&&this.cacheMap[this.cascad.organize.orgID].department)return void(this.departmentList=this.cacheMap[this.cascad.organize.orgID].department);this.getdepartmentList(this.cascad.organize.orgID)}},getprojectList:function(e){var t=this;t.$axios.post("/api/project/page",{orgID:e}).then(function(i){t.projectList=i.data.projectList,t.setCacheMap(t.projectList,e,"project")}).catch(function(e){t.$message.error("获取项目数据失败!ERROR MESSAGE:"+e)})},changeProject:function(e){console.log("选中项目",e),this.cascad.projects=e},clearProject:function(){},visibleProject:function(e){if(e&&this.cascad.organize.orgID){if(this.cacheMap[this.cascad.organize.orgID]&&this.cacheMap[this.cascad.organize.orgID].project)return void(this.projectList=this.cacheMap[this.cascad.organize.orgID].project);this.getprojectList(this.cascad.organize.orgID)}},setCacheMap:function(e,t,i){this.cacheMap[t]||(this.cacheMap[t]={}),this.cacheMap[t][i]=e}}}),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"所属公司",title:e.company}},[e.isShowStar?i("span",{staticStyle:{color:"red","font-size":"14px",float:"left",position:"absolute",top:"-5px",left:"-10px","z-index":"99"}},[e._v("*")]):e._e(),e._v(" "),i("el-select",{ref:"selectTree",attrs:{"value-key":"orgID",clearable:"",placeholder:"请选择...","popper-class":"tree-list-box"},on:{focus:function(t){e.disposeRepetition("输入条件-所属公司")},clear:e.clearOrganize,"visible-change":e.visibleOrganize},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}},[i("el-option",{staticStyle:{height:"auto",padding:"0px 0px"},attrs:{value:"orgID",disabled:!0}},[i("div",{staticStyle:{height:"100%",width:"100%"}},[i("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"orgtree",attrs:{data:e.organizeList,"node-key":"orgID","highlight-current":"","default-expand-all":"","expand-on-click-node":!1,"empty-text":"无数据",props:e.props},on:{"node-click":e.selectTreeClick}})],1)])],1)],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"部门"}},[i("el-select",{attrs:{"value-key":"id",clearable:"",placeholder:"请选择...","popper-class":"tree-list-box"},on:{focus:function(t){e.disposeRepetition("输入条件-部门")},clear:e.clearDepartment,change:e.changeDepartment,"visible-change":e.visibleDepartment},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},e._l(e.departmentList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"项目"}},[i("el-select",{attrs:{"value-key":"pc_ID",clearable:"",placeholder:"请选择...","popper-class":"tree-list-box"},on:{focus:function(t){e.disposeRepetition("输入条件-项目")},clear:e.clearProject,change:e.changeProject,"visible-change":e.visibleProject},model:{value:e.projects,callback:function(t){e.projects=t},expression:"projects"}},e._l(e.projectList,function(e){return i("el-option",{key:e.pc_ID,attrs:{label:e.pc_NAME,value:e}})}))],1)],1)],1)},staticRenderFns:[]};var l=i("VU/8")(o,r,!1,function(e){i("AtOt")},"data-v-b7a5b7c2",null).exports;t.a=l},"8zt+":function(e,t){},"9RGQ":function(e,t){},AtOt:function(e,t){},BueU:function(e,t){},Bwb9:function(e,t,i){"use strict";var a=i("BO1k"),s=i.n(a),n=i("Lxn6"),o=(i("PJh5"),i("+vjY"),{name:"",props:{rowData:{type:Object}},data:function(){return{activeName:"flowStep",templateStep:[],logData:[],flowChartdata:[],processtemplatename:"",activeIndex:0,loading:!1}},mounted:function(){this.burialPointEvent("列表-流程图图标"),this.burialPointEvent("列表-流程步骤"),this.getFlowStep(),this.closeProcessImg()},methods:{burialPointEvent:function(e){n.a.burialPoint(this.$route.name+"-"+e)},labelHead:function(e,t){var i=t.column;t.index;return e("span",{attrs:{title:i.label}},[null!=i.label&&i.label.length>12?i.label.substr(0,12)+"...":i.label])},close:function(){this.$emit("hideComponent")},closeProcessImg:function(){var e=this;document.getElementsByClassName("pc-candidates")[0].addEventListener("click",function(t){"pc-candidates"===t.target.classList[0]&&e.$emit("hideComponent")})},handleClick:function(e,t){switch(e.name){case"flowStep":break;case"flowChart":this.flowChartdata&&0!=this.flowChartdata.length||this.getFlowChart();break;case"flowLog":this.logData&&0!=this.logData.length||this.getFlowLog()}},getFlowStep:function(){var e=this,t=e.rowData.procInstID,i=(e.rowData.procInstNo,{procinstid:t});e.loading=!0,e.$axios.post("/api/vkProcess/step",i).then(function(t){var i=t.data;e.processtemplatename=i.processtemplatename;var a=!0,n=!1,o=void 0;try{for(var r,l=s()(i.result);!(a=(r=l.next()).done);a=!0){var c=r.value,d=c.finishdate,h=c.startdate,u="";e.CheckDateTime(h)&&e.CheckDateTime(d)&&(u=e.returnatetime(h,d));var g={activityname:c.activityname,stepData:[{username:c.username,finishdate:d,useTime:u}]};e.templateStep.push(g)}}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error("获取流程步骤失败！"+t)})},returnatetime:function(e,t){e=e.replace(new RegExp(/-/gm),"/"),t=t.replace(new RegExp(/-/gm),"/");var i=new Date(e),a=new Date(t).getTime()-i.getTime(),s=a%864e5,n=s%36e5,o=n%6e4;return Math.floor(a/864e5)+"天 "+Math.floor(s/36e5)+"小时 "+Math.floor(n/6e4)+" 分钟"+Math.round(o/1e3)+" 秒"},CheckDateTime:function(e){var t=e.match(/^(\d+)-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/);if(null==t)return!1;t[2]=t[2]-1;var i=new Date(t[1],t[2],t[3],t[4],t[5],t[6]);return i.getFullYear()==t[1]&&(i.getMonth()==t[2]&&(i.getDate()==t[3]&&(i.getHours()==t[4]&&(i.getMinutes()==t[5]&&i.getSeconds()==t[6]))))},getFlowLog:function(){var e=this,t={procinstid:this.rowData.procInstID};e.loading=!0,e.$axios.post("/api/vkProcess/log",t).then(function(t){e.logData=t.data.result,e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error("获取流程日志失败！"+t)})},getFlowChart:function(){var e=this,t=this,i=t.rowData.procInstID;t.loading=!0,t.$axios.post("/api/vkProcess/img",{procinstid:i}).then(function(i){var a=i.data.result,s=a.stepObj,n=a.stepName,o=a.activity;t.setStepValue(o,s,n),e.flowChartdata=t.split(o),t.loading=!1}).catch(function(i){t.loading=!1,e.$message.error("获取流程图失败！"+i)})},setStepValue:function(e,t,i){if(!t&&!i){var a=!0,n=!1,o=void 0;try{for(var r,l=s()(e);!(a=(r=l.next()).done);a=!0){r.value.status="finish"}}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}}if(t&&i){var c=!0,d=!1,h=void 0;try{for(var u,g=s()(e);!(c=(u=g.next()).done);c=!0){var f=u.value;Number(f.activityorder)<Number(t.activityorder)?(f.activityname+="(已完成)",f.status="finish"):Number(f.activityorder)==Number(t.activityorder)?(f.activityname+="(审批中)",f.status="process"):Number(f.activityorder)>Number(t.activityorder)&&(f.activityname+="(未审批)",f.status="wait")}}catch(e){d=!0,h=e}finally{try{!c&&g.return&&g.return()}finally{if(d)throw h}}this.activeIndex=Number(t.activityorder)}if(!t&&i){var p=!0,v=!1,m=void 0;try{for(var y,C=s()(e);!(p=(y=C.next()).done);p=!0){var T=y.value;T.activityname+="(未审批)",T.status="wait"}}catch(e){v=!0,m=e}finally{try{!p&&C.return&&C.return()}finally{if(v)throw m}}}e.unshift({activityid:"start_",activityname:"开始",status:"finish"})},split:function(e){for(var t=[],i=Math.ceil(e.length/5);i>0;)t.push(e.slice(5*(i-1),5*i)),i--;return t=t.reverse()}}}),r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flow_chart"},[i("div",{staticClass:"pc-candidates pc-background"},[i("div",{staticClass:"dialog_content"},[i("div",{staticClass:"top"},[e._v("流程图"),i("span",{staticStyle:{cursor:"pointer","font-size":"30px"},on:{click:e.close}},[e._v("×")])]),e._v(" "),i("div",{staticClass:"initProcess"},[i("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"border-card","element-loading-text":"拼命加载中","element-loading-background":"rgba(255, 255, 255, 0.8)"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{calss:"steps",name:"flowStep"}},[i("span",{attrs:{slot:"label",name:"step"},slot:"label"},[i("i",{staticClass:"iconfont icon-processsteps"}),e._v(" 流程步骤")]),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"content-top"},[i("h2",{staticClass:"name"},[e._v("流程模板："),i("span",[e._v(e._s(e.processtemplatename))])])]),e._v(" "),i("div",{staticClass:"scrollDiv"},e._l(e.templateStep,function(t,a){return i("div",{key:a,staticClass:"clearfix"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stepData,border:""}},[i("el-table-column",{attrs:{label:(a+1).toString(),align:"center",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"username",label:t.activityname,align:"center","render-header":e.labelHead,width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"finishdate",label:"填单时间",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:"所用时间",align:"center",prop:"useTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.useTime))]}}])})],1)],1)}))])]),e._v(" "),i("el-tab-pane",{attrs:{name:"flowChart"}},[i("span",{attrs:{slot:"label"},on:{click:function(t){e.burialPointEvent("列表-流程图-流程图")}},slot:"label"},[i("i",{staticClass:"iconfont icon-flowchart"}),e._v(" 流程图")]),e._v(" "),i("div",[i("el-steps",{attrs:{"align-center":!0}},e._l(e.flowChartdata,function(t,a){return i("div",{key:a,staticClass:"step-linerow"},e._l(t,function(e){return i("el-step",{key:e.activityid,attrs:{status:e.status,title:e.activityname.length>27?e.activityname.substr(0,25)+"...":e.activityname}})}))}))],1)]),e._v(" "),i("el-tab-pane",{attrs:{name:"flowLog"}},[i("span",{attrs:{slot:"label"},on:{click:function(t){e.burialPointEvent("列表-流程图-操作日志")}},slot:"label"},[i("i",{staticClass:"iconfont icon-operationlog"}),e._v(" 操作日志")]),e._v(" "),[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.logData,border:""}},[i("el-table-column",{attrs:{label:" ",type:"index","header-align":"center",width:"50"}}),e._v(" "),i("el-table-column",{attrs:{prop:"username",label:"操作人","header-align":"center","win-width":"160"}}),e._v(" "),i("el-table-column",{attrs:{prop:"timestamp",label:"时间","header-align":"center","win-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.timestamp,"YYYY-MM-DD HH:mm:ss")))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"message","header-align":"center",width:"135",label:"操作结果"}})],1)]],2)],1)],1)])])])},staticRenderFns:[]};var l=i("VU/8")(o,r,!1,function(e){i("+X0E")},"data-v-d57d7e70",null);t.a=l.exports},D9Qt:function(e,t){},Gu7T:function(e,t,i){"use strict";t.__esModule=!0;var a,s=i("c/Tr"),n=(a=s)&&a.__esModule?a:{default:a};t.default=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return(0,n.default)(e)}},J9uR:function(e,t,i){"use strict";var a,s=i("bOdI"),n=i.n(s),o=i("//Fk"),r=i.n(o),l=i("BO1k"),c=i.n(l),d=i("M4fF"),h=i("Lxn6"),u={name:"",props:{componentParam:{componentType:{type:String,required:!0},childDataUrl:{type:Object,required:!0},backfillData:{type:Array,default:new Array,required:!0},assemblyParam:{type:Object,required:!0},checkProcess:{type:Boolean,default:!1,required:!0},oneCheck:{type:Boolean,default:!1,required:!0},closeShow:{type:Boolean,default:!0,required:!0},type:Object,required:!0}},mounted:function(){if(this.componentParam.backfillData.length>0){var e=!0,t=!1,i=void 0;try{for(var a,s=c()(this.componentParam.backfillData);!(e=(a=s.next()).done);e=!0){var n=a.value;this.selectedCities.push(n)}}catch(e){t=!0,i=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw i}}}},data:function(){return{checkedCities:[],selectedCities:[],processName:"",organizeProcessName:"",organName:"",selectOrgs:[],isActive:!1,checkAll:!1,cities:[],treeSearch:"",treeList:[],rootNode:{},defaultProps:{id:"id",children:"Child",label:"name"},tooltiprocessName:"",defaultKeys:[],currentId:"",isIndeterminate:!1,props:{label:"orgName",value:"orgID",children:"m_ChildOrg"},organizeList:[],activeOrganizeName:[],organizeName:"",organize:{orgID:""},imgLoading:!1}},watch:{treeSearch:function(e){this.debouncedSearchTree()}},created:function(e){var t=this;t.debouncedSearchTree=Object(d.debounce)(t.searchTree,2e3),t.debouncedGetProcess=Object(d.debounce)(t.getProcess,200,e),t.imgLoading=!0,r.a.all([t.getOrganizeList(),t.getUserOrganize()]).then(function(e){if(e[0]){t.organize.orgID=e[1]||t.organizeList[0].orgID;var i=t.$refs.orgtree.getNode(t.organize.orgID);i&&(t.$refs.orgtree.setCurrentKey(t.organize.orgID),t.setOrganize(i)),t.getCategoryOfOrganize(t.organize.orgID).then(function(){t.imgLoading=!1})}}).catch(function(e){t.imgLoading=!1,t.$message.error(e)})},methods:(a={selectTreeClick:function(e,t){var i=this;this.processName="",this.tooltiprocessName="",i.$refs.selectTree.visible=!1,i.organize=e,i.setOrganize(t),i.imgLoading=!0,i.getCategoryOfOrganize(e.orgID).then(function(){i.imgLoading=!1}),i.cities=[],i.checkAll=!1,i.isIndeterminate=!1},setOrganize:function(e){this.activeOrganizeName=[],this.getOrgPrarentNode(e),this.organizeName=this.activeOrganizeName.reverse().join("/"),this.organizeProcessName=this.activeOrganizeName.join(">")+">"},getUserOrganize:function(){var e=this;return new r.a(function(t,i){e.$axios.post("/api/getorg",{}).then(function(e){if(e.data.getOrgList.length>0){var i=e.data.getOrgList[0].orgid;t(i)}else t(null)}).catch(function(e){i("获取用户所在部门失败!ERROR MESSAGE:"+e)})})},getOrganizeList:function(){var e=this;return new r.a(function(t,i){e.$axios.post("/api/companytree/page",{}).then(function(i){i.data.companyTreeList.length>0?(e.organizeList=i.data.companyTreeList,t(!0)):t(!1)}).catch(function(e){i("获取组织数据失败!ERROR MESSAGE:"+e)})})},getCategoryOfOrganize:function(e){var t=this,i={orgId:e,isUse:1,name:t.treeSearch.trim(),isHide:1,isDailog:"1"};return new r.a(function(e,a){t.$axios.post("/api/processCategory",i).then(function(i){if(0==i.data.result.length)t.treeList=[];else{for(var a=h.a.toTree(i.data.result,"id","pid","Child"),s=0;s<a.length;s++)0!=a[s].pid&&(a.splice(s,1),s--);t.treeList=a}e(!0)}).catch(function(e){a("查询列表数据失败!ERROR MESSAGE:"+e)})})},getOrgPrarentNode:function(e){void 0!=e.data.orgName&&this.activeOrganizeName.push(e.data.orgName),void 0!=e.parent&&this.getOrgPrarentNode(e.parent)},enterSearch:function(){this.defaultKeys=[],this.debouncedSearchTree()},searchTree:function(){var e=this;if(e.defaultKeys=[],""==e.treeSearch.trim())return e.imgLoading=!0,void e.getCategoryOfOrganize(e.organize.orgID).then(function(){e.imgLoading=!1});""!=e.organize.orgID?e.searchProcessCategory():e.$message.warning("请先选择组织进行搜索！")},searchProcessCategory:function(){var e=this;e.treeList.splice(0,e.treeList.length),e.cities.splice(0,e.cities.length),e.checkAll=!1,e.isIndeterminate=!1;var t={isCategory:"",isDailog:1,isHide:1,isUse:1,name:e.treeSearch.trim(),id:"",orgId:e.organize.orgID};e.imgLoading=!0,e.$axios.post("/api/processCategoryTree",t).then(function(t){if(0==t.data.result.length)e.treeList=[];else{var i=h.a.toTree(t.data.result,"id","pid","Child");e.treeList=i,e.getdefaultKeys(i)}e.imgLoading=!1}).catch(function(t){e.imgLoading=!1,e.$message.error("搜索组织流程失败！"+t)})},getProcess:function(e){if(e){var t=this,i=t.getSelectProcessId(t.selectedCities),a={isCategory:"0",isDailog:1,isHide:1,isUse:1,name:"",id:e.data.id,orgId:t.organize.orgID};t.imgLoading=!0,t.$axios.post("/api/processCategoryTree",a).then(function(e){t.displayProcess(e.data.result,i),t.imgLoading=!1}).catch(function(e){t.imgLoading=!1,t.$message.error("连接服务器失败！"+e)})}},handleNodeClick:function(e,t){if(0==this.treeSearch.trim().length)this.debouncedGetProcess(t);else if(this.treeSearch.trim().length>0){var i=this.getSelectProcessId(this.selectedCities),a=[];e.Child?a=e.Child:a.push(e),this.displayProcess(a,i)}this.selectOrgs=[],this.getPrarentNode(t),this.disposeOrganName(e.name)},getdefaultKeys:function(e){var t=!0,i=!1,a=void 0;try{for(var s,n=c()(e);!(t=(s=n.next()).done);t=!0){var o=s.value;o.hasOwnProperty("Child")&&o.Child.length>0&&(this.defaultKeys.push(o.id),this.getdefaultKeys(o.Child))}}catch(e){i=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(i)throw a}}},displayProcess:function(e,t){this.cities.splice(0,this.cities.length),this.checkedCities=[],this.checkAll=!1,this.isIndeterminate=!1;var i=!0,a=!1,s=void 0;try{for(var n,o=c()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;r.processId&&"0"!==r.processId&&null!==r.processId&&(t.indexOf(r.processId)>-1&&this.checkedCities.push(r),this.cities.push(r))}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}var l=this.getId(this.cities),d=0,h=!0,u=!1,g=void 0;try{for(var f,p=c()(this.checkedCities);!(h=(f=p.next()).done);h=!0){var v=f.value;-1!==l.indexOf(v.id)&&d++}}catch(e){u=!0,g=e}finally{try{!h&&p.return&&p.return()}finally{if(u)throw g}}this.checkAll=d>0&&d===this.cities.length,this.isIndeterminate=this.checkedCities.length>0&&this.checkedCities.length<this.cities.length},dblclickCheckedCitie:function(e){this.clickDepartment(e),this.$emit("sureSubmit",{type:this.componentParam.componentType,list:this.selectedCities})},clickDepartment:function(e){this.selectedCities.splice(0,this.selectedCities.length),this.selectedCities.push(e),this.checkedCities.splice(0,this.checkedCities.length),this.checkedCities.push(e);var t=this.$refs.processTree.getNode(e.pid);this.selectOrgs=[],this.getPrarentNode(t),e.tooltiprocessName=this.disposeOrganName(e.name)},handleCheckAllChange:function(e){this.checkedCities=[];var t=this.getSelectProcessId(this.selectedCities);if(e){var i=!0,a=!1,s=void 0;try{for(var n,o=c()(this.cities);!(i=(n=o.next()).done);i=!0){var r=n.value;-1===t.indexOf(r.processId)&&this.selectedCities.push(r),this.checkedCities.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}this.checkAll=!0,this.isIndeterminate=!1}else{var l=!0,d=!1,h=void 0;try{for(var u,g=c()(this.cities);!(l=(u=g.next()).done);l=!0){var f=u.value;if(t.indexOf(f.processId)>-1){var p=-1;for(var v in this.selectedCities)this.selectedCities[v].processId==f.processId&&(p=v);-1!=p&&this.selectedCities.splice(p,1)}}}catch(e){d=!0,h=e}finally{try{!l&&g.return&&g.return()}finally{if(d)throw h}}this.checkAll=!1,this.isIndeterminate=!1}},handleCheckedCitiesChange:function(e){this.isIndeterminate=!1;var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=c()(this.selectedCities);!(i=(n=o.next()).done);i=!0){var r=n.value;t.push(r)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}this.selectedCities.splice(0,this.selectedCities.length);var l=this.getId(this.cities),d=[];for(var h in t)-1==l.indexOf(t[h].id)&&d.push(t[h]);this.selectedCities=d;var u=[],g=!0,f=!1,p=void 0;try{for(var v,m=c()(e);!(g=(v=m.next()).done);g=!0){var y=v.value;u.tooltiprocessName=this.disposeOrganName(y.name)}}catch(e){f=!0,p=e}finally{try{!g&&m.return&&m.return()}finally{if(f)throw p}}var C=this.getSelectProcessId(this.selectedCities),T=!0,b=!1,k=void 0;try{for(var S,x=c()(e);!(T=(S=x.next()).done);T=!0){var I=S.value;-1===C.indexOf(I.processId)&&this.selectedCities.push(I)}}catch(e){b=!0,k=e}finally{try{!T&&x.return&&x.return()}finally{if(b)throw k}}var P=0,w=!0,_=!1,D=void 0;try{for(var N,O=c()(e);!(w=(N=O.next()).done);w=!0){var $=N.value;-1!==l.indexOf($.id)&&P++}}catch(e){_=!0,D=e}finally{try{!w&&O.return&&O.return()}finally{if(_)throw D}}this.checkedCities=e,this.checkAll=P===this.cities.length,this.isIndeterminate=P>0&&P<this.cities.length},pullBtnHeightChange:function(){this.isActive=!this.isActive},sureSubmit:function(){this.$emit("sureSubmit",{type:this.componentParam.componentType,list:this.selectedCities})},getSelectProcessId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=c()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;t.push(r.processId)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t},getId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=c()(e);!(i=(n=o.next()).done);i=!0){var r=n.value;t.push(r.id)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t}},n()(a,"pullBtnHeightChange",function(){this.isActive=!this.isActive}),n()(a,"close",function(){this.$emit("hideComponent")}),n()(a,"deleteDept",function(e){for(var t in this.checkAll=!1,this.isIndeterminate=!1,this.checkedCities)this.checkedCities[t].id==this.selectedCities[e].id&&this.checkedCities.splice(t,1);this.selectedCities.splice(e,1),this.checkAll=this.checkedCities.length===this.cities.length&&this.cities.length>0,this.isIndeterminate=this.checkedCities.length>0&&this.checkedCities.length<this.cities.length}),n()(a,"clearDept",function(){this.checkedCities.splice(0,this.checkedCities.length),this.selectedCities.splice(0,this.selectedCities.length),this.checkAll=!1,this.isIndeterminate=!1}),n()(a,"disposeOrganName",function(e){var t="",i=!0,a=!1,s=void 0;try{for(var n,o=c()(this.selectOrgs);!(i=(n=o.next()).done);i=!0){t+=n.value.text+" > "}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t=(t=t.trim()).substr(0,t.length-1),this.tooltiprocessName=t,t.length>30?this.processName=t.substr(0,30)+"...":this.processName=t,t}),n()(a,"getPrarentNode",function(e){e&&(e.data&&void 0!=e.data.name&&this.selectOrgs.unshift({text:""+e.data.name,petId:""+e.data.id,PID:""+e.data.pid}),void 0!=e.parent&&this.getPrarentNode(e.parent))}),a)},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"originater_dialog newProcess_dialog"},[i("div",{class:[e.componentParam.closeShow?"pc-candidates":"pc-candidates pc-background"]},[i("div",{staticClass:"dialog_content"},[i("el-main",{staticStyle:{position:"relative"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.componentParam.closeShow,expression:"!componentParam.closeShow"}],staticClass:"top"},[e._v("流程选择\n          "),i("span",{staticStyle:{"font-size":"30px",cursor:"pointer"},on:{click:e.close}},[e._v("×")])]),e._v(" "),i("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],attrs:{type:"card","element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[i("el-tab-pane",{staticClass:"candidates-recently"},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-todos"}),e._v(" 流程")]),e._v(" "),i("div",{staticClass:"title  title-border"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right",title:e.organizeProcessName+e.tooltiprocessName}},[i("el-breadcrumb-item",[e._v("流程选择")]),e._v(" "),i("el-breadcrumb-item",{staticStyle:{overflow:"hidden","-ms-text-overflow":"ellipsis","text-overflow":"ellipsis","white-space":"nowrap",width:"300px",display:"inline-block"}},[e._v(e._s(e.organizeProcessName)+e._s(e.processName))])],1),e._v(" "),i("span",{staticClass:"rightInput"},[i("el-input",{attrs:{placeholder:"请输入流程关键字","prefix-icon":"el-icon-search",size:"mini"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.enterSearch(t):null}},model:{value:e.treeSearch,callback:function(t){e.treeSearch=t},expression:"treeSearch"}})],1)],1),e._v(" "),i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"content-left",staticStyle:{position:"relative"}},[i("div",{staticClass:"title"},[i("el-form",{staticClass:"demo-form-inline init-organize-box",staticStyle:{width:"100%"},attrs:{inline:!0}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:""}},[i("el-select",{ref:"selectTree",staticStyle:{width:"100%"},attrs:{placeholder:"组织","popper-class":"tree-list-box"},model:{value:e.organizeName,callback:function(t){e.organizeName=t},expression:"organizeName"}},[i("el-option",{staticStyle:{height:"auto",padding:"0px 0px"},attrs:{value:"",disabled:!0}},[i("div",[i("el-tree",{ref:"orgtree",attrs:{data:e.organizeList,"highlight-current":!0,"node-key":"orgID","default-expand-all":"","expand-on-click-node":!1,"empty-text":"暂无数据",props:e.props},on:{"node-click":e.selectTreeClick}})],1)])],1)],1)],1)],1),e._v(" "),e.treeList.length>0?i("el-tree",{ref:"processTree",attrs:{data:e.treeList,"node-key":"id","highlight-current":!0,props:e.defaultProps,"empty-text":"","expand-on-click-node":!1,"default-expanded-keys":e.defaultKeys},on:{"node-click":e.handleNodeClick}}):e._e(),e._v(" "),0===e.treeList.length?i("div",{staticStyle:{position:"absolute",top:"50%",left:"50%","-webkit-transform":"translate(-50%, -50%)","-moz-transform":"translate(-50%, -50%)","-ms-transform":"translate(-50%, -50%)","-o-transform":"translate(-50%, -50%)",transform:"translate(-50%, -50%)"}},[e._v("\n                  暂无数据\n                ")]):e._e()],1),e._v(" "),i("div",{staticClass:"content-right",staticStyle:{position:"relative"}},[e.componentParam.oneCheck?e._e():i("el-checkbox",{staticStyle:{"padding-top":"6px","padding-left":"20px"},attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n                ")]),e._v(" "),e.componentParam.oneCheck?i("el-checkbox-group",{staticClass:"theRadio",model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return i("el-checkbox-button",{key:t.id,attrs:{label:t,checked:t.checked}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body",on:{click:function(i){e.clickDepartment(t)},dblclick:function(i){e.dblclickCheckedCitie(t)}}},[i("h4",{staticClass:"media-heading iconfont icon-process1",attrs:{title:t.name}},[e._v(e._s(t.name.length>30?t.name.substr(0,30)+"...":t.name))])])])])})):i("el-checkbox-group",{staticClass:"mut-check",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return i("el-checkbox",{key:t.id,attrs:{label:t,checked:t.checked}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body"},[i("h4",{staticClass:"media-heading",attrs:{title:t.name}},[e._v(e._s(t.name.length>30?t.name.substr(0,30)+"...":t.name))])])])])})),e._v(" "),0===e.cities.length?i("div",{staticStyle:{position:"absolute",top:"50%",left:"50%","-webkit-transform":"translate(-50%, -50%)","-moz-transform":"translate(-50%, -50%)","-ms-transform":"translate(-50%, -50%)","-o-transform":"translate(-50%, -50%)",transform:"translate(-50%, -50%)"}},[e._v("\n                  暂无数据\n                ")]):e._e()],1)]),e._v(" "),i("div",{staticClass:"addrecently-box",class:{pullup:e.isActive}},[i("div",{staticClass:"addrecently"},[i("div",{staticClass:"media"},[i("div",{staticClass:"pull",on:{click:e.pullBtnHeightChange}}),e._v(" "),i("ul",{staticClass:"clearfix"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedCities.length>0,expression:"selectedCities.length>0"}],staticClass:"clearBtn",on:{click:e.clearDept}}),e._v(" "),e._l(e.selectedCities,function(t,a){return i("li",{key:a},[i("div",{staticClass:"media-body"},[i("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.deleteDept(a)}}}),e._v(" "),i("span",{staticClass:"media-heading"},[e._v(e._s(t.name))])])])})],2)])])]),e._v(" "),i("div",{staticClass:"addrecently-footer"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.sureSubmit}},[e._v("确定\n              ")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:e.close}},[e._v("取消")])],1)])],1)],1)],1)])])},staticRenderFns:[]};var f=i("VU/8")(u,g,!1,function(e){i("BueU")},"data-v-3f6ca5e6",null);t.a=f.exports},JWYC:function(e,t){},NJM4:function(e,t){e.exports={company:[{orgID:"yewuxitongzhuanyong",orgName:"业务系统专用",orgorder:100,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"fzgs",orgName:"万科物业总部",orgorder:200,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"fzgs-1",orgName:"测试数据-1",pid:"fzgs",orgorder:200,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"fzgs-1-1",orgName:"测试数据-1-1",pid:"fzgs-1",orgorder:200,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"city",orgName:"城市公司共用",orgorder:300,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"zhuzhai",orgName:"BU1.住宅运营",orgorder:400,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"yewuliucheng",orgName:"BU2.1业务流程",orgorder:500,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"pulinyewu",orgName:"BU4.1朴邻业务",orgorder:600,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"vanrui",orgName:"BU5 万睿智能",orgorder:700,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"fuxunxinxijishu",orgName:"福迅信息技术",orgorder:800,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"wwc",orgName:"万物仓",orgorder:900,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null},{orgID:"diwust",orgName:"第五食堂",orgorder:950,orgCode:"",orgIsHidden:1,parentOrgID:"vanke",orgIsEnabled:1,m_ProcessCategories:null,m_ChildOrg:[],permissionRange:null}],department:[{deptId:"csbm1",deptName:"测试部门-1"},{deptId:"csbm2",deptName:"测试部门-2"},{deptId:"csbm3",deptName:"测试部门-3"},{deptId:"csbm4",deptName:"测试部门-4"},{deptId:"csbm5",deptName:"测试部门-5"}],project:[{projectId:"cszz1",projectName:"测试组织-1"},{projectId:"cszz2",projectName:"测试组织-2"},{projectId:"cszz3",projectName:"测试组织-3"},{projectId:"cszz4",projectName:"测试组织-4"},{projectId:"cszz5",projectName:"测试组织-5"}]}},PTnI:function(e,t){},ScqL:function(e,t){},"T//Y":function(e,t,i){"use strict";var a={name:"page",props:{pageIndex:{type:Number,default:1,required:!0},pageSize:{type:Number,default:1,required:!0},total:{type:Number,default:0,required:!0},pageSizesList:{type:Array,required:!0}},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)},firstPage:function(){this.pageIndex=1},tailPage:function(){this.pageIndex=this.$refs.page.internalPageCount}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page"},[i("el-pagination",{ref:"page",attrs:{background:"","current-page":e.pageIndex,"page-sizes":e.pageSizesList,"page-size":e.pageSize,"prev-text":"首页","next-text":"尾页",layout:"total, prev, pager, next, sizes",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"prev-click":e.firstPage,"next-click":e.tailPage}})],1)},staticRenderFns:[]};var n=i("VU/8")(a,s,!1,function(e){i("8zt+")},"data-v-0fef66a5",null).exports;t.a=n},VTy0:function(e,t){},VgUy:function(e,t){},Xg7m:function(e,t,i){"use strict";var a,s=i("bOdI"),n=i.n(s),o=i("BO1k"),r=i.n(o),l=i("//Fk"),c=i.n(l),d=(i("M4fF"),i("Lxn6")),h={name:"processClassification",props:{componentParam:{componentType:{type:String,required:!0},backfillData:{type:Array,default:new Array,required:!0},oneCheck:{type:Boolean,default:!1,required:!0},closeShow:{type:Boolean,default:!0,required:!0},type:Object,required:!0}},data:function(){return{tooltipclassificationName:"",classificationName:"",treeSearch:"",treeList:[],defaultKeys:[],defaultProps:{id:"id",children:"Child",label:"name"},checkedCities:[],selectedCities:[],selectOrgs:[],isActive:!1,checkAll:!1,isIndeterminate:!1,cities:[],currentId:"",rootNode:{},oldtime:0,props:{label:"orgName",value:"orgID",children:"m_ChildOrg"},organizeList:[],activeOrganizeName:[],organizeName:"",organize:{orgID:""},imgLoading:!1}},watch:{treeSearch:function(e){this.$refs.classificationTree.filter(e.trim())}},created:function(e){var t=this;t.imgLoading=!0,c.a.all([t.getOrganizeList(),t.getUserOrganize()]).then(function(e){if(e[0]){t.organize.orgID=e[1]||t.organizeList[0].orgID;var i=t.$refs.orgtree.getNode(t.organize.orgID);i&&(t.$refs.orgtree.setCurrentKey(t.organize.orgID),t.setOrganize(i)),t.getCategoryOfOrganize(t.organize.orgID).then(function(){t.imgLoading=!1})}}).catch(function(e){t.imgLoading=!1,t.$message.error(e)})},mounted:function(){if(this.componentParam.backfillData.length>0){var e=!0,t=!1,i=void 0;try{for(var a,s=r()(this.componentParam.backfillData);!(e=(a=s.next()).done);e=!0){var n=a.value;this.selectedCities.push(n)}}catch(e){t=!0,i=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw i}}}},methods:(a={selectTreeClick:function(e,t){var i=this;i.$refs.selectTree.visible=!1,i.organize=e,i.setOrganize(t),i.imgLoading=!0,i.getCategoryOfOrganize(e.orgID).then(function(){i.imgLoading=!1}),i.cities=[],i.checkAll=!1,i.isIndeterminate=!1},setOrganize:function(e){this.activeOrganizeName=[],this.getOrgPrarentNode(e),this.organizeName=this.activeOrganizeName.reverse().join("/")},getUserOrganize:function(){var e=this;return new c.a(function(t,i){e.$axios.post("/api/getorg",{}).then(function(e){if(e.data.getOrgList.length>0){var i=e.data.getOrgList[0].orgid;t(i)}else t(null)}).catch(function(e){i("获取用户所在部门失败!ERROR MESSAGE:"+e)})})},getOrganizeList:function(){var e=this;return new c.a(function(t,i){e.$axios.post("/api/companytree/page",{}).then(function(i){i.data.companyTreeList.length>0?(e.organizeList=i.data.companyTreeList,t(!0)):t(!1)}).catch(function(e){i("获取组织数据失败!ERROR MESSAGE:"+e)})})},getCategoryOfOrganize:function(e){var t=this,i={orgId:e,isUse:1,name:t.treeSearch,isHide:1,isDailog:"1"};return new c.a(function(e,a){t.$axios.post("/api/processCategory",i).then(function(i){if(0==i.data.result.length)t.$message.success("暂无数据"),t.treeList=[];else{for(var a=d.a.toTree(i.data.result,"id","pid","Child"),s=0;s<a.length;s++)0!=a[s].pid&&(a.splice(s,1),s--);t.treeList=a}e(!0)}).catch(function(e){a("查询列表数据失败!ERROR MESSAGE:"+e)})})},getOrgPrarentNode:function(e){void 0!=e.data.orgName&&this.activeOrganizeName.push(e.data.orgName),void 0!=e.parent&&this.getOrgPrarentNode(e.parent)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},handleNodeClick:function(e,t){var i=this,a=(new Date).getTime();if(i.oldtime&&i.rootNode&&(a-i.oldtime<500&&i.rootNode.id==t.id))return i.clickDepartment(e),i.getChildNode(t.data.Child),void setTimeout(function(){i.$emit("sureSubmit",{type:i.componentParam.componentType,list:i.selectedCities})},300);i.oldtime=a,i.rootNode=t,i.displayContents(t.data),i.selectOrgs=[],i.getPrarentNode(t),i.disposeOrganName(e.name)},displayContents:function(e){var t=this.getId(this.selectedCities);if(this.cities=[],this.checkedCities=[],this.checkAll=!1,this.isIndeterminate=!1,e.hasOwnProperty("Child")){var i=!0,a=!1,s=void 0;try{for(var n,o=r()(e.Child);!(i=(n=o.next()).done);i=!0){var l=n.value;this.cities.push(l)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}var c=!0,d=!1,h=void 0;try{for(var u,g=r()(e.Child);!(c=(u=g.next()).done);c=!0){l=u.value;t.indexOf(l.id)>-1&&this.checkedCities.push(l)}}catch(e){d=!0,h=e}finally{try{!c&&g.return&&g.return()}finally{if(d)throw h}}}else t.indexOf(e.id)>-1&&this.checkedCities.push(e),this.cities.push(e);var f=this.getId(this.cities),p=0,v=!0,m=!1,y=void 0;try{for(var C,T=r()(this.checkedCities);!(v=(C=T.next()).done);v=!0){var b=C.value;-1!==f.indexOf(b.id)&&p++}}catch(e){m=!0,y=e}finally{try{!v&&T.return&&T.return()}finally{if(m)throw y}}this.checkAll=p>0&&p===this.cities.length,this.isIndeterminate=this.checkedCities.length>0&&this.checkedCities.length<this.cities.length},dblclickCheckedCitie:function(e){this.clickDepartment(e),this.$emit("sureSubmit",{type:"new_process_dialog",list:this.selectedCities})},clickDepartment:function(e){this.selectedCities.splice(0,this.selectedCities.length),this.selectedCities.push(e),this.checkedCities.splice(0,this.checkedCities.length),this.checkedCities.push(e);var t=this.$refs.classificationTree.getNode(e.pid);this.selectOrgs=[],this.getPrarentNode(t),e.tooltipclassificationName=this.disposeOrganName(e.name)},handleCheckAllChange:function(e){var t=this.getId(this.selectedCities);if(this.checkedCities=[],e){var i=!0,a=!1,s=void 0;try{for(var n,o=r()(this.cities);!(i=(n=o.next()).done);i=!0){var l=n.value;-1===t.indexOf(l.id)&&this.selectedCities.push(l),this.checkedCities.push(l)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}this.checkAll=!0,this.isIndeterminate=!1}else{var c=!0,d=!1,h=void 0;try{for(var u,g=r()(this.cities);!(c=(u=g.next()).done);c=!0){l=u.value;if(t.indexOf(l.id)>-1){var f=-1;for(var p in this.selectedCities)this.selectedCities[p].id==l.id&&(f=p);-1!=f&&this.selectedCities.splice(f,1)}}}catch(e){d=!0,h=e}finally{try{!c&&g.return&&g.return()}finally{if(d)throw h}}this.checkAll=!1,this.isIndeterminate=!1}},handleCheckedCitiesChange:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=r()(this.selectedCities);!(i=(n=o.next()).done);i=!0){var l=n.value;t.push(l)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}this.selectedCities.splice(0,this.selectedCities.length);var c=this.getId(this.cities),d=[];for(var h in t)-1==c.indexOf(t[h].id)&&(d.push(t[h]),S++);this.selectedCities=d;l=[];var u=!0,g=!1,f=void 0;try{for(var p,v=r()(e);!(u=(p=v.next()).done);u=!0){h=p.value;l.tooltipclassificationName=this.disposeOrganName(h.name)}}catch(e){g=!0,f=e}finally{try{!u&&v.return&&v.return()}finally{if(g)throw f}}var m=this.getId(this.selectedCities),y=!0,C=!1,T=void 0;try{for(var b,k=r()(e);!(y=(b=k.next()).done);y=!0){h=b.value;-1===m.indexOf(h.id)&&this.selectedCities.push(h)}}catch(e){C=!0,T=e}finally{try{!y&&k.return&&k.return()}finally{if(C)throw T}}var S=0,x=!0,I=!1,P=void 0;try{for(var w,_=r()(e);!(x=(w=_.next()).done);x=!0){var D=w.value;-1!==c.indexOf(D.id)&&S++}}catch(e){I=!0,P=e}finally{try{!x&&_.return&&_.return()}finally{if(I)throw P}}this.checkedCities=e,this.checkAll=S===this.cities.length,this.isIndeterminate=S>0&&S<this.cities.length},pullBtnHeightChange:function(){this.isActive=!this.isActive},sureSubmit:function(){this.$emit("sureSubmit",{type:this.componentParam.componentType,list:this.selectedCities})},getId:function(e){var t=[],i=!0,a=!1,s=void 0;try{for(var n,o=r()(e);!(i=(n=o.next()).done);i=!0){var l=n.value;t.push(l.id)}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t}},n()(a,"pullBtnHeightChange",function(){this.isActive=!this.isActive}),n()(a,"close",function(){this.$emit("hideComponent")}),n()(a,"deleteDept",function(e){for(var t in this.checkAll=!1,this.isIndeterminate=!1,this.checkedCities)this.checkedCities[t].id==this.selectedCities[e].id&&this.checkedCities.splice(t,1);this.selectedCities.splice(e,1),this.checkAll=this.checkedCities.length===this.cities.length&&this.cities.length>0,this.isIndeterminate=this.checkedCities.length>0&&this.checkedCities.length<this.cities.length}),n()(a,"clearDept",function(){this.checkedCities.splice(0,this.checkedCities.length),this.selectedCities.splice(0,this.selectedCities.length),this.checkAll=!1,this.isIndeterminate=!1}),n()(a,"disposeOrganName",function(e){var t="",i=!0,a=!1,s=void 0;try{for(var n,o=r()(this.selectOrgs);!(i=(n=o.next()).done);i=!0){t+=n.value.text+" > "}}catch(e){a=!0,s=e}finally{try{!i&&o.return&&o.return()}finally{if(a)throw s}}return t=(t=t.trim()).substr(0,t.length-1),this.tooltipclassificationName=t,t.length>30?this.classificationName=t.substr(0,30)+"...":this.classificationName=t,t}),n()(a,"getPrarentNode",function(e){e&&(e.data&&void 0!=e.data.name&&this.selectOrgs.unshift({text:""+e.data.name,petId:""+e.data.id,PID:""+e.data.pid}),void 0!=e.parent&&this.getPrarentNode(e.parent))}),n()(a,"getChildNode",function(e){var t=!0,i=!1,a=void 0;try{for(var s,n=r()(e);!(t=(s=n.next()).done);t=!0){var o=s.value;this.selectedCities.push(o),o.hasOwnProperty("Child")&&o.Child.length>0&&this.getChildNode(o.Child)}}catch(e){i=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(i)throw a}}}),a)},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"originater_dialog newProcess_dialog"},[i("div",{class:[e.componentParam.closeShow?"pc-candidates":"pc-candidates pc-background"]},[i("div",{staticClass:"dialog_content"},[i("el-main",{staticStyle:{position:"relative"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.componentParam.closeShow,expression:"!componentParam.closeShow"}],staticClass:"top"},[i("span",[e._v("流程分类选择")]),e._v(" "),i("span",{staticStyle:{"font-size":"30px",cursor:"pointer"},on:{click:e.close}},[e._v("×")])]),e._v(" "),i("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],attrs:{type:"card","element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[i("el-tab-pane",{staticClass:"candidates-recently"},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-todos"}),e._v(" 流程")]),e._v(" "),i("div",{staticClass:"title  title-border"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right",title:e.tooltipclassificationName}},[i("el-breadcrumb-item",[e._v("流程分类选择")]),e._v(" "),i("el-breadcrumb-item",[e._v(e._s(e.classificationName))])],1),e._v(" "),i("span",{staticClass:"rightInput"},[i("el-input",{attrs:{placeholder:"请输入流程分类名","prefix-icon":"el-icon-search",size:"mini"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.enterSearch(t):null}},model:{value:e.treeSearch,callback:function(t){e.treeSearch=t},expression:"treeSearch"}})],1)],1),e._v(" "),i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"content-left"},[i("div",{staticClass:"title"},[i("el-form",{staticClass:"demo-form-inline init-organize-box",staticStyle:{width:"100%"},attrs:{inline:!0}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:""}},[i("el-select",{ref:"selectTree",staticStyle:{width:"100%"},attrs:{placeholder:"组织","popper-class":"tree-list-box"},model:{value:e.organizeName,callback:function(t){e.organizeName=t},expression:"organizeName"}},[i("el-option",{staticStyle:{height:"auto",padding:"0px 0px"},attrs:{value:"",disabled:!0}},[i("div",[i("el-tree",{ref:"orgtree",attrs:{data:e.organizeList,"highlight-current":!0,"node-key":"orgID","default-expand-all":"","expand-on-click-node":!1,"empty-text":"暂无数据",props:e.props},on:{"node-click":e.selectTreeClick}})],1)])],1)],1)],1)],1),e._v(" "),i("el-tree",{ref:"classificationTree",attrs:{data:e.treeList,"node-key":"id","highlight-current":!0,props:e.defaultProps,"empty-text":"","expand-on-click-node":!1,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),i("div",{staticClass:"content-right"},[e.componentParam.oneCheck?e._e():i("el-checkbox",{staticStyle:{"padding-top":"6px","padding-left":"20px"},attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n                ")]),e._v(" "),e.componentParam.oneCheck?i("el-checkbox-group",{staticClass:"theRadio",model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return i("el-checkbox-button",{key:t.id,attrs:{label:t,checked:t.checked}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body",on:{click:function(i){e.clickDepartment(t)},dblclick:function(i){e.dblclickCheckedCitie(t)}}},[i("h4",{staticClass:"media-heading iconfont icon-process1",attrs:{title:t.name}},[e._v(e._s(t.name.length>30?t.name.substr(0,30)+"...":t.name))])])])])})):i("el-checkbox-group",{staticClass:"mut-check",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return i("el-checkbox",{key:t.id,attrs:{label:t,checked:t.checked}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body"},[i("h4",{staticClass:"media-heading",attrs:{title:t.name}},[e._v(e._s(t.name.length>30?t.name.substr(0,30)+"...":t.name))])])])])}))],1)]),e._v(" "),i("div",{staticClass:"addrecently-box",class:{pullup:e.isActive}},[i("div",{staticClass:"addrecently"},[i("div",{staticClass:"media"},[i("div",{staticClass:"pull",on:{click:e.pullBtnHeightChange}}),e._v(" "),i("ul",{staticClass:"clearfix"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.selectedCities.length>0,expression:"selectedCities.length>0"}],staticClass:"clearBtn",on:{click:e.clearDept}}),e._v(" "),e._l(e.selectedCities,function(t,a){return i("li",{key:a},[i("div",{staticClass:"media-body"},[i("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.deleteDept(a)}}}),e._v(" "),i("span",{staticClass:"media-heading"},[e._v(e._s(t.name))])])])})],2)])])]),e._v(" "),i("div",{staticClass:"addrecently-footer"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.sureSubmit}},[e._v("确定\n              ")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:e.close}},[e._v("取消")])],1)])],1)],1)],1)])])},staticRenderFns:[]};var g=i("VU/8")(h,u,!1,function(e){i("9RGQ")},"data-v-27dc23e8",null);t.a=g.exports},Z6w1:function(e,t){},ceSc:function(e,t){},giE4:function(e,t){},m6Cw:function(e,t){},nSyc:function(e,t,i){"use strict";var a=i("BO1k"),s=i.n(a),n={name:"processDialog",props:{closeShow:!1},data:function(){return{dialog:!0,orgID:"",isFirstSelcet:"",isSecondSelcet:"",isThirdSelcet:"",isFouthSelcet:"",isFifthSelect:"",isFifthSelcet:"",isSixSelcet:"",selectFouthData:"",checked:!1,processValue:"",defaultProps:{children:"m_ChildOrg",label:"orgName"},firstData:[],secondData:[],thirdData:[],fouthData:[],selectedData:{},isK2ProcessDisabled:!0,loading:!1}},mounted:function(){this.getDataList()},methods:{getDataList:function(){var e=this;this.$axios.post("/api/companytree/page",{}).then(function(t){200===t.status?(e.firstData=t.data.companyTreeList,e.secondData=e.firstData[0].m_ChildOrg):e.$message.error("请求失败！")}).catch(function(t){e.$message.error("连接服务器失败！"+t)})},checkSecond:function(e,t){this.isK2ProcessDisabled=!1,this.isSecondSelcet=e.orgName,this.thirdData=[],this.fouthData=[],this.isThirdSelcet="",this.isFouthSelcet="",this.isFifthSelect="",this.orgID=e.orgID;var i={orgId:e.orgID,isUse:1,name:"",isHide:this.checked?0:1,isDailog:1};this.getUrlList(i)},getUrlList:function(e){var t=this;this.thirdData=[],this.fouthData=[],this.isFifthSelcet="",this.isSixSelcet="";this.$axios.post("/api/processCategoryTree",e).then(function(e){200===e.status?(t.thirdData=t.toTree(t.processingData(e.data.result)),null==t.thirdData&&t.$message.success("数据为空"),t.checkThird(t.thirdData[0],0)):t.$message.error("请求失败！")}).catch(function(e){})},toTree:function(e){if(null==e||0==e.length)return[];e.forEach(function(e){delete e.Child});var t={};e.forEach(function(e){t[e.id]=e});var i=[];return e.forEach(function(e){var a=t[e.pid];a?(a.Child||(a.Child=[])).push(e):i.push(e)}),i},checkThird:function(e){this.isThirdSelcet=e.id,this.fouthData&&(this.fouthData=[],this.isFouthSelcet="",this.isFifthSelect=""),e.Child?this.fouthData=e.Child:this.selectedData=e},processingData:function(e){var t=e;for(var i in t){var a=t[i];if(t[i].processDescriptions=[{txt:"无提示信息!"}],a.processDescription&&null!=a.processDescription){var n;n=a.processDescription.split(";");var o=[],r=!0,l=!1,c=void 0;try{for(var d,h=s()(n);!(r=(d=h.next()).done);r=!0){var u=d.value;u=u.replace("&gt",">"),o.push({txt:u})}}catch(e){l=!0,c=e}finally{try{!r&&h.return&&h.return()}finally{if(l)throw c}}t[i].processDescriptions=o}}return t},checkFouth:function(e){e.childsProcessCategories||(this.selectedData=e)},checkFifth:function(e){e.childsProcessCategories||(this.isSixSelcet="",this.isFifthSelcet=e.id,this.selectedData=e)},checkSixth:function(e){this.isFifthSelcet="",this.isSixSelcet=e.id,e.childsProcessCategories||(this.selectedData=e)},sureSubmitData:function(){var e=this.selectedData.name,t=this.selectedData.id+"";e&&this.$emit("sureSubmit",{type:"process",text:e,processID:t,item:this.selectedData})},checkIsK2Process:function(){var e={orgId:this.orgID,isUse:1,isHide:this.checked?0:1,name:this.processValue,isDailog:1};this.getUrlList(e)},searchFlow:function(){var e={orgId:this.orgID,isUse:1,isHide:this.checked?0:1,name:this.processValue,isDailog:1};this.getUrlList(e)},searchScreenData:function(e,t){var i=[],a=[];if(t.forEach(function(t,i,s){-1!==t.name.indexOf(e)&&a.push(t)}),a==[])return null;var n=!0,o=!1,r=void 0;try{for(var l,c=s()(a);!(n=(l=c.next()).done);n=!0){var d=l.value;this.selectPrantData(d,t,i)}}catch(e){o=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw r}}return i},selectPrantData:function(e,t,i){var a=!0,n=!1,o=void 0;try{for(var r,l=s()(t);!(a=(r=l.next()).done);a=!0){var c=r.value;if(c.id==e.pid){void 0==c.Child&&(c.Child=[]),c.Child.push(e);var d=!0,h=!0,u=!1,g=void 0;try{for(var f,p=s()(i);!(h=(f=p.next()).done);h=!0){var v=f.value;d=c.id!=v.id}}catch(e){u=!0,g=e}finally{try{!h&&p.return&&p.return()}finally{if(u)throw g}}d&&i.push(c),this.selectPrantData(c,t,i)}}}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}},close:function(){this.$emit("hideComponent")}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"originater_dialog"},[i("div",{class:[e.closeShow?"pc-candidates":"pc-candidates pc-background"]},[i("div",{staticClass:"dialog_content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.closeShow,expression:"!closeShow"}],staticClass:"top"},[e._v("流程选择\n          "),i("span",{staticStyle:{"font-size":"30px",cursor:"pointer",float:"right","padding-right":"5px"},on:{click:e.close}},[e._v("×")])]),e._v(" "),i("div",{staticClass:"initProcess"},[i("el-container",[i("el-header",[i("div",{staticClass:"initProcess-header"},[i("el-checkbox",{staticClass:"initCheckbox",attrs:{disabled:e.isK2ProcessDisabled},on:{change:e.checkIsK2Process},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("显示允许直接从K2发起的流程")]),e._v(" "),i("div",{staticClass:"searchCom"},[i("el-input",{staticClass:"inputCom",attrs:{disabled:e.isK2ProcessDisabled,clearable:"",placeholder:"流程搜索",size:"mini"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.searchFlow(t):null}},model:{value:e.processValue,callback:function(t){e.processValue=t},expression:"processValue"}}),e._v(" "),i("el-button",{staticClass:"searchBtn",attrs:{disabled:e.isK2ProcessDisabled,type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.searchFlow}},[e._v("搜索")])],1)],1)]),e._v(" "),i("el-main",[i("div",{staticStyle:{"overflow-x":"hidden"}},[i("div",{staticClass:"originater-contain"},[i("ul",{staticClass:"secondList"},e._l(e.secondData,function(t){return i("li",{key:t.orgName,class:{isActive:e.isSecondSelcet===t.orgName},on:{click:function(i){e.checkSecond(t)}}},[i("i",{staticClass:"el-icon-tickets"}),e._v("\n                      "+e._s(t.orgName)+"\n                      ")])})),e._v(" "),i("ul",{staticClass:"thirdList"},e._l(e.thirdData,function(t){return i("li",{key:t.id,class:{isActive:e.isThirdSelcet===t.id},on:{click:function(i){i.stopPropagation(),e.checkThird(t)}}},[e._v(e._s(t.name))])})),e._v(" "),i("ul",{staticClass:"fouthList"},e._l(e.fouthData,function(t){return i("li",{key:t.id,staticClass:"fouthList-title",on:{click:function(i){i.stopPropagation(),e.checkFouth(t)}}},[null==t.processFullName?i("div",[i("span",{staticClass:"fouthList-title-first"},[e._v(e._s(t.name)+">")]),e._v(" "),i("div",{staticClass:"line"})]):i("div",[i("ul",{staticClass:"fifthList-contain"},[i("li",{staticClass:"fifthList",class:{isActive:e.isSixSelcet===t.id},on:{click:function(i){i.stopPropagation(),e.checkSixth(t)}}},[i("span",{attrs:{title:t.name}},[0==t.disabled?i("a",{attrs:{target:"_blank",href:e.linkhref}},[e._v(e._s(t.name))]):i("a",[e._v(e._s(t.name))])])])])]),e._v(" "),i("ul",e._l(t.Child,function(t){return i("li",{key:t.id,staticClass:"fouthListCon",class:[{fouthChild:t.Child},{isActive:e.isFifthSelcet===t.id}],on:{click:function(i){i.stopPropagation(),e.checkFifth(t)}}},[i("span",{attrs:{title:t.name}},[0==t.disabled?i("a",{attrs:{target:"_blank",href:e.linkhref}},[e._v(e._s(t.name))]):i("a",[e._v(e._s(t.name))])]),e._v(" "),i("ul",{staticClass:"fifthList-contain"},e._l(t.Child,function(t){return i("li",{key:t.id,staticClass:"fifthList",class:{isActive:e.isSixSelcet===t.id},on:{click:function(i){i.stopPropagation(),e.checkSixth(t)}}},[i("span",{attrs:{title:t.name}},[0==t.disabled?i("a",{attrs:{target:"_blank",href:e.linkhref}},[e._v(e._s(t.name))]):i("a",[e._v(e._s(t.name))])])])}))])}))])}))]),e._v(" "),i("div",{staticClass:"addrecently-footer"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.sureSubmitData}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:e.close}},[e._v("取消")])],1)])])],1)],1)])])])},staticRenderFns:[]};var r=i("VU/8")(n,o,!1,function(e){i("sT4b")},"data-v-41c75fe4",null);t.a=r.exports},oqwl:function(e,t){},qIgx:function(e,t){},qeuM:function(e,t){Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e}},raF1:function(e,t){},sT4b:function(e,t){},seMD:function(e,t){},"ts/9":function(e,t,i){"use strict";var a=i("BO1k"),s=i.n(a),n={name:"selectedPersonnel",props:{childDataUrl:{type:Object,required:!0},closeShow:!1,oneCheck:{type:Boolean,default:!0}},mounted:function(){this.childDataUrl.chooseProject&&this.childDataUrl.chooseProject.item&&this.childDataUrl.chooseProject.last&&(this.treeNode=this.childDataUrl.chooseProject.item,this.last=this.childDataUrl.chooseProject.last,this.checkedCitie.push(this.treeNode))},data:function(){return{organName:"",mianbao:[],value:"",options:[],bread:"",fullSearch:"",treeSearch:"",checkAll:!1,checkedCitie:[],cities:[],isIndeterminate:!1,organizationData:[],oldtime:0,defaultProps:{children:"m_ChildOrg",label:"orgName",isLeaf:function(e,t){return!(e&&e.isParent>0)}},last:{},treeNode:{},isActive:!1,tooltipOrganName:"",defaultKeys:[],isSeach:!1,treeQuery:!1}},watch:{treeSearch:function(e){var t=this;t.treeQuery=!0,t.queryName=e,this.loading=!0,this.isSeach||""==t.queryName.trim()||(this.isSeach=!0,setTimeout(function(){t.isSeach=!1,t.searchTree(t.queryName)},2e3))}},methods:{searchTree:function(e){var t=this,i=null;this.childDataUrl.isFirst&&(i=this.childDataUrl.isFirst),this.$axios.post("/api/"+this.childDataUrl.getTree,{orgName:e,isFirst:i}).then(function(e){t.organizationData=t.toTree(e.data.result)}).catch(function(e){t.$message.error("查询部门组织数据失败!ERROR MESSAGE:"+e)})},pullBtnHeightChange:function(){this.isActive=!this.isActive},disposeOrganName:function(e){for(var t="",i=0;i<e.length;i++){t+=e[i].text+">"}return t=t.substr(0,t.length-1),this.tooltipOrganName=t,t.length>30?this.bread=t.substr(0,30)+"...":this.bread=t,t},handleNodeClick:function(e,t){var i=(new Date).getTime();if(this.oldtime&&i-this.oldtime<200)return this.treeNode.orgFullName=t.data.orgFullName,this.treeNode.orgID=t.data.orgID,this.treeNode.orgName=t.data.orgName,this.treeNode.parentOrgID=t.data.parentOrgID,this.clickDepartment(this.treeNode),void this.$emit("sureSubmit",{type:"project",item:this.treeNode,last:this.last});if(this.oldtime=i,t.isLeaf){this.cities=[];var a={};a.isParent=e.isParent,a.orgFullName=e.orgFullName,a.orgID=e.orgID,a.orgName=e.orgName,a.parentOrgID=e.parentOrgID,this.cities.push(a)}else{this.cities=[];for(var s=0;t.childDatas&&s<t.childDatas.length;s++)this.cities.push(t.childDatas[s])}for(s=0;s<this.cities.length;s++){for(var n=!1,o=0;o<this.checkedCitie.length;o++)if(this.cities[s].orgID===this.checkedCitie[o].orgID){n=!0;break}this.cities[s].checked=!!n}this.mianbao=[],this.getPrarentNode(t),this.disposeOrganName(this.mianbao)},handleNodeload:function(e,t){var i=this;if(e.data&&0!=e.data.length)if(this.mianbao=[],e.data.m_ChildOrg&&e.data.m_ChildOrg.length>0){var a=[];e.childDatas=[];for(var s=0;s<e.data.m_ChildOrg.length;s++)a.push(e.data.m_ChildOrg[s]),e.childDatas.push(e.data.m_ChildOrg[s]);delete e.data.m_ChildOrg,t(a)}else this.$axios.post("/api/"+this.childDataUrl.getTree,{orgDepId:e.data.orgID}).then(function(a){if(200===a.status){e.childDatas=[],i.cities=[];for(var s=0;s<a.data.result.length;s++)e.childDatas.push(a.data.result[s]),i.cities.push(a.data.result[s]);t(a.data.result)}else i.$message.error("请求失败！")}).catch(function(e){that.$message.error("查询数据失败!ERROR MESSAGE:"+e)});else this.getTree(t)},getTree:function(e){var t=this,i=null;this.childDataUrl.isFirst&&(i=this.childDataUrl.isFirst),this.$axios.post("/api/"+this.childDataUrl.getTree,{orgDepId:"A5A40ECE-0DBD-4F2B-89E8-6BA91B91EBF4",isFirst:i}).then(function(i){200===i.status?(t.organizationData=t.toTree(i.data.result),e&&(e(t.organizationData),t.defaultKeys[0]=t.organizationData[0].orgID)):t.$message.error("请求失败！")}).catch(function(e){t.$message.error("查询部门组织数据失败!ERROR MESSAGE:"+e)})},sureSubmit:function(){this.checkedCitie&&0!==this.checkedCitie.length?this.oneCheck?this.$emit("sureSubmit",{type:"project",item:this.treeNode,last:this.last}):this.$emit("sureSubmit",{type:"project",items:this.checkedCitie}):this.$message.warning("请选择数据!")},close:function(){this.$emit("hideComponent")},searchProject:function(){},toTree:function(e){if(null==e||0==e.length)return[];e.forEach(function(e){delete e.m_ChildOrg});var t={};e.forEach(function(e){t[e.orgID]=e});var i=[];return e.forEach(function(e){var a=t[e.parentOrgID];a?(a.m_ChildOrg||(a.m_ChildOrg=[])).push(e):i.push(e)}),i},checkChangeNode:function(e,t,i){},handleCheckAllChange:function(e){if(e){for(var t=0;t<this.cities.length;t++){for(var i=!1,a=0;a<this.checkedCitie.length;a++)this.checkedCitie[a].orgID===this.cities[t].orgID&&(i=!0);i||this.checkedCitie.push(this.cities[t])}this.isIndeterminate=!0}else{for(t=0;t<this.cities.length;t++){for(i=!1,a=0;a<this.checkedCitie.length;a++)if(this.checkedCitie[a].orgID===this.cities[t].orgID){i=!0;break}i&&this.checkedCitie.splice(a,1)}this.isIndeterminate=!1}},handleCheckedCitiesChange:function(e){this.checkedCitie=e;var t=e.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length},clickDepartment:function(e){var t=this;this.checkedCitie.splice(0,this.checkedCitie.length),this.checkedCitie.push(e);var i=this.$refs.tree2.getNode(e.orgID);this.mianbao=[],this.getPrarentNode(i),t.organName="";var a=!0,n=!1,o=void 0;try{for(var r,l=s()(t.mianbao);!(a=(r=l.next()).done);a=!0){var c=r.value;t.organName+=c.text+">"}}catch(e){n=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw o}}t.organName+=""+e.orgName,t.treeNode=e,t.last.lastNode="",t.last.lastId="",t.mianbao.forEach(function(e){t.last.lastNode+=e.text+"-",t.last.lastId=e.petId}),t.last.lastNode=t.last.lastNode.substr(0,t.last.lastNode.length-1)},dblclickCheckedCitie:function(e){this.clickDepartment(e),this.$emit("sureSubmit",{type:"project",item:e,last:this.last})},deleteProject:function(e,t){this.checkedCitie.splice(t,1)},clearProject:function(){this.checkedCitie.splice(0,this.checkedCitie.length),this.checkAll=!1,this.isIndeterminate=!1},getPrarentNode:function(e){void 0!=e.data.orgName&&this.mianbao.unshift({text:""+e.data.orgName,petId:""+e.data.orgID}),void 0!=e.parent&&this.getPrarentNode(e.parent)},getChild:function(e){void 0!==e.childNodes&&0!==e.childNodes.length||(this.last={lastNode:e.data.orgName,lastId:e.data.orgID})}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"originater_dialog project_dialog"},[i("div",{class:[e.closeShow?"pc-candidates":"pc-candidates pc-background"]},[i("div",{staticClass:"dialog_content"},[i("el-main",{staticStyle:{position:"relative"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.closeShow,expression:"!closeShow"}],staticClass:"top"},[e._v("组织选择"),i("span",{staticStyle:{"font-size":"30px",cursor:"pointer",float:"right","padding-right":"5px"},on:{click:e.close}},[e._v("×")])]),e._v(" "),i("el-tabs",{attrs:{type:"card"}},[i("el-tab-pane",{staticClass:"candidates-recently"},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont icon-todos"}),e._v(" 组织")]),e._v(" "),i("div",{staticClass:"title  title-border"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[e._v("组织架构")]),e._v(" "),i("el-breadcrumb-item",{attrs:{title:e.tooltipOrganName}},[e._v(e._s(e.bread))])],1),e._v(" "),i("span",{staticClass:"rightInput"},[i("el-input",{attrs:{placeholder:"请输入部门关键字","prefix-icon":"el-icon-search",size:"mini"},model:{value:e.treeSearch,callback:function(t){e.treeSearch=t},expression:"treeSearch"}})],1)],1),e._v(" "),i("div",{staticClass:"content clearfix"},[i("div",{staticClass:"content-left"},[i("el-tree",{ref:"tree2",attrs:{data:e.organizationData,"node-key":"orgID","highlight-current":!0,props:e.defaultProps,"default-expanded-keys":e.defaultKeys,"default-checked-keys":e.defaultKeys,load:e.handleNodeload,lazy:""},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),i("div",{staticClass:"content-right"},[e.oneCheck?e._e():i("el-checkbox",{staticStyle:{"padding-top":"6px"},attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选\n                ")]),e._v(" "),e.oneCheck?i("el-checkbox-group",{staticClass:"theRadio",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCitie,callback:function(t){e.checkedCitie=t},expression:"checkedCitie"}},e._l(e.cities,function(t){return i("el-checkbox-button",{key:t.orgID,attrs:{label:t}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body",on:{click:function(i){e.clickDepartment(t)},dblclick:function(i){e.dblclickCheckedCitie(t)}}},[i("h4",{staticClass:"media-heading iconfont icon-company"},[e._v(e._s(t.orgName))])])])])})):i("el-checkbox-group",{staticClass:"mut-check",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCitie,callback:function(t){e.checkedCitie=t},expression:"checkedCitie"}},e._l(e.cities,function(t,a){return i("el-checkbox",{key:a,attrs:{label:t,checked:t.checked}},[i("div",{staticClass:"media"},[i("div",{staticClass:"media-body mut-media-body"},[i("h4",{staticClass:"media-heading iconfont icon-company"},[e._v(e._s(t.orgName))])])])])}))],1)]),e._v(" "),i("div",{staticClass:"addrecently",class:{pullup:e.isActive}},[i("div",{staticClass:"media"},[i("div",{staticClass:"pull",on:{click:e.pullBtnHeightChange}}),e._v(" "),i("ul",{staticClass:"clearfix"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.checkedCitie.length>0,expression:"checkedCitie.length>0"}],staticClass:"clearBtn",on:{click:e.clearProject}}),e._v(" "),e._l(e.checkedCitie,function(t,a){return i("li",{key:t.orgID},[i("div",{staticClass:"media-body"},[i("i",{staticClass:"el-icon-circle-close",on:{click:function(i){e.deleteProject(t,a)}}}),e._v(" "),i("span",{staticClass:"media-heading"},[e._v(e._s(t.orgName))])])])})],2)])]),e._v(" "),i("div",{staticClass:"addrecently-footer"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.sureSubmit}},[e._v("确定")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:e.close}},[e._v("取消")])],1)])],1)],1)],1)])])},staticRenderFns:[]};var r=i("VU/8")(n,o,!1,function(e){i("VTy0")},"data-v-c47236be",null);t.a=r.exports}});
//# sourceMappingURL=0.a48f7157d8eb1651ad3a.js.map