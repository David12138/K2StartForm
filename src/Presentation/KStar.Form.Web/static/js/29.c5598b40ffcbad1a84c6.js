webpackJsonp([29],{biDF:function(t,s){},oPyd:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o=e("BO1k"),a=e.n(o),i=e("Xg7m"),n=e("J9uR"),r=e("Lxn6"),c=e("+vjY"),l=e("T//Y"),p={name:"staticReports",mounted:function(){},components:{processClassification:i.a,processSelection:n.a,page:l.a},data:function(){return{fullHeight:document.documentElement.clientHeight,model:{selectForm:{},companys:""},componentParam:{componentType:{type:String,required:!0},backfillData:{type:Array,required:!0},oneCheck:{type:Boolean,required:!0},closeShow:{type:Boolean,required:!0}},processName:"",processIDs:"",processList:[],processCategoryName:"",processCategoryIDs:"",processCategoryList:[],isShow:!0,arrt:"收起",icon:"el-icon-arrow-up",selectValue:"",OrgId:"",tableData:[],isShowtwo:!0,arrtTwo:"收起",iconTwo:"el-icon-arrow-up",showdialog:!1,showList:!1,id:"",imgLoading:!1}},methods:{search:function(){this.getList()},getList:function(){var t=this;if(0!==this.processIDs.length||0!==this.processCategoryIDs.length){this.imgLoading=!0;var s={processIDs:this.processIDs,processCategoryIDs:this.processCategoryIDs,orderBy:""};this.$axios.post("/api/GetProcessesReport/page",s).then(function(s){t.tableData=s.data.processesReportList,t.imgLoading=!1}).catch(function(s){t.imgLoading=!1,t.$message.error("查询列表数据失败!ERROR MESSAGE:"+s)})}else this.$message.warning("请选择流程分类或流程选择进行查询！")},showToggle:function(){this.isShow=!this.isShow,this.isShow?(this.arrt="收起",this.icon="el-icon-arrow-up"):(this.arrt="展开",this.icon="el-icon-arrow-down")},showToggleTwo:function(){this.isShowtwo=!this.isShowtwo,this.isShowtwo?(this.arrtTwo="收起",this.iconTwo="el-icon-arrow-up"):(this.arrtTwo="展开",this.iconTwo="el-icon-arrow-down")},exportList:function(){var t=this;c.a.startLoading({lock:!0,text:"数据量过大，正在拼命加载中...",background:"rgba(255, 255, 255, 0.9)",target:document.querySelector(".loadingtext")});var s={processIDs:this.processIDs,processCategoryIDs:this.processCategoryIDs,orderBy:""};this.$axios.post("/api/exportExcelForTable",{tableName:"静态-统计有效流程模板数量",params:s},{responseType:"blob"}).then(function(t){c.a.endLoading();var s=t.data;r.a.exportSearchList("静态-统计有效流程模板数量",s)}).catch(function(s){c.a.endLoading(),t.$message.error("导出失败!ERROR MESSAGE:"+s)})},openDailog:function(t){this.componentParam.closeShow=!1,this.componentParam.componentType=t,this.componentParam.oneCheck=!1,"processClassification"==t?this.componentParam.backfillData=this.processCategoryList:"processSelection"==t&&(this.componentParam.backfillData=this.processList),this.showdialog=!0,r.a.showDailog_mask()},hideComponent:function(){this.showdialog=!1,r.a.hiddenDailog_mask()},showMsgfromchild:function(t){if(t.type&&"processClassification"==t.type){this.processCategoryList=t.list;var s=[],e=[],o=!0,i=!1,n=void 0;try{for(var r,c=a()(t.list);!(o=(r=c.next()).done);o=!0){var l=r.value;e.push(l.name),s.push(l.id+"")}}catch(t){i=!0,n=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw n}}this.processCategoryIDs=s.join(","),this.processCategoryName=e.join("；")}else if(t.type&&"processSelection"==t.type){this.processList=t.list;var p=[],h=[],m=!0,d=!1,u=void 0;try{for(var g,v=a()(t.list);!(m=(g=v.next()).done);m=!0){var w=g.value;h.push(w.name),p.push(w.processId+"")}}catch(t){d=!0,u=t}finally{try{!m&&v.return&&v.return()}finally{if(d)throw u}}this.processIDs=p.join(","),this.processName=h.join("；")}this.hideComponent()},reset:function(){var t=this;this.componentParam.backfillData=new Array,this.processList=new Array,this.processCategoryList=new Array,this.$nextTick(function(){t.model.companys="",t.id="",t.processName="",t.processIDs="",t.processCategoryName="",t.processCategoryIDs=""})}},computed:{},watch:{fullHeight:function(){return document.documentElement.clientHeight}}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"staticReports"},[e("el-container",[e("el-header",{staticClass:"minWidth"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.imgLoading,expression:"imgLoading"}],staticClass:"staticReports minWidth loadingtext",attrs:{"element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[e("el-row",{staticClass:"staticReports-header"},[e("el-col",{attrs:{span:17}},[e("span",{staticClass:"mz",on:{click:function(s){t.$router.back(-1)}}},[t._v("流程报表")]),t._v(" "),e("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),e("el-col",{staticClass:"statisticsMiddle",attrs:{span:7}},[e("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:t.search}},[t._v("搜索")]),t._v(" "),e("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:t.reset}},[t._v("重置")])],1)],1),t._v(" "),e("div",{staticClass:"taticReports-content"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"statement"},[e("el-row",[e("span",{staticClass:"fz16"},[t._v("静态-统计有效流程/模板数量")])]),t._v(" "),e("el-row",{staticClass:"staticReports-middle"},[e("el-col",{staticClass:"classification-select",attrs:{sm:3,md:1}},[e("span",[t._v("流程分类选择")])]),t._v(" "),e("el-col",{staticClass:"inputsuhu",attrs:{span:6}},[e("span",{on:{dblclick:function(s){t.openDailog("processClassification")}}},[e("i",{staticClass:"iconfont icon-organization pl5",on:{click:function(s){t.openDailog("processClassification")}}}),t._v(" "),e("el-input",{staticClass:"input-text",attrs:{disabled:"",title:t.processCategoryName},model:{value:t.processCategoryName,callback:function(s){t.processCategoryName=s},expression:"processCategoryName"}})],1)]),t._v(" "),e("el-col",{staticClass:"process-select",attrs:{sm:2,md:1,span:4}},[e("span",[t._v("流程选择")])]),t._v(" "),e("el-col",{staticClass:"inputsuhu",attrs:{span:6}},[e("span",{on:{dblclick:function(s){t.openDailog("processSelection")}}},[e("i",{staticClass:"iconfont icon-organization pl5",on:{click:function(s){t.openDailog("processSelection")}}}),t._v(" "),e("el-input",{staticClass:"input-text",attrs:{disabled:"",title:t.processName},model:{value:t.processName,callback:function(s){t.processName=s},expression:"processName"}})],1)])],1),t._v(" "),e("el-row",[e("el-col",{staticClass:"buttonWrap",attrs:{span:4}},[e("el-button",{staticClass:"upload",attrs:{round:"",type:"primary",icon:"iconfont icon-export",size:"mini"},on:{click:t.exportList}},[t._v("导出\n                  ")])],1)],1)],1)]),t._v(" "),e("div",{staticClass:"taticReports-content"},[e("div",{staticClass:"statement"},[e("el-table",{ref:"singleTable",staticClass:"table",attrs:{data:t.tableData,"highlight-current-row":"",border:"",height:t.isShow?t.fullHeight-305:t.fullHeight-285}},[e("el-table-column",{attrs:{prop:"company",label:"公司",width:"450"}}),t._v(" "),e("el-table-column",{attrs:{prop:"processCnt",label:"流程数量"}}),t._v(" "),e("el-table-column",{attrs:{prop:"templateCnt",label:"模板总数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"templateAvg",label:"流程平均模板数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"stepAvg",label:"模板平均步骤数"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.imgLoading,expression:"!imgLoading"}],attrs:{slot:"empty"},slot:"empty"},[e("p",{style:{marginTop:"23px"}},[t._v("暂无数据")])])],1)],1)])],1),t._v(" "),t.showdialog?e(t.componentParam.componentType,{tag:"component",attrs:{componentParam:t.componentParam},on:{hideComponent:t.hideComponent,sureSubmit:t.showMsgfromchild}}):t._e()],1)],1)],1)},staticRenderFns:[]};var m=e("VU/8")(p,h,!1,function(t){e("biDF")},"data-v-1b492dd7",null);s.default=m.exports}});
//# sourceMappingURL=29.c5598b40ffcbad1a84c6.js.map