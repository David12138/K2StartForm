webpackJsonp([35],{DlpJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),o=a.n(s),i=a("Gu7T"),l=a.n(i),r=a("pFYg"),n=a.n(r),c=a("BO1k"),d=a.n(c),m=a("mvHQ"),h=a.n(m),p=a("NYxO"),u=(a("qeuM"),a("Lxn6")),f=a("PJh5"),g=a.n(f),v=(a("+vjY"),a("T//Y")),y=a("/xpi"),b=a("Vi29"),D={name:"checkProcess",components:{page:v.a,Choosen:y.default},data:function(){var e=this;return{originatorLoading:!1,pickerOptionsBefore:{disabledDate:function(t){var a=e.model.startDate[1];if(a)return g()(t).format("YYYY-MM-DD")>a}},pickerOptionsAfter:{disabledDate:function(t){var a=e.model.startDate[0];if(a)return g()(t).format("YYYY-MM-DD")<a}},delegationpickerOptionsBefore:{disabledDate:function(t){var a=e.model.delegation[1];if(a)return g()(t).format("YYYY-MM-DD")>a}},delegationpickerOptionsAfter:{disabledDate:function(t){var a=e.model.delegation[0];if(a)return g()(t).format("YYYY-MM-DD")<a}},finshDatepickerOptionsBefore:{disabledDate:function(t){var a=e.model.finshDate[1];if(a)return g()(t).format("YYYY-MM-DD")>a}},finshDatepickerOptionsAfter:{disabledDate:function(t){var a=e.model.finshDate[0];if(a)return g()(t).format("YYYY-MM-DD")<a}},model:{selectForm1:{searchWord:"",status:"",originator:"",amountOfMoneyB:"",amountOfMoneyE:"",startDate:"",finishDate:"",processFullName:"",companyCode:"",departmentID:"",projectId:"",approveStatus:"",orderBy:"startDate desc",curUser:""},selectForm2:{searchWord:"",status:"",originator:"",amountOfMoneyB:"",amountOfMoneyE:"",startDate:"",finishDate:"",processFullName:"",companyCode:"",departmentID:"",projectId:"",approveStatus:"",orderBy:"startDate desc",curUser:""},startDate:[],delegation:[],finshDate:[]},showdialog:!1,showList:!0,rules:{},tableData:[],serachSlectData:{tagsOwnProcess:[],tagsOwnCategory:[],tagsOrgSelect:[],CurrentUser:[],tagsOwnsUser:[]},selectOptions:[],list:[],loading:!1,pageSizesList:[10,20],pageShow:!1,rowData:{},total:0,showNone:!1,showMess:!1,showremove:!1,overremove:!1,Visible:!1,imgLoading:!1,processFormName:"",dataTitle:"",CriteriaModel:{page:1,limit:10,sType:"1",fromUser:"",toUser:"",processName:"",startTime:"",endTime:"",status:0},status:0,tagsOwnsUser:[],ProcessType:"",typeTab:"User",portalmMtilselectCheck:"false",echoData:[],switchText:"",isValid:!1,addComment:"",readonly:!1,toUser:"",editFromUser:"",proxyTitle:"",clickRow:{flag:"",id:""}}},mounted:function(){var e=this;u.a.burialPoint("流程查询-进入查询流程页面"),e.$nextTick(function(){e.getEmpower(),e.getlist()})},methods:{hideDate:function(e){u.a.burialPoint("查询流程-输入条件-发起时段"),setTimeout(function(){var t=void 0,a=void 0,s=null,o=null;document.getElementsByClassName("el-picker-panel")[0]&&(s=!0),document.getElementsByClassName("el-picker-panel")[1]&&(o=!0),t=s?document.getElementsByClassName("el-picker-panel")[0]:"",a=o?document.getElementsByClassName("el-picker-panel")[1]:"",e.$el.firstElementChild==document.activeElement?(s&&(t.style.display="none"),o&&(a.style.display="none")):(s&&(t.style.display="block"),o&&(a.style.display="block"))},10)},emptyselect:function(){this.childDataUrl={},this.examineUser=[],this.model.managerName=[]},sortChange:function(e){u.a.burialPoint("查询流程-列表-"+e.column.label+"排序");var t="statusName"==e.prop?"dodoType":e.prop;this.model.selectForm.orderBy=t+" "+e.order.replace("ending",""),this.pageIndex=1,this.getlist()},renderIcon:function(e,t){t.column;return e("i",{class:"iconfont icon-process"})},checkValidate:function(e,t){t=parseFloat(t);"front"==e?""!=this.model.selectForm.amountOfMoneyE&&t>parseFloat(this.model.selectForm.amountOfMoneyE)&&(this.model.selectForm.amountOfMoneyB=""):"back"==e&&""!=this.model.selectForm.amountOfMoneyB&&t<parseFloat(this.model.selectForm.amountOfMoneyB)&&(this.model.selectForm.amountOfMoneyE="")},inputValidate:function(e,t){var a=this,s=/^([0-9]*)([.]?|(\.\d{1,2})?)$/;"front"==e?s.test(t)||setTimeout(function(){a.model.selectForm.amountOfMoneyB=""},100):"back"==e&&(s.test(t)||setTimeout(function(){a.model.selectForm.amountOfMoneyE=""},100))},refresh:function(){this.model.delegation=[],this.model.finshDate=[],this.toUser="",this.status=0,this.CriteriaModel.processName="",this.serachSlectData.tagsOwnsUser=[],this.serachSlectData.tagsOwnProcess=[]},validationInputed:function(e){if(this.orgStatesed=[],e==[]||0==e.length)return this.loading=!1,null;e==this.$refs.userIds.query?this.getUsers(e,"examine"):this.orgStatesed=[]},search:function(){u.a.burialPoint("查询流程-输入条件-搜索按钮"),this.pageIndex=1,this.getlist()},correctremovedel:function(){var e=this,t=[],a="",s="",o="",i="";if(this.CriteriaModel.fromUser=localStorage.getItem("username"),this.serachSlectData.tagsOwnsUser[0])if(a=this.serachSlectData.tagsOwnsUser[0].UserDisplayName,this.serachSlectData.tagsOwnsUser[0]&&(s=this.serachSlectData.tagsOwnsUser[0].UserAccount),this.model.startDate[0])if(o=g()(this.model.startDate[0]).format("YYYY-MM-DD HH:mm:ss"),this.model.startDate[1])if(i=g()(this.model.startDate[1]).format("YYYY-MM-DD HH:mm:ss"),this.serachSlectData.tagsOwnProcess.length>0){var l=!0,r=!1,n=void 0;try{for(var c,m=d()(this.serachSlectData.tagsOwnProcess);!(l=(c=m.next()).done);l=!0){var p=c.value;t.push({CategoryId:p.CategoryId,CategoryName:p.CategoryName,ProcessCode:p.ProcessCode,ProcessName:p.ProcessName})}}catch(e){r=!0,n=e}finally{try{!l&&m.return&&m.return()}finally{if(r)throw n}}if(t=h()(t),"edit"===this.clickRow.flag){var u={Id:this.clickRow.id,sType:this.CriteriaModel.sType,fromUserName:this.CriteriaModel.fromUser,fromUserAccount:localStorage.getItem("UserAccount"),toUserName:a,toUserAccount:s,isEnabled:this.isValid,start:o,end:i,processList:t,txtNote:this.addComment};this.$axios({url:b.baseUrl.Base_Delegation_URL+"/UpdateProcessDelegation",method:"post",data:u}).then(function(t){0===t.data.code&&(e.getlist(),e.showremove=!1)}).catch(function(t){e.$message.error(""+t.message)})}else{var f={sType:this.CriteriaModel.sType,fromUserName:this.CriteriaModel.fromUser,fromUserAccount:localStorage.getItem("UserAccount"),toUserName:a,toUserAccount:s,isEnabled:this.isValid,start:o,end:i,processList:t,txtNote:this.addComment};this.$axios({url:b.baseUrl.Base_Delegation_URL+"/AddProcessDelegation",method:"post",data:f}).then(function(t){0===t.data.code&&(e.getlist(),e.showremove=!1)}).catch(function(t){e.$message.error(""+t.message)})}}else this.$message.warning("请选择流程");else this.$message.warning("请选择结束时间");else this.$message.warning("请选择开始时间");else this.$message.warning("请选择代理人")},cancelremovedel:function(){this.showremove=!1},getlist:function(){var e=this,t=this;switch(t.status){case 0:t.CriteriaModel.status="All";break;case 1:t.CriteriaModel.status="true";break;case 2:t.CriteriaModel.status="false"}if(0===t.model.delegation.length)t.CriteriaModel.startTime="";else{var a=[];t.model.delegation[0]=g()(t.model.delegation[0]).format("YYYY-MM-DD HH:mm"),t.model.delegation[1]=g()(t.model.delegation[1]).format("YYYY-MM-DD HH:mm"),a.push(t.model.delegation[0],t.model.delegation[1]),t.CriteriaModel.startTime=a.join("-")}if(0===t.model.finshDate.length)t.CriteriaModel.endTime="";else{var s=[];t.model.finshDate[0]=g()(t.model.finshDate[0]).format("YYYY-MM-DD HH:mm"),t.model.finshDate[1]=g()(t.model.finshDate[1]).format("YYYY-MM-DD HH:mm"),s.push(t.model.finshDate[0],t.model.finshDate[1]),t.CriteriaModel.endTime=s.join("-")}t.CriteriaModel.toUser=t.toUser,t.imgLoading=!0,t.$axios({url:b.baseUrl.Base_Delegation_URL+"/GetProcessDelegation",data:t.CriteriaModel,method:"post"}).then(function(e){if(200===e.status){t.tableData=e.data.data,t.total=e.data.count;var a=!0,s=!1,o=void 0;try{for(var i,l=d()(t.tableData);!(a=(i=l.next()).done);a=!0){var r=i.value;r.EndDate=r.EndDate?g()(r.EndDate).format("YYYY-MM-DD HH:mm"):""}}catch(e){s=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw o}}}else t.$message.error("请求失败！");t.imgLoading=!1}).catch(function(a){e.imgLoading=!1,t.$message.error("查询列表数据失败!ERROR MESSAGE:"+a)})},delegationAdd:function(){this.proxyTitle="新增流程代理",this.readonly=!1,this.addComment="",this.isValid=!1,this.echoData=[],this.serachSlectData.tagsOwnProcess=[],this.serachSlectData.tagsOwnsUser=[],this.model.startDate=[],this.model.finshDate=[],this.showremove=!0},changeSwitch:function(e){var t=this,a={Id:e.Id,Status:e.IsEnable};t.$axios({url:b.baseUrl.Base_Delegation_URL+"/SetDelegationStatus",data:a,method:"post"}).then(function(e){200===e.status&&t.$message.success("设置成功")}).catch(function(e){t.$message.error("查询列表数据失败!ERROR MESSAGE:"+e.message)}),t.getlist()},handleClickView:function(e){this.getlistItemById(e.Id),this.proxyTitle="查看流程代理",this.showremove=!0,this.readonly=!0,this.editFromUser=e.ToUserName,this.model.startDate[0]=g()(e.StartDate).format("YYYY-MM-DD HH:mm"),this.model.startDate[1]=e.EndDate,this.isValid=e.IsEnable,this.addComment=e.Note},handleDel:function(e){var t=this.serachSlectData.tagsOwnProcess.indexOf(e);this.serachSlectData.tagsOwnProcess.splice(t,1)},handleClickEdit:function(e){this.clickRow.flag="edit",this.clickRow.id=e.Id,this.getlistItemById(e.Id),this.proxyTitle="编辑流程代理",this.showremove=!0,this.readonly=!1,0===this.serachSlectData.tagsOwnsUser.length&&this.serachSlectData.tagsOwnsUser.push({UserDisplayName:e.ToUserName,type:"User"}),this.model.startDate[0]=g()(e.StartDate).format("YYYY-MM-DD HH:mm"),this.model.startDate[1]=e.EndDate,this.isValid=e.IsEnable,this.addComment=e.Note},handleSizeChange:function(e){u.a.burialPoint("查询流程-列表-每页显示条数按钮"),this.pageShow=!0;var t=""+e;this.CriteriaModel.PageIndex=1,this.CriteriaModel.limit=parseInt(t),localStorage.checkPageSize=e,this.getlist()},handleCurrentChange:function(e){u.a.burialPoint("查询流程-列表-页码按钮"),this.CriteriaModel.page=e,this.getlist(),this.pageShow=!0},tableHeaderClassName:function(e){e.row,e.rowIndex;return"table-head-th"},choosenDialogType:function(e,t){that.typeTab=e,that.ProcessType=t,that.$nextTick(function(){that.$refs.dialogChoosen.openChoosen(that.typeTab,t)})},OpenDialog:function(e){this.Visible=e},CloseDialog:function(e){this.Visible=e},sendTag:function(e,t){if(e.length>0)if(t){var a=!0,s=!1,o=void 0;try{for(var i,l=d()(e);!(a=(i=l.next()).done);a=!0){var r=i.value;if("User"===t)-1===this.getSysId(this.serachSlectData.tagsOwnsUser).indexOf(r.SysId)&&this.serachSlectData.tagsOwnsUser.push(r);if("Process"===t)-1===this.getID(this.serachSlectData.tagsOwnProcess).indexOf(r.id)&&this.serachSlectData.tagsOwnProcess.push(r)}}catch(e){s=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw o}}}else{var n=!0,c=!1,m=void 0;try{for(var h,p=d()(e);!(n=(h=p.next()).done);n=!0){var u=h.value;if("User"===u.type)-1===this.getSysId(this.serachSlectData.tagsOwnsUser).indexOf(u.SysId)&&this.serachSlectData.tagsOwnsUser.push(u)}}catch(e){c=!0,m=e}finally{try{!n&&p.return&&p.return()}finally{if(c)throw m}}}else switch(t){case"Process":this.serachSlectData.tagsOwnProcess=[];break;case"User":this.serachSlectData.tagsOwnsUser=[];break;case"CurrentUser":this.serachSlectData.CurrentUser=[]}},closeProcessTag:function(e){if(e.portalType){if("CurrentUser"===e.portalType){var t=this.serachSlectData.CurrentUser.indexOf(e);this.serachSlectData.CurrentUser.splice(t,1),this.$refs.dialogChoosen.portalehco(this.serachSlectData.CurrentUser,null)}}else switch(e.type){case"Process":var a=this.serachSlectData.tagsOwnProcess.indexOf(e);this.serachSlectData.tagsOwnProcess.splice(a,1),this.$refs.dialogChoosen.portalehco(this.serachSlectData.tagsOwnProcess);break;case"User":this.serachSlectData.tagsOwnsUser=[],this.$refs.dialogChoosen.portalehco(this.serachSlectData.tagsOwnsUser,null)}},folioBlank:function(e){window.open(e.Url,"_blank")},getEmpower:function(){var e=this;localStorage.getItem("username")?e.CriteriaModel.fromUser=localStorage.getItem("username"):e.$axios({url:"Home/GetCurrentUser",methods:"get"}).then(function(t){e.CriteriaModel.fromUser=t.data.data,t.data.data||(e.CriteriaModel.fromUser="Admin")}).catch(function(t){e.$message.error("获取用户信息数据失败!ERROR MESSAGE:"+t.message)})},handleClick:function(e,t){this.getlist()},getID:function(e){var t=[];if(e){var a=!0,s=!1,o=void 0;try{for(var i,l=d()(e);!(a=(i=l.next()).done);a=!0){var r=i.value.id;r&&t.push(r)}}catch(e){s=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw o}}}return t},getSysId:function(e){var t=[];if(e){var a=!0,s=!1,o=void 0;try{for(var i,l=d()(e);!(a=(i=l.next()).done);a=!0){var r=i.value.SysId;r&&t.push(r)}}catch(e){s=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw o}}}return t},getlistItemById:function(e){var t=this,a={page:1,limit:5,id:e};this.$axios({url:b.baseUrl.Base_Delegation_URL+"/GetDelegationProcessList",method:"post",data:a}).then(function(e){200===e.status&&(t.serachSlectData.tagsOwnProcess=e.data.data)}).catch(function(e){})}},watch:{"model.userName":{handler:function(e,t){var a=this.$refs.userId;u.a.inputHeight(e,a),this.dataTitle="";for(var s=0;s<e.length;s++)"object"==n()(e[s])?this.dataTitle+=e[s].value+",":"string"==typeof e[s]&&(this.dataTitle+=e[s]+",");this.dataTitle=this.dataTitle.substr(0,this.dataTitle.length-1)},deep:!0},"model.date":{handler:function(e,t){var a=this;this.startDate=!1,this.$nextTick(function(){a.startDate=!0}),this.endDate=!1,this.$nextTick(function(){a.endDate=!0})},deep:!0},Visible:{handler:function(e,t){if(e){switch(this.typeTab){case"User":this.echoData=[].concat(l()(this.serachSlectData.tagsOwnsUser));break;case"Org":this.echoData=[].concat(l()(this.serachSlectData.tagsOrgSelect))}switch(this.ProcessType){case"Process":this.echoData=[].concat(l()(this.serachSlectData.tagsOwnProcess));break;case"Category":this.echoData=[].concat(l()(this.serachSlectData.tagsOwnCategory));break;case"CurrentUser":this.echoData=[].concat(l()(this.serachSlectData.CurrentUser));break;case"ToWrite":this.echoData=[].concat(l()(this.serachSlectData.ToWriteData))}}}}},computed:o()({bodyHeight:function(){return document.documentElement.clientHeight}},Object(p.b)(["isIE","isSafari","bodyHeight"]))},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"proxyProcess"},[a("p",{staticClass:"top-breadCrumb"},[e._v("流程代理")]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.CriteriaModel.sType,callback:function(t){e.$set(e.CriteriaModel,"sType",t)},expression:"CriteriaModel.sType"}},[a("el-tab-pane",{attrs:{label:"发起流程代理",name:"1"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],staticClass:"todoProcess loadingtext",style:{height:e.bodyHeight-50+"px"},attrs:{"element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[a("el-container",[a("el-header",{staticStyle:{height:"150px"}},[a("div",{staticClass:"top-header"},[a("div",{staticClass:"todoProcess-screenList screenList-box",class:{screenList_box_ie:e.isIE}},[a("el-form",{ref:"search1",staticClass:"todoForm",attrs:{model:e.model.selectForm1,inline:!0,"label-width":"110px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发起时段"}},[a("div",{staticClass:"money-box"},[a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.delegationpickerOptionsBefore,placeholder:"选择日期"},model:{value:e.model.delegation[0],callback:function(t){e.$set(e.model.delegation,0,t)},expression:"model.delegation[0]"}})],1),e._v(" "),a("el-form-item",[e._v("~")]),e._v(" "),a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",staticStyle:{float:"right"},attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.delegationpickerOptionsAfter,placeholder:"选择日期"},model:{value:e.model.delegation[1],callback:function(t){e.$set(e.model.delegation,1,t)},expression:"model.delegation[1]"}})],1)],1)])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"代理人"}},[a("el-input",{staticClass:"microcheiria ",attrs:{size:"mini"},model:{value:e.toUser,callback:function(t){e.toUser=t},expression:"toUser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"授权人"}},[a("el-input",{staticClass:"microcheiria",attrs:{readonly:"readonly",size:"mini"},model:{value:e.CriteriaModel.fromUser,callback:function(t){e.$set(e.CriteriaModel,"fromUser",t)},expression:"CriteriaModel.fromUser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}})],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("div",{staticClass:"money-box"},[a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.finshDatepickerOptionsBefore,placeholder:"选择日期"},model:{value:e.model.finshDate[0],callback:function(t){e.$set(e.model.finshDate,0,t)},expression:"model.finshDate[0]"}})],1),e._v(" "),a("el-form-item",[e._v("~")]),e._v(" "),a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",staticStyle:{float:"right"},attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.finshDatepickerOptionsAfter,placeholder:"选择日期"},model:{value:e.model.finshDate[1],callback:function(t){e.$set(e.model.finshDate,1,t)},expression:"model.finshDate[1]"}})],1)],1)])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"流程名称"}},[a("el-input",{staticClass:"microcheiria",attrs:{size:"mini"},model:{value:e.CriteriaModel.processName,callback:function(t){e.$set(e.CriteriaModel,"processName",t)},expression:"CriteriaModel.processName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[a("el-radio",{attrs:{label:0}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("有效")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("失效")])],1)],1)],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"-10px","padding-left":"20px"},attrs:{span:6}},[a("el-button",{staticClass:"searchBtn",attrs:{round:"",type:"primary",size:"mini"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"searchReset",attrs:{round:"",type:"primary",size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"delegationAdd"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.delegationAdd()}}},[e._v("新增")])],1)],1)],1)],1)],1)])]),e._v(" "),a("el-main",[a("div",{staticClass:"mainContaint"},[a("div",{staticClass:"todoProcess-main"},[a("div",{staticClass:"list",class:{table_safari:e.isSafari}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","font-size":"14px"},attrs:{height:e.showList?e.bodyHeight-295:e.bodyHeight-180,data:e.tableData,border:"","header-row-class-name":e.tableHeaderClassName,size:"mini"},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{prop:"FromUserName",label:"授权人",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"table-popover folio",on:{click:function(a){e.folioBlank(t.row)}}},[e._v(e._s(t.row.FromUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ToUserName","min-width":"80px",align:"center",label:"代理人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-popover",attrs:{title:t.row.ProcessName}},[e._v(e._s(t.row.ToUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"StartDate",width:"200px",label:"开始时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.StartDate,"YYYY-MM-DD HH:mm")))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"EndDate",width:"200px",label:"结束时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.EndDate))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"StatusName",label:"状态",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-popover"},[a("el-switch",{attrs:{"active-value":e.switchText},on:{change:function(a){e.changeSwitch(t.row)}},model:{value:t.row.IsEnable,callback:function(a){e.$set(t.row,"IsEnable",a)},expression:"scope.row.IsEnable"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClickView(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClickEdit(t.row)}}},[e._v("编辑")])]}}])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.imgLoading,expression:"!imgLoading"}],attrs:{slot:"empty"},slot:"empty"},[a("p",{style:{marginTop:"23px"}},[e._v("暂无数据")])]),e._v(" "),a("div",{attrs:{slot:"append"},slot:"append"},[e.tableData.length>0?a("page",{attrs:{pageIndex:e.CriteriaModel.page,total:e.total,pageSize:e.CriteriaModel.limit,pageSizesList:e.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}}):e._e()],1)],1)],1)])])])],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"审批流程代理",name:"2"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],staticClass:"todoProcess loadingtext",style:{height:e.bodyHeight-50+"px"},attrs:{"element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[a("el-container",[a("el-header",{staticStyle:{height:"150px"}},[a("div",{staticClass:"top-header"},[a("div",{staticClass:"todoProcess-screenList screenList-box",class:{screenList_box_ie:e.isIE}},[a("el-form",{ref:"search2",staticClass:"todoForm",attrs:{model:e.model.selectForm2,inline:!0,"label-width":"110px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发起时段"}},[a("div",{staticClass:"money-box"},[a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.delegationpickerOptionsBefore,placeholder:"选择日期"},model:{value:e.model.delegation[0],callback:function(t){e.$set(e.model.delegation,0,t)},expression:"model.delegation[0]"}})],1),e._v(" "),a("el-form-item",[e._v("~")]),e._v(" "),a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",staticStyle:{float:"right"},attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.delegationpickerOptionsAfter,placeholder:"选择日期"},model:{value:e.model.delegation[1],callback:function(t){e.$set(e.model.delegation,1,t)},expression:"model.delegation[1]"}})],1)],1)])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"代理人"}},[a("el-input",{staticClass:"microcheiria ",attrs:{size:"mini"},model:{value:e.toUser,callback:function(t){e.toUser=t},expression:"toUser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"授权人"}},[a("el-input",{staticClass:"microcheiria",attrs:{readonly:"readonly",size:"mini"},model:{value:e.CriteriaModel.fromUser,callback:function(t){e.$set(e.CriteriaModel,"fromUser",t)},expression:"CriteriaModel.fromUser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}})],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"结束时间"}},[a("div",{staticClass:"money-box"},[a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.finshDatepickerOptionsBefore,placeholder:"选择日期"},model:{value:e.model.finshDate[0],callback:function(t){e.$set(e.model.finshDate,0,t)},expression:"model.finshDate[0]"}})],1),e._v(" "),a("el-form-item",[e._v("~")]),e._v(" "),a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",staticStyle:{float:"right"},attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.finshDatepickerOptionsAfter,placeholder:"选择日期"},model:{value:e.model.finshDate[1],callback:function(t){e.$set(e.model.finshDate,1,t)},expression:"model.finshDate[1]"}})],1)],1)])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"流程名称"}},[a("el-input",{staticClass:"microcheiria",attrs:{size:"mini"},model:{value:e.CriteriaModel.processName,callback:function(t){e.$set(e.CriteriaModel,"processName",t)},expression:"CriteriaModel.processName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},[a("el-radio",{attrs:{label:0}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("有效")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("失效")])],1)],1)],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"-10px","padding-left":"20px"},attrs:{span:6}},[a("el-button",{staticClass:"searchBtn",attrs:{round:"",type:"primary",size:"mini"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"searchReset",attrs:{round:"",type:"primary",size:"mini"},on:{click:e.refresh}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"delegationAdd"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.delegationAdd()}}},[e._v("新增")])],1)],1)],1)],1)],1)])]),e._v(" "),a("el-main",[a("div",{staticClass:"mainContaint"},[a("div",{staticClass:"todoProcess-main"},[a("div",{staticClass:"list",class:{table_safari:e.isSafari}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","font-size":"14px"},attrs:{height:e.showList?e.bodyHeight-295:e.bodyHeight-180,data:e.tableData,border:"","header-row-class-name":e.tableHeaderClassName,size:"mini"},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{prop:"FromUserName",label:"授权人",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"table-popover folio",on:{click:function(a){e.folioBlank(t.row)}}},[e._v(e._s(t.row.FromUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ToUserName","min-width":"80px",align:"center",label:"代理人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-popover",attrs:{title:t.row.ProcessName}},[e._v(e._s(t.row.ToUserName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"StartDate",width:"200px",label:"开始时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.StartDate,"YYYY-MM-DD HH:mm")))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"EndDate",width:"200px",label:"结束时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.EndDate))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"StatusName",label:"状态",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-popover"},[a("el-switch",{attrs:{"active-value":e.switchText},on:{change:function(a){e.changeSwitch(t.row)}},model:{value:t.row.IsEnable,callback:function(a){e.$set(t.row,"IsEnable",a)},expression:"scope.row.IsEnable"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClickView(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleClickEdit(t.row)}}},[e._v("编辑")])]}}])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.imgLoading,expression:"!imgLoading"}],attrs:{slot:"empty"},slot:"empty"},[a("p",{style:{marginTop:"23px"}},[e._v("暂无数据")])]),e._v(" "),a("div",{attrs:{slot:"append"},slot:"append"},[e.tableData.length>0?a("page",{attrs:{pageIndex:e.CriteriaModel.page,total:e.total,pageSize:e.CriteriaModel.limit,pageSizesList:e.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}}):e._e()],1)],1)],1)])])])],1)],1)])],1),e._v(" "),a("choosen",{ref:"dialogChoosen",attrs:{typeTab:e.typeTab,ProcessType:e.ProcessType,echoData:e.echoData,Visible:e.Visible,portalmMtilselectCheck:e.portalmMtilselectCheck},on:{OpenDialog:e.OpenDialog,sendTag:e.sendTag,CloseDialog:e.CloseDialog}}),e._v(" "),e.showremove?a("el-dialog",{staticClass:"message-dialog",attrs:{visible:e.showremove,title:e.proxyTitle,"close-on-click-modal":!1,width:"690px",id:"addProxy2"},on:{"update:visible":function(t){e.showremove=t}}},[a("div",{staticClass:"adddialog",class:{screenList_box_ie:e.isIE}},[a("el-form",{ref:"selectForm",staticClass:"todoForm",staticStyle:{"text-align":"left"},attrs:{model:e.model.selectForm,inline:!0,"label-width":"80px",size:"mini"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"授权人"}},[a("el-input",{staticClass:"microcheiria",attrs:{readonly:"readonly",size:"mini"},model:{value:e.CriteriaModel.fromUser,callback:function(t){e.$set(e.CriteriaModel,"fromUser",t)},expression:"CriteriaModel.fromUser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"代理人"}},[e.readonly?a("el-input",{staticClass:"microcheiria",attrs:{readonly:e.readonly,size:"mini"},model:{value:e.editFromUser,callback:function(t){e.editFromUser=t},expression:"editFromUser"}}):a("el-input",{staticClass:"microcheiria",attrs:{size:"mini",readonly:e.readonly},on:{focus:function(t){e.choosenDialogType("User","User")}}},[e._l(e.serachSlectData.tagsOwnsUser,function(t,s){return a("el-tag",{key:s,attrs:{slot:"prefix",size:"mini",closable:""},on:{close:function(a){e.closeProcessTag(t)}},slot:"prefix"},[e._v("\n                    "+e._s(t.UserDisplayName)+"\n                  ")])}),e._v(" "),a("i",{staticClass:"iconfont icon-member",attrs:{slot:"suffix"},on:{click:function(t){e.choosenDialogType("User","User")}},slot:"suffix"})],2)],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"发起时段"}},[a("div",{staticClass:"money-box"},[a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",attrs:{disabled:e.readonly,"value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptionsBefore,placeholder:"选择日期"},model:{value:e.model.startDate[0],callback:function(t){e.$set(e.model.startDate,0,t)},expression:"model.startDate[0]"}})],1),e._v(" "),a("el-form-item",[e._v("~")]),e._v(" "),a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",staticStyle:{float:"right"},attrs:{disabled:e.readonly,"value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptionsAfter,placeholder:"选择日期"},model:{value:e.model.startDate[1],callback:function(t){e.$set(e.model.startDate,1,t)},expression:"model.startDate[1]"}})],1)],1)])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"是否有效"}},[a("div",{staticClass:"money-box"},[a("el-form-item",[a("el-checkbox",{attrs:{disabled:e.readonly},model:{value:e.isValid,callback:function(t){e.isValid=t},expression:"isValid"}})],1)],1)])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注"}},[a("div",{staticClass:"money-box"},[a("el-form-item",[a("el-input",{attrs:{readonly:e.readonly,placeholder:"请输入内容"},model:{value:e.addComment,callback:function(t){e.addComment=t},expression:"addComment"}})],1)],1)])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",[a("div",{staticClass:"money-box"},[a("el-form-item",[a("el-button",{staticStyle:{height:"30px"},attrs:{type:"primary",disabled:e.readonly},on:{click:function(t){e.choosenDialogType("Process","Process")}}},[e._v("选择流程")])],1)],1)])],1)],1),e._v(" "),a("el-row",[a("div",{staticStyle:{"max-height":"100px","overflow-x":"auto"}},[a("el-col",{attrs:{span:24}},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.serachSlectData.tagsOwnProcess,border:""}},[a("el-table-column",{attrs:{prop:"CategoryName",label:"流程分类",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ProcessName",label:"流程名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:e.readonly,type:"text",size:"small"},on:{click:function(a){e.handleDel(t.row)}}},[e._v("删除")])]}}])})],1)]],2)],1)])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.correctremovedel}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:e.cancelremovedel}},[e._v("取 消")])],1)]):e._e()],1)},staticRenderFns:[]};var w=a("VU/8")(D,C,!1,function(e){a("o1ar")},"data-v-0d7a1cb2",null);t.default=w.exports},o1ar:function(e,t){}});
//# sourceMappingURL=35.2ab9dc16021ad37ed84c.js.map