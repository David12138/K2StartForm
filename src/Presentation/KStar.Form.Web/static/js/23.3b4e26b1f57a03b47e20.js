webpackJsonp([23],{DEeI:function(t,e){},svb4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("BO1k"),o=a.n(s),r=a("bOdI"),i=a.n(r),n=a("T//Y"),l=a("Xg7m"),c=a("J9uR"),p=a("Lxn6"),d=a("PJh5"),h=a.n(d),m=a("+vjY"),g=h()().day(0).format("YYYY-MM-DD"),u=h()().day(6).format("YYYY-MM-DD"),D=h()().startOf("month").format("YYYY-MM-DD"),f=h()().endOf("month").format("YYYY-MM-DD"),v=h()().startOf("quarter").format("YYYY-MM-DD"),y=h()().endOf("quarter").format("YYYY-MM-DD"),C=h()().startOf("year").format("YYYY-MM-DD"),b=h()().endOf("year").format("YYYY-MM-DD"),_={name:"statisticalRate",components:{page:n.a,processClassification:l.a,processSelection:c.a},data:function(){var t;return t={processCategoryName:"",processCategoryList:[],processList:[],processName:"",processIDs:"",processCategoryIDs:"",projectList:[],OrgId:"",showdialog:!1,componentParam:{componentType:{type:String,required:!0},backfillData:{type:Array,required:!0},oneCheck:{type:Boolean,required:!0},closeShow:{type:Boolean,required:!0}},type:1,fullHeight:document.documentElement.clientHeight,isShow:!0,arrt:"收起",icon:"el-icon-arrow-down",selectValue:1,organSelectRadio:"",organSelectDateStart:"",organSelectDateEnd:"",isShowReportCondition:!0,arrtReportCondition:"收起",pageSizesList:[10,20,50,100],pageSize:10,pageIndex:1,total:0,isShowtwo:!0,arrtTwo:"收起",model:{selectForm:{processName:"",processIDs:""},Date:""},tableData:[],showList:!1,hideComponentShow:!1},i()(t,"processCategoryIDs",""),i()(t,"childDataUrl",{url:""}),i()(t,"comp",{}),i()(t,"orderBy",""),i()(t,"exportData",[]),i()(t,"imgLoading",!1),t},mounted:function(){},methods:{change:function(){switch(this.selectValue){case 1:this.startDate=g,this.endDate=u;break;case 2:this.startDate=D,this.endDate=f;break;case 3:this.startDate=v,this.endDate=y;break;case 4:this.startDate=C,this.endDate=b;break;case 5:this.startDate=this.model.Date[0]?this.model.Date[0]+" 00:00:00":"",this.endDate=this.model.Date[1]?this.model.Date[1]+" 23:59:59":""}},openDailog:function(t){this.componentParam.closeShow=!1,this.componentParam.componentType=t,this.componentParam.oneCheck=!1,"processClassification"==t?this.componentParam.backfillData=this.processCategoryList:"processSelection"==t&&(this.componentParam.backfillData=this.processList),this.showdialog=!0,p.a.showDailog_mask()},hideComponent:function(){this.showdialog=!1,p.a.hiddenDailog_mask()},showMsgfromchild:function(t){if(t.type&&"processClassification"==t.type){this.processCategoryList=t.list;var e=[],a=[],s=!0,r=!1,i=void 0;try{for(var n,l=o()(t.list);!(s=(n=l.next()).done);s=!0){var c=n.value;a.push(c.name),e.push(c.id+"")}}catch(t){r=!0,i=t}finally{try{!s&&l.return&&l.return()}finally{if(r)throw i}}this.processCategoryIDs=e.join(","),this.processCategoryName=a.join("；")}else if(t.type&&"processSelection"==t.type){this.processList=t.list;var p=[],d=[],h=!0,m=!1,g=void 0;try{for(var u,D=o()(t.list);!(h=(u=D.next()).done);h=!0){var f=u.value;d.push(f.name),p.push(f.processId+"")}}catch(t){m=!0,g=t}finally{try{!h&&D.return&&D.return()}finally{if(m)throw g}}this.processIDs=p.join(","),this.processName=d.join("；")}this.hideComponent()},getProcessID:function(t,e){var a=!0,s=!1,r=void 0;try{for(var i,n=o()(t);!(a=(i=n.next()).done);a=!0){var l=i.value;if(!l.Child)return void(l.processId&&"0"!==l.processId&&null!==l.processId?e.processId.push(l.processId+""):e.processCategoryIDs.push(l.id+""));this.getProcessID(l.Child,e),e.processName.push(l.name.trim())}}catch(t){s=!0,r=t}finally{try{!a&&n.return&&n.return()}finally{if(s)throw r}}},showToggle:function(){this.isShow=!this.isShow,this.isShow?(this.arrt="收起",this.icon="el-icon-arrow-up"):(this.arrt="展开",this.icon="el-icon-arrow-down")},sortChange:function(t){this.orderBy=t.prop+" "+t.order.replace("ending",""),this.getList()},refresh:function(){this.componentParam.backfillData=new Array,this.processList=new Array,this.processCategoryList=new Array,this.processName="",this.processIDs="",this.selectValue=1,this.endDate="",this.startDate="",this.model.Date=[],this.processCategoryName="",this.processCategoryIDs=""},handleSizeChange:function(t){var e=""+t;this.pageIndex=1,this.pageSize=parseInt(e),this.getList()},handleCurrentChange:function(t){this.pageIndex=t,this.getList()},exportList:function(){var t=this;this.change(),m.a.startLoading({lock:!0,text:"数据量过大，正在拼命加载中...",background:"rgba(255, 255, 255, 0.9)",target:document.querySelector(".loadingtext")});var e={pageSize:1e3,pageIndex:0,startDate:this.startDate,endDate:this.endDate,processIDs:this.processIDs,processCategoryIDs:this.processCategoryIDs,orderBy:this.orderBy};null==this.model.Date&&(this.model.Date=[]),this.model.selectForm.startDate=this.model.Date[0]?this.model.Date[0]+" 00:00:00":"",this.model.selectForm.endDate=this.model.Date[1]?this.model.Date[1]+" 23:59:59":"",this.$axios.post("/api/exportExcelForTable",{tableName:"动态-岗位/人-以“岗位”统计退回率",params:e},{responseType:"blob"}).then(function(t){for(var e=t.data,a=0;a<e.length;a++)e.statisticalreturnrate[a].returnRate=e.statisticalreturnrate[a].returnRate+"%";p.a.exportSearchList("动态-岗位/人-以“岗位”统计退回率",e),m.a.endLoading()}).catch(function(e){m.a.endLoading(),t.$message.error("导出Excel失败!ERROR MESSAGE:"+e)})},getList:function(){var t=this;if(0!==this.processIDs.length||0!==this.processCategoryIDs.length){this.imgLoading=!0,this.change();var e={pageSize:this.pageSize,pageIndex:this.pageIndex-1,startDate:this.startDate,endDate:this.endDate,processIDs:this.processIDs,processCategoryIDs:this.processCategoryIDs,orderBy:this.orderBy};this.$axios.post("/api/Statisticalreturnrate/page",e).then(function(e){if(200===e.status){t.tableData=e.data.statisticalreturnrate,t.total=e.data.total;for(var a=0;a<t.tableData.length;a++)e.data.statisticalreturnrate[a].returnRate=e.data.statisticalreturnrate[a].returnRate+"%"}else t.$message.error("查询列表数据失败!ERROR MESSAGE"),t.imgLoading=!1;t.imgLoading=!1}).catch(function(e){t.$message.error("查询列表数据失败!ERROR MESSAGE:"+e),t.imgLoading=!1})}else this.$message.warning("请选择流程分类或流程选择进行查询！")},search:function(){this.pageIndex=1,this.getList()}},watch:{fullHeight:function(){return document.documentElement.clientHeight}},computed:{}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"staticReports"},[a("el-container",[a("el-header",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.imgLoading,expression:"imgLoading"}],staticClass:"staticReports loadingtext minWidth",attrs:{"element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[a("div",{staticClass:"taticReports-content"},[a("el-row",{staticClass:"staticReports-header",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticClass:"titleMT",attrs:{span:17}},[a("span",{staticClass:"mz",on:{click:function(e){t.$router.back(-1)}}},[t._v("流程报表")]),a("i",{class:t.icon})]),t._v(" "),a("el-col",{staticClass:"titleBtn clearfix",attrs:{span:6}},[a("el-button",{attrs:{round:"",type:"primary",size:"mini"},on:{click:t.refresh}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{round:"",type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")])],1)],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"statement reportCondition"},[a("span",{staticClass:"fz16"},[t._v("动态-岗位/人-以“步骤名称”统计退回率")]),t._v(" "),a("el-row",{staticClass:"staticReports-middle lh35 staticReportsMiddle"},[a("el-col",{staticClass:"classSelect",attrs:{span:2,sm:4,md:1}},[a("span",[t._v("流程分类选择")])]),t._v(" "),a("el-col",{staticClass:"classSelectMR process-inputbox",attrs:{span:7}},[a("i",{staticClass:"iconfont icon-organization",on:{click:function(e){t.openDailog("processClassification")}}}),t._v(" "),a("span",{on:{dblclick:function(e){t.openDailog("processClassification")}}},[a("el-input",{attrs:{placeholder:"",disabled:!0,title:t.processCategoryName},model:{value:t.processCategoryName,callback:function(e){t.processCategoryName=e},expression:"processCategoryName"}})],1)]),t._v(" "),a("el-col",{attrs:{span:1}},[a("span",[t._v(" ")])]),t._v(" "),a("el-col",{staticClass:"processSelect",attrs:{span:2,sm:4,md:1}},[a("span",[t._v("流程选择")])]),t._v(" "),a("el-col",{staticClass:"process-inputbox",attrs:{span:6}},[a("i",{staticClass:"iconfont icon-organization",on:{click:function(e){t.openDailog("processSelection")}}}),t._v(" "),a("span",{on:{dblclick:function(e){t.openDailog("processSelection")}}},[a("el-input",{staticClass:"input-text",attrs:{placeholder:"",disabled:!0,title:t.processName},model:{value:t.processName,callback:function(e){t.processName=e},expression:"processName"}})],1)])],1),t._v(" "),a("el-row",{staticClass:"reportCondition-date reportConditionDate"},[a("el-col",{staticClass:"timeDuan",attrs:{span:2,sm:4,md:1}},[a("span",[t._v("时间段")])]),t._v(" "),a("el-col",{staticClass:"timeSelect",attrs:{span:8,sm:8}},[a("el-radio-group",{on:{change:t.change},model:{value:t.selectValue,callback:function(e){t.selectValue=e},expression:"selectValue"}},[a("el-radio",{attrs:{label:1}},[t._v("本周")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("本月")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("本季度")]),t._v(" "),a("el-radio",{attrs:{label:4}},[t._v("本年")]),t._v(" "),a("el-radio",{attrs:{label:5}},[t._v("其他")])],1)],1),t._v(" "),a("el-col",{staticClass:"space",attrs:{span:2,sm:4,md:1}},[a("span",[t._v(" ")])]),t._v(" "),5===t.selectValue?a("el-col",{attrs:{span:7,sm:6}},[a("div",{staticClass:"border"},[a("el-date-picker",{staticClass:"timeWidth",attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.model.Date,callback:function(e){t.$set(t.model,"Date",e)},expression:"model.Date"}})],1)]):t._e()],1),t._v(" "),a("el-row",[a("el-col",{staticClass:"buttonWrap buttonWrapTA",attrs:{span:4}},[a("el-button",{attrs:{round:"",type:"primary",size:"mini"},on:{click:t.exportList}},[a("i",{staticClass:"iconfont icon-export"}),t._v("导出")])],1)],1)],1),t._v(" "),a("div",{staticClass:"statement "},[a("el-table",{ref:"singleTable",staticClass:"tableWidth",attrs:{data:t.tableData,height:t.isShow?t.fullHeight-320:t.fullHeight-215,border:""},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{property:"rowNumber",label:"排名"}}),t._v(" "),a("el-table-column",{attrs:{property:"activityName",label:"步骤名称",sortable:"custom",width:"600"}}),t._v(" "),a("el-table-column",{attrs:{property:"processTotalCnt",label:"处理实例数"}}),t._v(" "),a("el-table-column",{attrs:{property:"returnCnt",label:"退回实例数"}}),t._v(" "),a("el-table-column",{attrs:{property:"returnRate",sortable:"custom",label:"退回率",with:"50"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.imgLoading,expression:"!imgLoading"}],attrs:{slot:"empty"},slot:"empty"},[a("p",{style:{marginTop:"23px"}},[t._v("暂无数据")])]),t._v(" "),a("div",{attrs:{slot:"append"},slot:"append"},[a("page",{attrs:{pageIndex:t.pageIndex,total:t.total,pageSize:t.pageSize,pageSizesList:t.pageSizesList},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}})],1)],1)],1)],1)]),t._v(" "),t.showdialog?a(t.componentParam.componentType,{tag:"component",attrs:{componentParam:t.componentParam},on:{hideComponent:t.hideComponent,sureSubmit:t.showMsgfromchild}}):t._e()],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")(_,w,!1,function(t){a("DEeI")},"data-v-46f9c492",null);e.default=S.exports}});
//# sourceMappingURL=23.3b4e26b1f57a03b47e20.js.map