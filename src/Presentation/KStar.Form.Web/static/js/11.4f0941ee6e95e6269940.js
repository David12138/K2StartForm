webpackJsonp([11],{Fqk6:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__=__webpack_require__("Dd8w"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__=__webpack_require__("Gu7T"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_typeof__=__webpack_require__("pFYg"),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator__=__webpack_require__("BO1k"),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator__),__WEBPACK_IMPORTED_MODULE_4_vuex__=__webpack_require__("NYxO"),__WEBPACK_IMPORTED_MODULE_5__dailog_originator_dailog_vue__=__webpack_require__("ve2v"),__WEBPACK_IMPORTED_MODULE_6__dailog_processSelection_vue__=__webpack_require__("J9uR"),__WEBPACK_IMPORTED_MODULE_7__js_util__=__webpack_require__("Lxn6"),__WEBPACK_IMPORTED_MODULE_8_moment__=__webpack_require__("PJh5"),__WEBPACK_IMPORTED_MODULE_8_moment___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_moment__),__WEBPACK_IMPORTED_MODULE_9__plugins_loading_loading__=__webpack_require__("+vjY"),__WEBPACK_IMPORTED_MODULE_10__plugins_page_index__=__webpack_require__("T//Y"),__WEBPACK_IMPORTED_MODULE_11__biz_compositeChoosen_vue__=__webpack_require__("/xpi");__webpack_exports__.a={name:"burseProcess",components:{page:__WEBPACK_IMPORTED_MODULE_10__plugins_page_index__.a,Choosen:__WEBPACK_IMPORTED_MODULE_11__biz_compositeChoosen_vue__.default},mounted:function(){this.getList();var e=this;window.onmessage=function(t){"refreshNewSystem"===t.data.key&&e.getList()}},data:function(){var e=this;return{pickerOptionsBefore:{disabledDate:function(t){var a=e.model.date[1];if(a)return __WEBPACK_IMPORTED_MODULE_8_moment___default()(t).format("YYYY-MM-DD")>a}},pickerOptionsAfter:{disabledDate:function(t){var a=e.model.date[0];if(a)return __WEBPACK_IMPORTED_MODULE_8_moment___default()(t).format("YYYY-MM-DD")<a}},rules:{checkComment:[{validator:function(e,t,a){""==t.trim()?a(new Error("请输审批意见！意见不能为空！")):a()},trigger:"blur"}]},model:{selectForm:{searchWord:"",startDate:"",finishDate:"",amountOfMoneyB:"",amountOfMoneyE:"",processFullName:"",companyCode:"",departmentID:"",projectId:"",originator:"",orderBy:"riskLevel desc,startDate desc"},date:[],userName:[]},isSeach:!1,oneCheck:!1,queryName:"",processFormName:"",childDataUrl:{url:"",selectedPerson:[],chooseProject:{}},loading:!1,showdialog:!1,componentParam:{componentType:"",childDataUrl:{type:Object,required:!0},backfillData:{type:Array,required:!0},oneCheck:{type:Boolean,required:!0},closeShow:{type:Boolean,required:!0}},comp:{},orgStates:[],showList:!1,rowData:{},pageIndex:1,total:0,pageSize:20,pageSizesList:[20,50,100],multipleSelection:[],endsDialog:!1,approvaldialog:!1,carefulform:{agree:"Approved",checkComment:"",iiSServerUrl:"",snList:"",userName:localStorage.getItem("username"),handtime:__WEBPACK_IMPORTED_MODULE_8_moment___default()(new Date).format("YYYY-MM-DD")},tableData:[],imgLoading:!1,dataTitle:"",originatorPageIndex:0,originatorPageSize:10,originatorTotal:0,originatorLoading:!1,typeTab:"User",Visible:!1,serachSlectData:{tagsOwnsUser:[],tagsOwnProcess:[],tagsOwnCategory:[],tagsOrgSelect:[]},portalmMtilselectCheck:"true",CriteriaModel:{ProcessNum:"",ProcessCode:[],ProcessCategory:[],DepartmentId:"",FormSubject:"",Originator:"",SubmitStartDate:"",SubmitEndDate:"",approvers:"",SortField:"",SortDirection:"",pageSizesList:[10,20],pageIndex:1,pageSize:10},ProcessType:""}},methods:{burialPointEvent:function(e){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint(e)},loadMore:function(e){this.originatorPageIndex++,this.getUsers(e)},closeApproval:function(){this.$refs.carefulform.clearValidate()},ascertain:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.submitApproval()})},submitApproval:function(){var e=this;this.approvaldialog=!1;var t=[],a=!0,s=!1,r=void 0;try{for(var o,i=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.multipleSelection);!(a=(o=i.next()).done);a=!0){var l=o.value;t.push({SharedUser:l.SharedUser,WorkItemId:l.Id,Comment:this.carefulform.checkComment})}}catch(e){s=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw r}}this.$axios.post("/Portal/WorkFlow/MutliApprove",t).then(function(t){t.data&&200===t.data.code&&(e.$store.dispatch("GETTODO"),e.$message.success("审批成功!")),e.getList()}).catch(function(t){e.$message.error("审批失败!ERROR MESSAGE:"+t.response.data.message)})},endProcess:function endProcess(){var _this5=this;this.endsDialog=!1;var snList=this.getSN(),sn=snList.join(","),procInstId=this.multipleSelection[0].procInstID;this.$axios.post("/api/stopProcessInstances",{procInstId:procInstId,sn:sn}).then(function(res){var data=eval("("+res.data.result+")");"4"===data.Status?(_this5.$message.success(""+data.Message),_this5.getList()):(_this5.$message.warning(""+data.Message),_this5.$refs.table.clearSelection())}).catch(function(e){_this5.$message.error("结束流程失败！"+e)})},getSN:function(){var e=[],t=!0,a=!1,s=void 0;try{for(var r,o=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.multipleSelection);!(t=(r=o.next()).done);t=!0){var i=r.value,l=i.viewUrl.substr(i.viewUrl.indexOf("SN=")+3,i.viewUrl.length);l=l.substr(0,l.indexOf("&")),e.push(l)}}catch(e){a=!0,s=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw s}}return e},formatter:function(e){switch(e.dodoType){case"1":e.statusName="审批";break;case"2":e.statusName="授权";break;case"3":e.statusName="意见反馈";break;case"4":e.statusName="被退回";break;default:e.statusName=""}return e},sortChange:function(e){this.CriteriaModel.SortDirection=""+e.order.replace("ending",""),this.CriteriaModel.SortField=e.prop,this.pageIndex=1,this.getList()},renderIcon:function(e,t){t.column;return e("i",{class:"iconfont icon-process"})},getUsers:function(e){var t=this;this.originatorLoading=!0;var a=this;a.$axios.post("/api/getUser?pageIndex="+this.originatorPageIndex+"&pageSize="+this.originatorPageSize,{name:e,deptId:"",isWork:"1"}).then(function(e){t.originatorTotal=e.data.pageControllerInfo.totalRecordCount;for(var s=0;s<e.data.result.length;s++)a.orgStates.push({value:e.data.result[s].displayName,userId:e.data.result[s].adAccount,companyName:e.data.result[s].companyName,orgFullPath:e.data.result[s].orgNameFullPath,vankeId:e.data.result[s].vankeId});t.loading=!1,t.originatorLoading=!1}).catch(function(e){t.originatorLoading=!1,a.$message.error("查询列表数据失败!ERROR MESSAGE:"+e)})},querySearchUser:function(e){this.orgStates=[];var t=this;t.queryName=e,this.loading=!0,this.isSeach||(this.isSeach=!0,setTimeout(function(){t.isSeach=!1,t.validationInput(t.queryName)},2e3))},personChange:function(e){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-发起人输入框"),this.$set(this.$refs.userId,"query","");for(var t=0;t<e.length;t++){for(var a=!1,s=0;s<this.childDataUrl.selectedPerson.length;s++)e[t].userId&&this.childDataUrl.selectedPerson[s].userId!==e[t].userId||(a=!0);a||this.childDataUrl.selectedPerson.push(e[t])}},visibleChange:function(){this.orgStates=[]},removeUser:function(e){if(e.userId){for(var t=0;t<this.childDataUrl.selectedPerson.length&&e.userId!=this.childDataUrl.selectedPerson[t].userId;t++);this.childDataUrl.selectedPerson.splice(t,1)}else{for(t=0;t<this.childDataUrl.selectedPerson.length&&e!=this.childDataUrl.selectedPerson[t].value;t++);this.childDataUrl.selectedPerson.splice(t,1)}},validationInput:function(e){if(this.orgStates=[],""==e||0==e.length)return this.loading=!1,null;e==this.$refs.userId.query?this.getUsers(e):this.orgStates=[]},openDailog:function(e){this.componentParam.closeShow=!1,"originator_dailog"==e?(__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-发起人输入框"),this.oneCheck=!1,this.childDataUrl.getTree="getTree",this.childDataUrl.companytree="companytree/page"):"processSelection"==e&&(__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-流程类别"),this.componentParam.componentType=e,this.componentParam.oneCheck=!0),this.comp.component=e,this.showdialog=!0,__WEBPACK_IMPORTED_MODULE_7__js_util__.a.showDailog_mask()},hideComponent:function(){this.showdialog=!1,__WEBPACK_IMPORTED_MODULE_7__js_util__.a.hiddenDailog_mask()},showMsgfromchild:function(e){if(e.type&&"originator"==e.type){this.childDataUrl.selectedPerson=[],this.model.userName=[];var t=!0,a=!1,s=void 0;try{for(var r,o=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(e.peoArr);!(t=(r=o.next()).done);t=!0){for(var i=r.value,l=i.userId,n=i.vankeId,c=!1,_=0;_<this.childDataUrl.selectedPerson.length;_++)this.childDataUrl.selectedPerson[_].userId===l&&(c=!0);c||(this.childDataUrl.selectedPerson.push({userId:l,value:i.name,vankeId:n}),this.model.userName.push(i.name))}}catch(e){a=!0,s=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw s}}}else if(e.type&&"processSelection"==e.type){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-流程类别"),this.componentParam.backfillData=e.list;var u=[],d=[],h=!0,m=!1,p=void 0;try{for(var f,g=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(e.list);!(h=(f=g.next()).done);h=!0){var D=f.value;d.push(D.name),u.push(D.processId+"")}}catch(e){m=!0,p=e}finally{try{!h&&g.return&&g.return()}finally{if(m)throw p}}this.model.selectForm.processFullName=u.join(","),this.processFormName=d.join("；")}this.hideComponent()},refresh:function(){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-重置按钮"),this.CriteriaModel.ProcessNum="",this.serachSlectData.tagsOwnProcess=[],this.serachSlectData.tagsOwnCategory=[],this.CriteriaModel.ProcessCategory=[],this.CriteriaModel.Originator="",this.CriteriaModel.DepartmentId="",this.CriteriaModel.FormSubject="",this.serachSlectData.tagsOrgSelect=[],this.serachSlectData.tagsOwnsUser=[],this.model.date=[]},inputValidate:function(e,t){var a=this,s=/^([0-9]*)([.]?|(\.\d{1,2})?)$/;"front"==e?s.test(t)||setTimeout(function(){a.model.selectForm.amountOfMoneyB=""},100):"back"==e&&(s.test(t)||setTimeout(function(){a.model.selectForm.amountOfMoneyE=""},100))},checkValidate:function(e,t){t=parseFloat(t);"front"==e?""!=this.model.selectForm.amountOfMoneyE&&t>parseFloat(this.model.selectForm.amountOfMoneyE)&&(this.model.selectForm.amountOfMoneyB=""):"back"==e&&""!=this.model.selectForm.amountOfMoneyB&&t<parseFloat(this.model.selectForm.amountOfMoneyB)&&(this.model.selectForm.amountOfMoneyE="")},search:function(){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-输入条件-搜索按钮"),this.pageIndex=1,this.getList()},getList:function(){var e=this,t=this;if(null==t.model.date&&(t.model.date=[]),t.CriteriaModel.SubmitStartDate=t.model.date[0]?t.model.date[0]+" 00:00:00":"",t.CriteriaModel.SubmitEndDate=t.model.date[1]?t.model.date[1]+" 23:59:59":"",t.CriteriaModel.ProcessNum=t.CriteriaModel.ProcessNum.replace(/\s+/g,""),t.CriteriaModel.FormSubject=t.CriteriaModel.FormSubject.replace(/\s+/g,""),t.serachSlectData.tagsOwnsUser[0]?t.CriteriaModel.Originator=t.serachSlectData.tagsOwnsUser[0].UserAccount:t.CriteriaModel.Originator="",t.serachSlectData.tagsOrgSelect[0]?t.CriteriaModel.DepartmentId=t.serachSlectData.tagsOrgSelect[0].UserAccount:this.CriteriaModel.DepartmentId="",t.serachSlectData.tagsOwnProcess){t.CriteriaModel.ProcessCode=[];var a=!0,s=!1,r=void 0;try{for(var o,i=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.serachSlectData.tagsOwnProcess);!(a=(o=i.next()).done);a=!0){var l=o.value;t.CriteriaModel.ProcessCode.push(l.processCode)}}catch(e){s=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw r}}}if(t.serachSlectData.tagsOwnCategory){t.CriteriaModel.ProcessCategory=[];var n=!0,c=!1,_=void 0;try{for(var u,d=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(t.serachSlectData.tagsOwnCategory);!(n=(u=d.next()).done);n=!0){var h=u.value;t.CriteriaModel.ProcessCategory.push(h.id)}}catch(e){c=!0,_=e}finally{try{!n&&d.return&&d.return()}finally{if(c)throw _}}}t.model.selectForm.SubmitStartDate<"1753-01-01"&&""!==t.model.selectForm.SubmitStartDate||t.model.selectForm.SubmitEndDate<"1753-01-01"&&""!==t.model.selectForm.SubmitEndDate?this.$message.warning("请选择1753-01-01 ~ 9999-12-31之间的日期"):(t.imgLoading=!0,t.$axios({url:"/Portal/WorkFlow/GetWorklistExpenseReimbursement",data:t.CriteriaModel,method:"post"}).then(function(a){200===a.data.code?(t.tableData=a.data.data.item,t.CriteriaModel.total=a.data.data.total):e.$message.error("请求失败！"),e.imgLoading=!1}).catch(function(t){e.imgLoading=!1,e.$message.error("审批失败!ERROR MESSAGE:"+t.response.data.message)}))},handleSizeChange:function(e){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-列表-每页显示条数按钮");var t=e;this.CriteriaModel.pageIndex=1,this.CriteriaModel.pageSize=parseInt(t),localStorage.todoPageSize=e,this.getList()},handleCurrentChange:function(e){__WEBPACK_IMPORTED_MODULE_7__js_util__.a.burialPoint("我的待办-列表-页码按钮"),this.CriteriaModel.pageIndex=e,this.getList()},tableHeaderClassName:function(e){e.row,e.rowIndex;return"table-head-th"},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 2==t.riskLevel?"orange-row":3==t.riskLevel?"red-row":""},handleSelectionChange:function(e){this.multipleSelection=e},choosenDialogType:function(e,t){this.typeTab=e,this.ProcessType=t,this.$refs.dialogChoosen.openChoosen(this.typeTab,t)},OpenDialog:function(e){this.Visible=e},CloseDialog:function(e){this.Visible=e},sendTag:function(e,t){if(e.length>0){var a=!0,s=!1,r=void 0;try{for(var o,i=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(e);!(a=(o=i.next()).done);a=!0){var l=o.value;if("User"===l.type)if(this.serachSlectData.tagsOwnsUser=[],this.serachSlectData.tagsOwnsUser.length>0){var n=!0,c=!1,_=void 0;try{for(var u,d=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.serachSlectData.tagsOwnsUser);!(n=(u=d.next()).done);n=!0){if(u.value.SysId===l.SysId)return;this.serachSlectData.tagsOwnsUser.push(l)}}catch(e){c=!0,_=e}finally{try{!n&&d.return&&d.return()}finally{if(c)throw _}}}else this.serachSlectData.tagsOwnsUser.push(l);else if("Process"===l.type)if(this.serachSlectData.tagsOwnProcess.length>0){var h=!0,m=!1,p=void 0;try{for(var f,g=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.serachSlectData.tagsOwnProcess);!(h=(f=g.next()).done);h=!0){f.value.id!==l.id&&this.serachSlectData.tagsOwnProcess.push(l)}}catch(e){m=!0,p=e}finally{try{!h&&g.return&&g.return()}finally{if(m)throw p}}}else this.serachSlectData.tagsOwnProcess.push(l);else if("Category"===l.type)if(this.serachSlectData.tagsOwnCategory.length>0){var D=!0,b=!1,v=void 0;try{for(var y,C=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.serachSlectData.tagsOwnCategory);!(D=(y=C.next()).done);D=!0){y.value.id!==l.id&&this.serachSlectData.tagsOwnCategory.push(l)}}catch(e){b=!0,v=e}finally{try{!D&&C.return&&C.return()}finally{if(b)throw v}}}else this.serachSlectData.tagsOwnCategory.push(l);else if(this.serachSlectData.tagsOrgSelect=[],this.serachSlectData.tagsOrgSelect.length>0){var P=!0,O=!1,E=void 0;try{for(var M,w=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_core_js_get_iterator___default()(this.serachSlectData.tagsOrgSelect);!(P=(M=w.next()).done);P=!0){M.value.SysId!==l.SysId&&this.serachSlectData.tagsOrgSelect.push(l)}}catch(e){O=!0,E=e}finally{try{!P&&w.return&&w.return()}finally{if(O)throw E}}}else this.serachSlectData.tagsOrgSelect.push(l)}}catch(e){s=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw r}}}else switch(t){case"Process":this.serachSlectData.tagsOwnProcess=[];break;case"Category":this.serachSlectData.tagsOwnCategory=[];break;case"User":this.serachSlectData.tagsOwnsUser=[];break;case"Org":this.serachSlectData.tagsOrgSelect=[]}},closeProcessTag:function(e){switch(e.type){case"Process":var t=this.serachSlectData.tagsOwnProcess.indexOf(e);this.serachSlectData.tagsOwnProcess.splice(t,1),this.$refs.dialogChoosen.portalehco(this.serachSlectData.tagsOwnProcess);break;case"Category":var a=this.serachSlectData.tagsOwnCategory.indexOf(e);this.serachSlectData.tagsOwnCategory.splice(a,1),this.$refs.dialogChoosen.portalehco(this.serachSlectData.tagsOwnCategory);break;case"User":var s=this.serachSlectData.tagsOwnsUser.indexOf(e);this.serachSlectData.tagsOwnsUser.splice(s,1),this.CriteriaModel.Originator="",this.$refs.dialogChoosen.portalehco(this.serachSlectData.tagsOwnsUser,null);break;case"Org":var r=this.serachSlectData.tagsOrgSelect.indexOf(e);this.serachSlectData.tagsOrgSelect.splice(r,1),this.CriteriaModel.DepartmentId="",this.$refs.dialogChoosen.portalehco(this.serachSlectData.tagsOrgSelect,null)}},jumpToView:function(e){window.open(e.FlowViewUrl,"_blank"),document.getElementById("dailog_mask").style.display="none"},folioBlank:function(e){window.open(e.Url,"_blank")},checkBoxForm:function(e,t){return e.IsBatchApproval?1:0}},watch:{"model.userName":{handler:function(e,t){var a=this.$refs.userId;__WEBPACK_IMPORTED_MODULE_7__js_util__.a.inputHeight(e,a),this.dataTitle="";for(var s=0;s<e.length;s++)"object"==__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_typeof___default()(e[s])?this.dataTitle+=e[s].value+",":"string"==typeof e[s]&&(this.dataTitle+=e[s]+",");this.dataTitle=this.dataTitle.substr(0,this.dataTitle.length-1)},deep:!0},Visible:{handler:function(e,t){if(e){switch(this.typeTab){case"User":this.echoData=[].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(this.serachSlectData.tagsOwnsUser));break;case"Org":this.echoData=[].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(this.serachSlectData.tagsOrgSelect))}switch(this.ProcessType){case"Process":this.echoData=[].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(this.serachSlectData.tagsOwnProcess));break;case"Category":this.echoData=[].concat(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_toConsumableArray___default()(this.serachSlectData.tagsOwnCategory))}}}}},computed:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({bodyHeight:function(){return document.documentElement.clientHeight}},Object(__WEBPACK_IMPORTED_MODULE_4_vuex__.b)(["isIE","todoCount","isSafari","bodyHeight"]))}},JXFZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Fqk6"),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],staticClass:"todoProcess loadingtext",attrs:{"element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[a("el-container",[a("el-header",{staticStyle:{height:"100px"}},[a("div",{staticClass:"top-header"},[a("p",{staticClass:"top-breadCrumb"},[e._v("我的费用报销")]),e._v(" "),a("el-row",{staticClass:"searchCom",attrs:{type:"flex"}},[a("el-col",{attrs:{span:24}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"75px"}},[a("el-col",[a("el-form-item",{attrs:{label:"编号"}},[a("el-input",{staticClass:"inputCom",attrs:{round:"","prefix-icon":"el-icon-search",placeholder:"编号",size:"mini",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null},click:function(t){e.burialPointEvent("我的待办-输入条件-搜索输入框")}},model:{value:e.CriteriaModel.ProcessNum,callback:function(t){e.$set(e.CriteriaModel,"ProcessNum",t)},expression:"CriteriaModel.ProcessNum"}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"75px"}},[a("el-col",[a("el-form-item",{attrs:{label:"主题"}},[a("el-input",{staticClass:"inputCom",attrs:{round:"","prefix-icon":"el-icon-search",placeholder:"主题",size:"mini",clearable:""},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null},click:function(t){e.burialPointEvent("我的待办-输入条件-搜索输入框")}},model:{value:e.CriteriaModel.FormSubject,callback:function(t){e.$set(e.CriteriaModel,"FormSubject",t)},expression:"CriteriaModel.FormSubject"}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-col",[a("el-form-item",{staticClass:"PersonTags",attrs:{label:"申请人"}},[a("el-input",{staticClass:"microcheiria ",staticStyle:{width:"98%"},attrs:{readonly:"readonly",size:"mini"},on:{focus:function(t){e.choosenDialogType("User")}}},[e._l(e.serachSlectData.tagsOwnsUser,function(t,s){return a("el-tag",{key:s,attrs:{slot:"prefix",size:"mini",closable:""},on:{close:function(a){e.closeProcessTag(t)}},slot:"prefix"},[e._v("\n                          "+e._s(t.UserDisplayName)+"\n                        ")])}),e._v(" "),a("i",{staticClass:"iconfont icon-member",attrs:{slot:"suffix"},on:{click:function(t){e.choosenDialogType("User")}},slot:"suffix"})],2)],1)],1)],1)],1),e._v(" "),a("el-col",{staticClass:"sererchBtn",attrs:{span:6}},[a("el-button",{staticClass:"searchBtn",attrs:{round:"",type:"primary",size:"mini"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"searchReset",attrs:{round:"",type:"primary",size:"mini"},on:{click:e.refresh}},[e._v("重置\n                ")]),e._v(" "),a("el-button",{staticClass:"searchMore",attrs:{round:"",type:"primary",size:"mini"},on:{click:function(t){e.showList=!e.showList,e.burialPointEvent("我的待办-输入条件-更多筛选按钮")}}},[e._v("\n                  更多筛选\n                ")])],1)],1)],1)],1)],1)]),e._v(" "),a("el-main",[a("div",{staticClass:"mainContaint"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showList,expression:"showList"}],staticClass:"todoProcess-screenList screenList-box",class:{screenList_box_ie:e.isIE}},[a("el-form",{ref:"selectForm",staticClass:"todoForm",attrs:{model:e.model.selectForm,inline:!0,"label-width":"110px",size:"mini"}},[a("el-row",{attrs:{type:""}},[a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"发起时段"}},[a("div",{staticClass:"money-box"},[a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptionsBefore,placeholder:"选择日期"},model:{value:e.model.date[0],callback:function(t){e.$set(e.model.date,0,t)},expression:"model.date[0]"}})],1),e._v(" "),a("el-form-item",[e._v("~")]),e._v(" "),a("el-form-item",[a("el-date-picker",{staticClass:"todoDate",staticStyle:{float:"right"},attrs:{"value-format":"yyyy-MM-dd",type:"date","picker-options":e.pickerOptionsAfter,placeholder:"选择日期"},model:{value:e.model.date[1],callback:function(t){e.$set(e.model.date,1,t)},expression:"model.date[1]"}})],1)],1)])],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags parsePerson",attrs:{label:"流程名称"}},[a("el-input",{staticClass:"microcheiria ",staticStyle:{width:"103%"},attrs:{readonly:"readonly",size:"mini"},on:{focus:function(t){e.choosenDialogType("Process","Process")}}},[e._l(e.serachSlectData.tagsOwnProcess,function(t,s){return a("el-tag",{key:s,attrs:{slot:"prefix",size:"mini",closable:""},on:{close:function(a){e.closeProcessTag(t)}},slot:"prefix"},[e._v("\n                      "+e._s(t.processName)+"\n                    ")])}),e._v(" "),a("i",{staticClass:"iconfont icon-member",attrs:{slot:"suffix"},on:{click:function(t){e.choosenDialogType("Process","Process")}},slot:"suffix"})],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags parsePerson",attrs:{label:"流程类别"}},[a("el-input",{staticClass:"microcheiria ",attrs:{readonly:"readonly",size:"mini"},on:{focus:function(t){e.choosenDialogType("Process","Category")}}},[e._l(e.serachSlectData.tagsOwnCategory,function(t,s){return a("el-tag",{key:s,attrs:{slot:"prefix",size:"mini",closable:""},on:{close:function(a){e.closeProcessTag(t)}},slot:"prefix"},[e._v("\n                      "+e._s(t.categoryName)+"\n                    ")])}),e._v(" "),a("i",{staticClass:"iconfont icon-member",attrs:{slot:"suffix"},on:{click:function(t){e.choosenDialogType("Process","Category")}},slot:"suffix"})],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}})],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"PersonTags parsePerson",attrs:{label:"申请人部门"}},[a("el-input",{staticClass:"microcheiria",staticStyle:{width:"103%"},attrs:{id:"checkedPersons",readonly:"readonly",size:"mini"},on:{focus:function(t){e.choosenDialogType("Org")}}},[e._l(e.serachSlectData.tagsOrgSelect,function(t,s){return a("el-tag",{key:s,attrs:{slot:"prefix",size:"mini",closable:""},on:{close:function(a){e.closeProcessTag(t)}},slot:"prefix"},[e._v("\n                        "+e._s(t.UserDisplayName)+"\n                      ")])}),e._v(" "),a("i",{staticClass:"iconfont icon-member",attrs:{slot:"suffix"},on:{click:function(t){e.choosenDialogType("Org")}},slot:"suffix"})],2)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"todoProcess-main"},[a("el-row",{staticClass:"listButton",attrs:{type:"flex",justify:"end"}},[a("el-button",{staticClass:"upload",attrs:{round:"",disabled:0==e.multipleSelection.length,type:"primary",icon:"iconfont  icon-end-icon",size:"mini"},on:{click:function(t){e.approvaldialog=!0,e.burialPointEvent("我的待办-操作-批量审批")}}},[e._v("批量审批\n            ")])],1),e._v(" "),a("div",{staticClass:"list",class:{table_safari:e.isSafari}},[a("el-table",{ref:"table",attrs:{data:e.tableData,height:e.showList?e.bodyHeight-295:e.bodyHeight-210,border:"","header-row-class-name":e.tableHeaderClassName,size:"mini","row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange,"sort-change":e.sortChange}},[a("el-table-column",{attrs:{type:"selection",width:"44px",selectable:e.checkBoxForm}}),e._v(" "),a("el-table-column",{attrs:{prop:"icon",width:"44px","render-header":e.renderIcon,label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"iconfont icon-process",on:{click:function(a){e.jumpToView(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Folio",label:"流程单号",width:"150px",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"table-popover folio",on:{click:function(a){e.folioBlank(t.row)}}},[e._v(e._s(t.row.Folio))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"UrgencyName",label:"紧急度",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                  "+e._s(t.row.UrgencyName)+"\n                ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ProcessName","min-width":"150px",align:"center",label:"流程名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-popover",attrs:{title:t.row.ProcessName}},[e._v(e._s(t.row.ProcessName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"FormSubject","min-width":"200px",align:"center",label:"流程主题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{disabled:!t.row.Summary,placement:"right",color:"rgb(166, 176, 185)",effect:"light"}},[a("div",{staticClass:"table-popover folio",attrs:{target:"view_window"},on:{click:function(a){e.folioBlank(t.row)}}},[e._v(e._s(t.row.FormSubject)+"\n                    ")]),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"toolTipContent"},[a("div",{domProps:{innerHTML:e._s(t.row.Summary)}})])])])]}}])}),e._v(" "),a("el-table-column",{staticClass:"originator",attrs:{prop:"ApplicantDisplayName",width:"140px",label:"发起人",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-popover",attrs:{title:t.row.ApplicantDisplayName}},[e._v(e._s(t.row.ApplicantDisplayName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ActivityDisplayName","min-width":"150px",align:"center",label:"节点名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-popover",attrs:{title:t.row.ActivityDisplayName}},[e._v(e._s(t.row.ActivityDisplayName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"StartDate",width:"150px",label:"开始时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.SubmitDate,"YYYY-MM-DD HH:mm")))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"StartDate",width:"150px",label:"任务到达时间",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("moment")(t.row.StartDate,"YYYY-MM-DD HH:mm")))]}}])}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.imgLoading,expression:"!imgLoading"}],attrs:{slot:"empty"},slot:"empty"},[a("p",{style:{marginTop:"23px"}},[e._v("暂无数据")])]),e._v(" "),a("div",{attrs:{slot:"append"},slot:"append"},[e.tableData.length>0?a("page",{attrs:{pageIndex:e.CriteriaModel.pageIndex,total:e.CriteriaModel.total,pageSize:e.CriteriaModel.pageSize,pageSizesList:e.CriteriaModel.pageSizesList},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}}):e._e()],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"message-dialog",attrs:{visible:e.endsDialog,title:"结束流程","close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.endsDialog=t}}},[a("span",{staticStyle:{"text-align":"left"}},[e._v("您确认需要结束该流程？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-check-outline",size:"mini"},on:{click:e.endProcess}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:function(t){e.endsDialog=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{staticClass:"message-dialog approvaldialog",attrs:{visible:e.approvaldialog,title:"批量审批","close-on-click-modal":!1,id:"wait-opinion-dialog"},on:{"update:visible":function(t){e.approvaldialog=t},close:e.closeApproval}},[a("el-form",{ref:"carefulform",attrs:{model:e.carefulform,rules:e.rules,"label-width":"90px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"审批意见",prop:"checkComment"}},[a("el-input",{attrs:{type:"textarea",rows:8},model:{value:e.carefulform.checkComment,callback:function(t){e.$set(e.carefulform,"checkComment",t)},expression:"carefulform.checkComment"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"办理人："}},[a("span",[e._v(e._s(e.carefulform.userName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"办理时间："}},[a("span",[e._v(e._s(e.carefulform.handtime))])])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-circle-check-outline",size:"mini"},on:{click:function(t){e.ascertain("carefulform")}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-close-outline",size:"mini"},on:{click:function(t){e.approvaldialog=!1}}},[e._v("取 消")])],1)],1)],1)]),e._v(" "),a("choosen",{ref:"dialogChoosen",attrs:{typeTab:e.typeTab,Visible:e.Visible,ProcessType:e.ProcessType,portalmMtilselectCheck:e.portalmMtilselectCheck},on:{OpenDialog:e.OpenDialog,sendTag:e.sendTag,CloseDialog:e.CloseDialog}})],1)],1)],1)},staticRenderFns:[]};var o=function(e){a("q9Wy")},i=a("VU/8")(s.a,r,!1,o,"data-v-3671a354",null);t.default=i.exports},q9Wy:function(e,t){}});
//# sourceMappingURL=11.4f0941ee6e95e6269940.js.map