webpackJsonp([33],{Lgwk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("ts/9"),s=a("PJh5"),i=a.n(s),r=a("Lxn6"),n=a("+vjY"),l=i()().day(0).format("YYYY-MM-DD"),c=i()().day(6).format("YYYY-MM-DD"),d=i()().startOf("month").format("YYYY-MM-DD"),h=i()().endOf("month").format("YYYY-MM-DD"),p=i()().startOf("quarter").format("YYYY-MM-DD"),m=i()().endOf("quarter").format("YYYY-MM-DD"),g=i()().startOf("year").format("YYYY-MM-DD"),u=i()().endOf("year").format("YYYY-MM-DD"),D={name:"",components:{project_dialog:o.a},data:function(){return{organSelectVal:"",comp:{},childDataUrl:{url:""},showdialog:!1,fullHeight:document.documentElement.clientHeight,organSelectRadio:1,model:{selectForm:{},date:""},oneCheck:!1,startDate:"",endDate:"",isShow:!0,isShowReportCondition:!0,arrtReportCondition:"收起",icon:"el-icon-arrow-down",iconIf:"el-icon-arrow-up",tableData:[],orgDepId:"",orderBy:"",imgLoading:!1}},mounted:function(){},methods:{change:function(){switch(this.organSelectRadio){case 1:this.startDate=l,this.endDate=c;break;case 2:this.startDate=d,this.endDate=h;break;case 3:this.startDate=p,this.endDate=m;break;case 4:this.startDate=g,this.endDate=u;break;case 5:this.startDate=this.model.date[0]?this.model.date[0]+" 00:00:00":"",this.endDate=this.model.date[1]?this.model.date[1]+" 23:59:59":""}},getExportDataList:function(t){var e=this;this.change();var a={startDate:this.startDate,endDate:this.endDate,orgDepId:this.orgDepId,orderBy:this.orderBy};n.a.startLoading(),e.$axios.post("/api/StatisticalreturnratePeople/page",a).then(function(a){e.exportData=a.data.processesReportList,t(),n.a.endLoading()}).catch(function(t){e.$message.error("查询列表数据失败!ERROR MESSAGE:"+t),n.a.endLoading()})},exportList:function(){var t=this;this.change(),n.a.startLoading({lock:!0,text:"数据量过大，正在拼命加载中...",background:"rgba(255, 255, 255, 0.9)",target:document.querySelector(".loadingtext")});var e={startDate:this.startDate,endDate:this.endDate,orgDepId:this.orgDepId?parseInt(this.orgDepId):null,orderBy:this.orderBy,filterEmptyComment:"0",userID:""};t.$axios.post("/api/exportExcelForTable",{tableName:"动态-岗位/人-以“人”统计退回率",params:e},{responseType:"blob"}).then(function(t){var e=t.data;r.a.exportSearchList("动态-岗位/人-以“人”统计退回率",e),n.a.endLoading()}).catch(function(e){n.a.endLoading(),t.$message.error("导出Excel失败!ERROR MESSAGE:"+e)})},showToggleReportCondition:function(){this.isShowReportCondition=!this.isShowReportCondition,this.isShowReportCondition?(this.arrtReportCondition="收起",this.iconIf="el-icon-arrow-up"):(this.arrtReportCondition="展开",this.iconIf="el-icon-arrow-down")},rowClick:function(t,e,a){a.label},getList:function(){var t=this;if(0!==this.orgDepId.length){this.imgLoading=!0,this.change();var e={startDate:this.startDate,endDate:this.endDate,orgDepId:this.orgDepId,orderBy:this.orderBy};this.$axios.post("/api/StatisticalreturnratePeople/page",e).then(function(e){t.tableData=e.data.statisticalreturnrate;for(var a=0;a<e.data.statisticalreturnrate.length;a++)e.data.statisticalreturnrate[a].returnRate=parseFloat(e.data.statisticalreturnrate[a].returnRate)+"%";t.imgLoading=!1}).catch(function(e){t.imgLoading=!1})}else this.$message.warning("请选择组织进行查询！")},sortChange:function(t){this.orderBy=t.prop+" "+t.order.replace("ending",""),this.getList()},openDialog:function(t,e){this.comp.component=t,this.showdialog=!0,r.a.showDailog_mask(),this.oneCheck=!0,this.childDataUrl.getTree="getTree",this.childDataUrl.isFirst="2"},hideComponent:function(){this.showdialog=!1,r.a.hiddenDailog_mask()},showMsgfromchild:function(t){if(this.oneCheck){var e=t.last.lastNode;this.model.companys_t=e,this.model.companys=e,this.model.companys.length>15&&(this.model.companys=this.model.companys.substr(0,20)+"..."),this.model.selectForm.departmentID=t.item.orgID,this.model.selectForm.companyCode=t.last.lastId.toString(),this.childDataUrl.chooseProject=t,this.orgDepId=t.last.lastId,this.organSelectVal=e}this.hideComponent()},search:function(){this.getList()},refresh:function(){this.childDataUrl.chooseProject=new Array,this.startDate="",this.endDate="",this.organSelectVal="",this.organSelectRadio=1,this.orgDepId="",this.orderBy=""}},computed:{},watch:{fullHeight:function(){return document.documentElement.clientHeight}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"staticReports"},[a("el-container",[a("el-header",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.imgLoading,expression:"imgLoading"}],staticClass:"staticReports loadingtext minWidth",attrs:{"element-loading-text":"加载中...","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[a("div",{staticClass:"taticReports-content"},[a("el-row",{staticClass:"staticReports-header",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticClass:"titleMT",attrs:{span:17}},[a("span",{staticClass:"mz",on:{click:function(e){t.$router.back(-1)}}},[t._v("流程报表")]),a("i",{class:t.icon})]),t._v(" "),a("el-col",{staticClass:"titleBtn clearfix",attrs:{span:6}},[a("el-button",{attrs:{round:"",type:"primary",size:"mini"},on:{click:t.refresh}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{round:"",type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索")])],1)],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"statement reportCondition"},[a("span",{staticClass:"fz16"},[t._v("动态-岗位/人-以“人”统计退回率")]),t._v(" "),a("el-row",{staticClass:"staticReports-middle lh35  staticReportsMiddle"},[a("el-col",{staticClass:"processSelect",attrs:{span:2,sm:4,md:1}},[a("span",[t._v("组织选择")])]),t._v(" "),a("el-col",{staticClass:"process-inputbox",attrs:{span:14}},[a("i",{staticClass:"iconfont icon-organization",on:{click:function(e){t.openDialog("project_dialog")}}}),t._v(" "),a("el-input",{staticClass:"el-inputHeigth",attrs:{disabled:!0,size:"mini"},nativeOn:{dblclick:function(e){t.openDialog("project_dialog")}},model:{value:t.organSelectVal,callback:function(e){t.organSelectVal=e},expression:"organSelectVal"}})],1)],1),t._v(" "),a("el-row",{staticClass:"reportCondition-date reportConditionDate"},[a("el-col",{staticClass:"timeDuan zj",attrs:{span:2,sm:4,md:1}},[a("span",[t._v("时间段")])]),t._v(" "),a("el-col",{staticClass:"timeSelect",attrs:{span:7,sm:8}},[a("el-radio-group",{model:{value:t.organSelectRadio,callback:function(e){t.organSelectRadio=e},expression:"organSelectRadio"}},[a("el-radio",{attrs:{label:1}},[t._v("本周")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("本月")]),t._v(" "),a("el-radio",{attrs:{label:3}},[t._v("本季度")]),t._v(" "),a("el-radio",{attrs:{label:4}},[t._v("本年")]),t._v(" "),a("el-radio",{attrs:{label:5}},[t._v("其他")])],1)],1),t._v(" "),5===t.organSelectRadio?a("el-col",{attrs:{span:7,sm:6}},[a("div",{staticClass:"border"},[a("el-date-picker",{staticStyle:{width:"auto"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.model.date,callback:function(e){t.$set(t.model,"date",e)},expression:"model.date"}})],1)]):t._e(),t._v(" "),a("el-col",{staticClass:"buttonWrap  buttonWrapTA",attrs:{span:4}},[a("el-button",{attrs:{round:"",type:"primary",size:"mini"},on:{click:t.exportList}},[a("i",{staticClass:"iconfont icon-export"}),t._v("导出")])],1)],1)],1),t._v(" "),a("div",{staticClass:"statement"},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{height:t.isShowReportCondition?t.fullHeight-270:t.fullHeight-280,data:t.tableData,"highlight-current-row":"",border:""},on:{"sort-change":t.sortChange}},[a("el-table-column",{attrs:{align:"center",property:"rowNumber",sortable:"custom",width:"120",label:"排名"}}),t._v(" "),a("el-table-column",{attrs:{align:"left",property:"userName",sortable:"custom",label:"岗位"}}),t._v(" "),a("el-table-column",{attrs:{align:"left",property:"department",sortable:"custom",label:"部门"}}),t._v(" "),a("el-table-column",{attrs:{prop:"processTotalCnt",sortable:"custom",label:"处理实例数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"returnCnt",sortable:"custom",label:"退回实例数"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",property:"returnRate",sortable:"custom",label:"退回率",width:"120"}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.imgLoading,expression:"!imgLoading"}],attrs:{slot:"empty"},slot:"empty"},[a("p",{style:{marginTop:"23px"}},[t._v("暂无数据")])])],1)],1)],1)]),t._v(" "),t.showdialog?a(t.comp.component,{tag:"component",attrs:{childDataUrl:t.childDataUrl,oneCheck:t.oneCheck},on:{hideComponent:t.hideComponent,sureSubmit:t.showMsgfromchild}}):t._e()],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(D,f,!1,function(t){a("sAgI")},"data-v-114358ba",null);e.default=v.exports},sAgI:function(t,e){}});
//# sourceMappingURL=33.2c391f2ffe689dc82da9.js.map